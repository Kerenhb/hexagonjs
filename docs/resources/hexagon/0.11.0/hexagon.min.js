/*! 
  hexagon.js 
  ---------- 
  version: 0.11.0
  theme: default
  modules: 
    set
    map
    list
    util
    event-emitter
    color
    selection
    transition
    interpolate
    animate
    pointer-events
    morphs
    click-detector
    button
    dropdown
    collapsible
    sort
    view
    format
    number-picker
    menu
    layout
    spinner
    filter
    date-picker
    time-picker
    request
    table
    select
    tag-input
    morph-section
    input-group
    resize-events
    modal
    notify
    form
    titlebar
    slider
    autocomplete
    base
    color-picker
    color-scale
    crumbtrail
    dashboard
    date-time-picker
    drawing
    error-pages
    extended-table
    fast-click
    form-builder
    inline-editable
    inline-select
    label
    paginator
    palette
    plot
    preferences
    progress-bar
    search-dom
    sidebar
    tabs
    time-slider
    tree
*/
!function(){window.hx=hx=window.hx||{},hx.version="0.11.0",hx.theme={dropdown:{spacing:"0"},paginator:{arrowButton:"",defaultButton:"hx-compliment",selectedButton:"hx-positive"},palette:{defaultCol:"#6582A6",positiveCol:"#6FB365",warningCol:"#CB9856",negativeCol:"#C74967",infoCol:"#A36FA9",complimentCol:"#FDFDFD",contrastCol:"#3D3D3D",lightTextCol:"#F3F3F3",darkTextCol:"#3D3D3D"},plot:{colors:["rgb(177,119,190)","rgb(90,155,212)","rgb(241,90,113)","rgb(151,195,102)","rgb(250,169,91)","rgb(226,212,64)"],warmCol:"rgb(250,169,91)",ambientCol:"rgb(226,212,64)",coldCol:"rgb(90,155,212)",positiveCol:"rgb(151,195,102)",warningCol:"rgb(226,212,64)",negativeCol:"rgb(241,90,113)"}},function(){var t,e,n,i,r;r="\x00",i=r.charCodeAt(0),n=function(t){return r+t},e=function(t){return t&&t.charCodeAt(0)===i},t=function(){function t(t){var e,n,i;if(this.size=0,t)for(e=0,n=t.length;n>e;e++)i=t[e],this.add(i)}return t.prototype.add=function(t){return n(t)in this||this.size++,this[n(t)]=t,this},t.prototype.clear=function(){var t;for(t in this)e(t)&&delete this[t];return void(this.size=0)},t.prototype["delete"]=function(t){var e;return e=n(t),e in this&&delete this[e]?(this.size--,!0):!1},t.prototype.entries=function(){var t,n,i;t=[];for(n in this)i=this[n],e(n)&&t.push([i,i]);return t},t.prototype.forEach=function(t,n){var i,r;null==n&&(n=this);for(i in this)r=this[i],e(i)&&t.call(n,r);return void 0},t.prototype.has=function(t){return n(t)in this},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){var t,n,i;n=[];for(t in this)i=this[t],e(t)&&n.push(i);return n},t}(),hx.Set=t}(),function(){var t,e,n,i,r;r="\x00",i=r.charCodeAt(0),n=function(t){return r+t},e=function(t){return t&&t.charCodeAt(0)===i},t=function(){function t(t){var e,n,i;if(this.size=0,t)for(e=0,n=t.length;n>e;e++)i=t[e],this.set(i[0],i[1])}return t.prototype.clear=function(){var t;for(t in this)e(t)&&delete this[t];return this.size=0},t.prototype["delete"]=function(t){var e;return e=n(t),e in this&&delete this[e]&&this.size--,this},t.prototype.entries=function(){var t,n,i;t=[];for(n in this)i=this[n],e(n)&&t.push([n.substring(1),i]);return t},t.prototype.forEach=function(t,n){var i,r;null==n&&(n=this);for(i in this)r=this[i],e(i)&&t.call(n,i.substring(1),r);return this},t.prototype.get=function(t){return n(t)in this?this[n(t)]:void 0},t.prototype.has=function(t){return n(t)in this},t.prototype.keys=function(){var t,n;n=[];for(t in this)e(t)&&n.push(t.substring(1));return n},t.prototype.set=function(t,e){return n(t)in this||this.size++,this[n(t)]=e,this},t.prototype.values=function(){var t,n,i;t=[];for(n in this)i=this[n],e(n)&&t.push(i);return t},t}(),hx.Map=t}(),function(){var t;t=function(){function t(t){this.list=null!=t?t:[],this.size=this.list.length}return t.prototype.add=function(t){return this.list.push(t),this.size++,this},t.prototype.clear=function(){return this.list=[],this.size=0,this},t.prototype["delete"]=function(t){return t>=0&&t<this.list.length?(this.list.splice(t,1),this.size--,!0):!1},t.prototype.entries=function(){return this.list},t.prototype.forEach=function(t,e){var n,i,r,o;for(null==e&&(e=this),o=this.list,i=0,r=o.length;r>i;i++)n=o[i],t.call(e,n);return void 0},t.prototype.get=function(t){return t>=0&&t<this.list.length?this.list[t]:void 0},t.prototype.has=function(t){return-1!==this.list.indexOf(t)},t.prototype.remove=function(t){var e;return-1!==(e=this.list.indexOf(t))?(this.list.splice(e,1),this.size--,!0):!1},t.prototype.removeAll=function(t){var e,n;for(n=0;-1!==(e=this.list.indexOf(t));)this.list.splice(e,1),this.size--,n++;return n},t.prototype.values=function(){return this.list},t}(),hx.List=t}(),function(){var t,e,n,i,r,o,s=[].slice;hx.deprecatedWarning=function(){var t,e,n;return t=arguments[0],n=2<=arguments.length?s.call(arguments,1):[],e="Deprecation Warning: "+t,n=["Alternatives:"].concat(n.map(function(t){return"  "+t})),n=n.map(function(t){return"  "+t}),console.warn([e].concat(n).join("\n")),console.trace("Stack Trace")},hx.consoleWarning=function(){var t,e;return t=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],e=e.map(function(t){return"  "+t}),console.warn([t].concat(e).join("\n")),console.trace("Stack Trace")},hx.hash=function(t,e){var n,i,r,o,s;for(s=0,r=t.length-1,n=i=0,o=r;o>=i;n=i+=1)s=31*s+t.charCodeAt(n),s&=s;return e?Math.abs(s)%e:s},hx.transpose=function(t){var e,n,i,r,o,s,a,l,h;if(null==t.length)return void 0;if(h=t.length,0===h||null==t[0].length)return t;for(e=t[0].length,l=new Array(e),n=r=0,s=e;s>r;n=r+=1)for(l[n]=new Array(h),i=o=0,a=h;a>o;i=o+=1)l[n][i]=t[i][n];return l},r=void 0,i=void 0,hx.supports=function(t){var e;switch(t){case"touch":return null!=r?r:r="ontouchstart"in window;case"date":return void 0===i&&(e=document.createElement("input"),e.setAttribute("type","date"),i="text"!==e.type),i}},hx.clamp=function(t,e,n){return Math.min(e,Math.max(t,n))},hx.clampUnit=function(t){return hx.clamp(0,1,t)},hx.randomId=function(t,e){var n,i,r;return null==t&&(t=16),null==e&&(e="ABCEDEF0123456789"),r=e.split(""),i=r.length,function(){var e,o,s;for(s=[],n=e=0,o=t;o>e;n=e+=1)s.push(r[Math.floor(Math.random()*i)]);return s}().join("")},hx.min=function(t){return Math.min.apply(null,null!=t?t.filter(hx.defined):void 0)},hx.minBy=function(t,e){var n,i,r,o,s,a,l,h,u;if(null==t||0===t.length)return void 0;if(e){for(a=t[0],l=e(a),i=r=1,h=t.length-1;h>r;i=r+=1)u=t[i],void 0!==u&&(n=e(u),void 0!==n&&l>n&&(a=u,l=n));return a}for(a=t[0],s=0,o=t.length;o>s;s++)u=t[s],void 0!==u&&a>u&&(a=u);return a},hx.max=function(t){return Math.max.apply(null,null!=t?t.filter(hx.defined):void 0)},hx.maxBy=function(t,e){var n,i,r,o,s,a,l,h,u;if(null==t||0===t.length)return void 0;if(e){for(a=t[0],l=e(a),i=r=1,h=t.length-1;h>r;i=r+=1)u=t[i],void 0!==u&&(n=e(u),void 0!==n&&n>l&&(a=u,l=n));return a}for(a=t[0],s=0,o=t.length;o>s;s++)u=t[s],void 0!==u&&u>a&&(a=u);return a},hx.range=function(t){var e,n,i,r;for(i=[],r=e=0,n=t;n>e;r=e+=1)i.push(r);return i},hx.sum=function(t,e){return t.reduce(function(t,e){return t+e})},hx.flatten=function(t){return[].concat.apply([],t)},hx.cycle=function(t,e){return t[e%t.length]},hx.hashList=function(t,e){return t[hx.hash(e,t.length)]},hx.find=function(t,e){var n,i,r;for(i=0,r=t.length;r>i;i++)if(n=t[i],e(n))return n;return void 0},hx.isString=function(t){return"string"==typeof t||t instanceof String},hx.isFunction=function(t){return"function"==typeof t},hx.isArray=function(t){return t instanceof Array},hx.isObject=function(t){return"object"==typeof t&&!hx.isArray(t)},hx.isPlainObject=function(t){return"object"==typeof t&&null!==t&&!t.nodeType&&t.constructor&&t.constructor.prototype.hasOwnProperty("isPrototypeOf")},hx.groupBy=function(t,e){var n,i,r,o,s,a;for(o=new hx.Map,i=0,r=t.length;r>i;i++)a=t[i],n=e(a),o.has(n)||o.set(n,new hx.List),o.get(n).add(a);return s=o.entries(),s.forEach(function(t){return t[1]=t[1].entries()}),s},hx.unique=function(t){return new hx.Set(t).values()},hx.endsWith=function(t,e){return-1!==t.indexOf(e,t.length-e.length)},hx.startsWith=function(t,e){return 0===t.lastIndexOf(e,0)},hx.tween=function(t,e,n){return t+(e-t)*n},hx.defined=function(t){return void 0!==t},hx.zip=function(t){var e,n,i,r,o;if(t){if(t.length>0){if(i=hx.min(t.map(function(t){return t.length||0})),i>0){for(o=[],e=n=0,r=i;r>n;e=n+=1)o.push(t.map(function(t){return t[e]}));return o}return[]}return[]}return[]},t=function(e,n,i){var r,o,s;o=[];for(r in n)s=n[r],hx.isPlainObject(s)?(null==e[r]&&(e[r]={}),o.push(t(e[r],s,i))):void 0!==s||i?o.push(e[r]=hx.clone(s)):o.push(void 0);return o},e=function(e,n,i){var r,o,s,a,l,h,u,c;if(e){for(u={},o=0,s=i.length;s>o;o++)h=i[o],hx.isPlainObject(h)&&t(u,h,n);return u}for(u={},l=0,a=i.length;a>l;l++)if(h=i[l],hx.isPlainObject(h))for(r in h)c=h[r],(void 0!==c||n)&&(u[r]=c);return u},hx.merge=function(){var t,n;return n=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],e(!0,n,t)},hx.shallowMerge=function(){var t,n;return n=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],e(!1,n,t)},hx.clone=function(t){return hx.isArray(t)?t.map(hx.clone):hx.isPlainObject(t)?hx.merge(!0,{},t):hx.isObject(t)&&null!==t?{}:t},hx.shallowClone=function(t){return hx.isArray(t)?t.slice():hx.isPlainObject(t)?hx.shallowMerge(!0,{},t):hx.isObject(t)&&null!==t?{}:t},o=["webkit","ms","moz","Moz","o","O"],hx.vendor=function(t,e){var n,i,r,s;if(e in t)return t[e];for(n=0,i=o.length;i>n;n++)if(r=o[n],(s=r+e.charAt(0)+e.slice(1))in t)return t[s]},hx.identity=function(t){return t},n=null,hx.parseHTML=function(t){var e;if(!n)try{document.createRange().createContextualFragment(""),n=function(t){return document.createRange().createContextualFragment(t)}}catch(i){e=i,n=function(t){var e,n,i;for(n=document.createDocumentFragment(),i=document.createElement("div"),i.innerHTML=t;e=i.firstChild;)n.appendChild(e);return n}}return n(t)},hx.cleanNode=function(t,e){var n,i;for(null==e&&(e=!0),i=t.childNodes.length-1;i>=0;)n=t.childNodes[i],3===n.nodeType&&/\s/.test(n.nodeValue)?t.removeChild(n):1===n.nodeType&&e&&hx.cleanNode(n),i-=1;return t}}(),function(){var t,e;t=function(){function t(){this.callbacks=new hx.Map,this.allCallbacks=new hx.List}return t.prototype.emit=function(t,e){var n,i,r,o,s,a,l;if(this.callbacks.has(t))for(a=this.callbacks.get(t).entries(),i=0,o=a.length;o>i;i++)(n=a[i])(e);for(l=this.allCallbacks.entries(),r=0,s=l.length;s>r;r++)(n=l[r])(t,e);return this},t.prototype.on=function(t,e){return t?(this.callbacks.has(t)||this.callbacks.set(t,new hx.List),this.callbacks.get(t).add(e)):this.allCallbacks.add(e),this},t.prototype.has=function(t){return this.allCallbacks.size>0||this.callbacks.has(t)&&this.callbacks.get(t).size>0},t.prototype.off=function(t,e){var n;return e?t?null!=(n=this.callbacks.get(t))&&n.remove(e):this.allCallbacks.remove(e):t?this.callbacks.set(t,new hx.List):(this.callbacks=new hx.Map,this.allCallbacks=new hx.List),this},t.prototype.pipe=function(t,e,n){var i;return i=n?function(t){return-1!==n.indexOf(t)}:function(t){return!0},e?this.on(null,function(n,r){return i(n)?t.emit(e+"."+n,r):void 0}):this.on(null,function(e,n){return i(e)?t.emit(e,n):void 0}),this},t}(),e=function(){function e(){this.emitters=new hx.List,this.emittersMap=new hx.Map,this.global=n(this,"default")}var n,i;return n=function(e,n){var i;return i=new t,e.emittersMap.set(n,i),e.emitters.add(i),i},i=function(t,e){return t.emittersMap.has(e)&&(t.emittersMap["delete"](e),t.emitters.remove(t)),t},e.prototype.emit=function(t,e){var n,i,r,o;for(o=this.emitters.entries(),i=0,r=o.length;r>i;i++)n=o[i],n.emit(t,e);return this},e.prototype.on=function(t,e,i){var r;return"default"===e?(hx.consoleWarning('"default" is a reserved namespace. It can not be used as a namespace name.'),this):(hx.isString(e)?(r=this.emittersMap.get(e),r||(r=n(this,e)),r.on(t,i)):this.global.on(t,e),this)},e.prototype.has=function(t){var e,n,i,r;if(this.global.has(t))return!0;for(r=this.emitters.entries(),n=0,i=r.length;i>n;n++)if(e=r[n],e.has(t))return!0;return!1},e.prototype.off=function(t,e,n){var i,r,o,s,a;if(hx.isString(e))null!=(s=this.emittersMap.get(e))&&s.off(t,n);else for(a=this.emitters.entries(),r=0,o=a.length;o>r;r++)i=a[r],i.off(t,n);return this},e.prototype.pipe=function(t,e,n){return this.global.pipe(t,e,n),this},e}(),hx.EventEmitter=e}(),function(){var t,e,n;t=function(){function t(t,e,n,i,r,o,s){this.r=null!=t?t:0,this.g=null!=e?e:0,this.b=null!=n?n:0,this.a=null!=i?i:1,this.h=null!=r?r:0,this.s=null!=o?o:0,this.l=null!=s?s:0}var e,n,i,r;return i=function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t},e=function(t){var e;return e=t.toString(16),1===e.length?"0"+e:e},r=function(t){var e,n,r,o,s,a,l,h;return r=t[0],h=t[1],o=t[2],h=hx.clampUnit(h),o=hx.clampUnit(o),0===h?l=n=e=o:(a=.5>o?o*(1+h):o+h-o*h,s=2*o-a,l=i(s,a,r+1/3),n=i(s,a,r),e=i(s,a,r-1/3)),l*=255,n*=255,e*=255,[l,n,e]},n=function(t){var e,n,i,r,o,s,a,l,h;if(l=t[0]/255,i=t[1]/255,e=t[2]/255,s=Math.max(l,i,e),a=Math.min(l,i,e),o=(s+a)/2,n=s-a,s===a)r=h=0;else{switch(h=o>.5?n/(2-s-a):n/(s+a),s){case l:r=(i-e)/n+(e>i?6:0);break;case i:r=(e-l)/n+2;break;case e:r=(l-i)/n+4}r/=6}return[r,h,o]},t.prototype.getTextCol=function(){var t;return t=(299*this.r+587*this.g+114*this.b)/1e3,t>=128?"black":"white"},t.prototype.setRGB=function(t,e){return null==t&&(t=[]),null==t[0]&&(t[0]=this.r),null==t[1]&&(t[1]=this.g),null==t[2]&&(t[2]=this.b),null==t[3]&&(t[3]=this.a),this.r=Math.round(Number(t[0])),this.g=Math.round(Number(t[1])),this.b=Math.round(Number(t[2])),this.a=Math.round(100*Number(t[3]))/100,e||this.setHSL(n([this.r,this.g,this.b]),1),this},t.prototype.setHSL=function(t,e){return null==t&&(t=[]),null==t[0]&&(t[0]=this.h),null==t[1]&&(t[1]=this.s),null==t[2]&&(t[2]=this.l),null==t[3]&&(t[3]=this.a),t[0]>1&&(t[0]/=360),t[1]>1&&(t[1]/=100),t[2]>1&&(t[2]/=100),this.h=Number(t[0]),this.s=Number(t[1]),this.l=Number(t[2]),this.a=Math.round(100*Number(t[3]))/100,e||this.setRGB(r([this.h,this.s,this.l]),1),this},t.prototype.toString=function(t){var n,i,r;switch(n=Math.round(360*this.h),r=Math.round(100*this.s),i=Math.round(100*this.l),t){case"hsl":return"hsl("+n+","+r+"%,"+i+"%)";case"hsla":return"hsla("+n+","+r+"%,"+i+"%,"+this.a+")";case"rgb":return"rgb("+this.r+","+this.g+","+this.b+")";case"rgba":return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")";default:return 1!==this.a?"rgba("+this.r+","+this.g+","+this.b+","+this.a+")":"#"+e(this.r)+e(this.g)+e(this.b)}},t.prototype.toArray=function(){return[this.r,this.g,this.b,this.a]},t.prototype.mix=function(t,e){var n,i,r,o;return null==e&&(e=.5),o=this.r*(1-e)+t.r*e,r=this.g*(1-e)+t.g*e,i=this.b*(1-e)+t.b*e,n=this.a*(1-e)+t.a*e,this.setRGB([o,r,i,n])},t.prototype.range=function(t,e,n,i){var r,o,s,a,l;return null==t&&(t=3),null==e&&(e=3),null==n&&(n=.5),l=n/Math.max(t,e,1),a=this,o=hx.range(t+1).map(function(t){return a.clone().lighten(l*t)}),r=hx.range(e).reverse().map(function(t){return a.clone().darken(l*(t+1))}),s=r.concat(o),i?"array"===i?s.map(function(t){return t.toArray()}):s.map(function(t){return t.toString(i)}):s},t.prototype.saturate=function(t){return this.s=this.s+this.s*t,this.setHSL([this.h,this.s,this.l])},t.prototype.desaturate=function(t){return this.s=this.s-this.s*t,this.setHSL([this.h,this.s,this.l])},t.prototype.saturation=function(t){return 0!==this.s&&(this.s=t),this.setHSL([this.h,this.s,this.l])},t.prototype.lighten=function(t){return this.l=this.l+this.l*t,this.setHSL([this.h,this.s,this.l])},t.prototype.darken=function(t){return this.l=this.l-this.l*t,this.setHSL([this.h,this.s,this.l])},t.prototype.lightness=function(t){return this.l=t,this.setHSL([this.h,this.s,this.l])},t.prototype.fadeIn=function(t){return this.a=Math.round(100*(this.a+this.a*t))/100,this.a>1&&(this.a=1),this},t.prototype.fadeOut=function(t){return this.a=Math.round(100*(this.a-this.a*t))/100,this.a<0&&(this.a=0),this},t.prototype.alpha=function(t){return this.a=t,this},t.prototype.clone=function(){return new t(this.r,this.g,this.b,this.a,this.h,this.s,this.l)},t}(),n=function(e){var n,i,r,o,s,a,l,h,u;if(!hx.isString(e))return void 0;if(-1!==e.indexOf("#"))e=e.substring(1),s=3===e.length?1:2,h=[e.substring(0,s),e.substring(s,2*s),e.substring(2*s,3*s)],1===s&&(h[0]+=""+h[0],h[1]+=""+h[1],h[2]+=""+h[2]),a=parseInt(h[0],16),r=parseInt(h[1],16),i=parseInt(h[2],16),n=1,l=[a,r,i,n];else{if(-1===e.indexOf("rgb"))return-1!==e.indexOf("hsl")?(u=e.replace("hsl(","").replace("hsla(","").replace(")","").replace("%","").replace("%","").replace("%",""),o=u.split(","),o.some(function(t){return isNaN(Number(t))})?void 0:(null==o[3]&&(o[3]=1),(new t).setHSL(o))):void 0;u=e.replace("rgb(","").replace("rgba(","").replace(")",""),l=u.split(",")}return null==l[3]&&(l[3]=1),l.some(function(t){return isNaN(Number(t))})?void 0:(new t).setRGB(l)},e=function(e){return e[0]=hx.clamp(0,255,e[0]),e[1]=hx.clamp(0,255,e[1]),e[2]=hx.clamp(0,255,e[2]),null==e[3]&&(e[3]=1),e[3]=hx.clamp(0,1,e[3]),(new t).setRGB(e)},hx.color=function(){return 4===arguments.length?(new t).setRGB([arguments[0],arguments[1],arguments[2],arguments[3]]):3===arguments.length?(new t).setRGB([arguments[0],arguments[1],arguments[2],1]):1===arguments.length?Array.isArray(arguments[0])?e(arguments[0]):n(arguments[0]):new t},hx.color.isColorString=function(t){return void 0!==n(t)},hx.color.isColor=function(e){return e instanceof t}}(),function(){var t,e,n,i,r,o,s,a,l,h,u,c;a={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},c=function(t,e){return e.querySelector(t)},u=function(t,e){return e.querySelectorAll(t)},"function"==typeof Sizzle&&(c=function(t,e){return Sizzle(t,e)[0]||null},u=Sizzle),s=function(t,e){return null==e&&(e=!0),e?(null==t.__hx__&&(t.__hx__={}),t.__hx__):t.__hx__?t.__hx__:void 0},t=function(){function t(){this.elements=new hx.List,this.ids=new hx.Set}return t.prototype.add=function(t){var e,n;return e=s(t),null==e.id&&(e.id=hx.randomId()),n=e.id,this.ids.has(n)?void 0:(this.ids.add(n),this.elements.add(t))},t.prototype.remove=function(t){var e;return e=s(t,!1),e&&e.id&&this.ids.has(e.id)?(this.elements.remove(t),this.ids["delete"](e.id)):void 0},t.prototype.entries=function(){return this.elements.entries()},t.prototype.has=function(t){var e;return e=s(t),e&&e.id&&this.ids.has(e.id)||!1},t}(),r=function(t,e){var n;for(e=e.parentNode,n=function(){if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";if(e.mozMatchesSelector)return"mozMatchesSelector";if(e.webkitMatchesSelector)return"webkitMatchesSelector";if(e.oMatchesSelector)return"oMatchesSelector";if(e.msMatchesSelector)return"msMatchesSelector";throw new Error("Dom matches method is not available (and is needed for closest())")}();e&&e!==document;){if(e[n](t))return e;e=e.parentNode}return void 0},o=function(e){var n,i,r,o,s,a,l;for(l=new t,n=0,r=e.length;r>n;n++)for(a=e[n],i=0,o=a.length;o>i;i++)s=a[i],l.add(s);return l.entries()},i=function(t,e,n){var i,r,o,s,a,l,h,u;if(u=hx.select(t),i=u.attr("class"),h=e.split(" ").filter(function(t){return""!==t}),!i)return void(n&&u.attr("class",h.join(" ")));for(o=i.split(" "),a=0,l=h.length;l>a;a++)r=h[a],""!==r&&(s=o.indexOf(r),n&&-1===s?o.push(r):n||-1===s||o.splice(s,1),u.attr("class",o.join(" ")))},l=function(t,e){return t?0===e.length?void 0:1===e.length?e[0]:e:e},n=[],e=function(){function t(t){this.nodes=t,this.nodes=this.nodes.filter(function(t){return null!=t}),this.singleSelection=!1}var e,h;return t.prototype.select=function(e){var n;return hx.isString(e)?(n=new t(this.nodes.map(function(t){return c(e,t)})),n.singleSelection=this.singleSelection,n):(hx.consoleWarning("Selection.select was passed the wrong argument type","Selection.select only accepts a string argument, you supplied:",e),new t([]))},t.prototype.selectAll=function(e){return hx.isString(e)?new t(o(this.nodes.map(function(t){return u(e,t)}))):(hx.consoleWarning("Selection.selectAll was passed the wrong argument type","Selection.selectAll only accepts a string argument, you supplied:",e),new t([]))},t.prototype.closest=function(e){var n;return n=hx.isString(e)?new t(this.nodes.map(function(t){return r(e,t)})):(hx.consoleWarning("Selection.closest was passed the wrong argument type","Selection.closest only accepts a string argument, you supplied:",e),new t([])),n.singleSelection=this.singleSelection,n},h=function(t,e,n){var i,r,o,s,l,h,u;if(e instanceof HTMLElement)return t.singleSelection?1===t.nodes.length?(n(t.nodes[0],e),[e]):[]:(hx.consoleWarning("Selection Api error when attaching element","You can not attach an existing element to a selection with multiple elements"),[]);for(h=t.nodes,u=[],i=0,r=h.length;r>i;i++)l=h[i],o=a.hasOwnProperty(e)?a[e]:l.namespaceURI,s=l.ownerDocument.createElementNS(o,e),n(l,s),u.push(s);return u},e=function(e,n,i,r){var o,s,a,l,u,c;return null==r&&(r=!1),c=e.singleSelection,a=n instanceof t?(c=c&&n.singleSelection,o=r?-1:1,l=function(){var t,r,a,l,u;for(l=n.nodes,a=o,u=[],a>0?(t=0,r=l.length):t=l.length-1;a>0?r>t:t>=0;t+=a)s=l[t],u.push(h(e,s,i));return u}(),hx.flatten(r?l.reverse():l)):hx.isArray(n)?(c=!1,o=r?-1:1,l=function(){var t,r,a,l;for(a=o,l=[],a>0?(t=0,r=n.length):t=n.length-1;a>0?r>t:t>=0;t+=a)s=n[t],l.push(h(e,s,i));return l}(),hx.flatten(r?l.reverse():l)):h(e,n,i),u=new t(a),u.singleSelection=c,u},t.prototype.prepend=function(t){return e(this,t,function(t,e){return t.insertBefore(e,t.firstChild)},!0)},t.prototype.append=function(t){return e(this,t,function(t,e){return t.appendChild(e)})},t.prototype.add=function(t){return this.append(t),this},t.prototype.insertBefore=function(t){return e(this,t,function(t,e){return t.parentNode.insertBefore(e,t)})},t.prototype.insertAfter=function(t){return e(this,t,function(t,e){return t.parentNode.insertBefore(e,t.nextSibling)},!0)},t.prototype.remove=function(){var t,e,n,i,r,o;for(i=this.nodes,o=[],t=0,e=i.length;e>t;t++)n=i[t],o.push(null!=(r=n.parentNode)?r.removeChild(n):void 0);return o},t.prototype.clear=function(){var t,e,n,i;for(i=this.nodes,t=0,e=i.length;e>t;t++)for(n=i[t];n.firstChild;)n.removeChild(n.firstChild);return this},t.prototype.node=function(t){return null==t&&(t=0),this.nodes[t]},t.prototype.clone=function(e){var n,i,r;return null==e&&(e=!0),n=function(){var t,n,r,o;for(r=this.nodes,o=[],t=0,n=r.length;n>t;t++)i=r[t],o.push(i.cloneNode(e));return o}.call(this),r=new t(n),r.singleSelection=this.singleSelection,r},t.prototype.prop=function(t,e){var n,i,r,o;if(2===arguments.length){if(null!=e)for(o=this.nodes,n=0,i=o.length;i>n;n++)r=o[n],r[t]=e;return this}return l(this.singleSelection,function(){var e,n,i,o;for(i=this.nodes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(r[t]);return o}.call(this))},t.prototype.attr=function(t,e){var n,i,r,o;if(2===arguments.length){for(o=this.nodes,n=0,i=o.length;i>n;n++)r=o[n],void 0!==e?r.setAttribute(t,e):r.removeAttribute(t);return this}return l(this.singleSelection,function(){var e,n,i,o;for(i=this.nodes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(r.getAttribute(t));return o}.call(this))},t.prototype.style=function(t,e){var n,i,r,o;if(2===arguments.length){for(o=this.nodes,n=0,i=o.length;i>n;n++)r=o[n],r.style.setProperty(t,e);return this}return l(this.singleSelection,function(){var e,n,i,o;for(i=this.nodes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push(window.getComputedStyle(r,null).getPropertyValue(t));return o}.call(this))},t.prototype.text=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],i.textContent=null!=t?t:"";return this}return l(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.textContent||"");return r}.call(this))},t.prototype.html=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],i.innerHTML=t||"";return this}return l(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.innerHTML||"");return r}.call(this))},t.prototype["class"]=function(t){var e,n,i,r;if(1===arguments.length){for(r=this.nodes,e=0,n=r.length;n>e;e++)i=r[e],i.setAttribute("class",t||"");return this}return l(this.singleSelection,function(){var t,e,n,r;for(n=this.nodes,r=[],t=0,e=n.length;e>t;t++)i=n[t],r.push(i.getAttribute("class")||"");return r}.call(this))},t.prototype.classed=function(t,e){var n,r,o,s,a,h;if(1===arguments.length)return n=function(){var t,e,n,i;for(n=this.nodes,i=[],t=0,e=n.length;e>t;t++)a=n[t],i.push(a.getAttribute("class")||"");return i}.call(this),l(this.singleSelection,function(){var e,i,o;for(o=[],e=0,i=n.length;i>e;e++)r=n[e],o.push(-1!==r.split(" ").indexOf(t));return o}());for(h=this.nodes,o=0,s=h.length;s>o;o++)a=h[o],i(a,t,e);return this},t.prototype.value=function(t){return 1===arguments.length?this.prop("value",t):this.prop("value")},t.prototype.on=function(t,e,i,r){var o,a,l,h,u,c,p,d,f,x;for(hx.isString(e)||(r=i,i=e,e=void 0),x=this.nodes,u=0,p=x.length;p>u;u++){if(f=x[u],a=s(f),h=a.eventEmitter?a.eventEmitter:a.eventEmitter=new hx.EventEmitter,null==a.eventAugmenters&&(a.eventAugmenters=new hx.Map),h.has(t)||f.addEventListener(t,function(e){return h.emit(t,e)}),r||h.off(t,e),!a.eventAugmenters.has(t)){for(l=[],c=0,d=n.length;d>c;c++)o=n[c],o.name===t&&l.push(o.setup(f,h));a.eventAugmenters.set(t,l)}e?h.on(t,e,i):h.on(t,i)}return this},t.prototype.off=function(t,e,n){var i,r,o,a,l,h;for(hx.isString(e)||(n=e,e=void 0),l=this.nodes,r=0,o=l.length;o>r;r++)a=l[r],i=s(a),null!=(h=i.eventEmitter)&&h.off(t,e,n);return this},t.prototype.data=function(t,e){var n,i,r;return 1===arguments.length?(r=function(){var e,r,o,a;for(o=this.nodes,a=[],e=0,r=o.length;r>e;e++)i=o[e],n=s(i),n.data?a.push(n.data.get(t)):a.push(void 0);return a}.call(this),l(this.singleSelection,r)):(r=function(){var r,o,a,l;for(a=this.nodes,l=[],r=0,o=a.length;o>r;r++)i=a[r],n=s(i),null==n.data&&(n.data=new hx.Map),l.push(n.data.set(t,e));return l}.call(this),this)},t.prototype.view=function(t,e){return null==e&&(e="div"),0===this.size()&&hx.consoleWarning(".view() called on an empty selection"),new View(this,t,e)},t.prototype.each=function(t){return this.nodes.forEach(t),this},t.prototype.map=function(t){return l(this.singleSelection,this.nodes.map(t))},t.prototype.filter=function(e){var n;return n=new t(this.nodes.filter(e)),n.singleSelection=this.singleSelection,n},t.prototype.box=function(){var t;return l(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.getBoundingClientRect());return r}.call(this))},t.prototype.width=function(){var t;return l(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.getBoundingClientRect().width);return r}.call(this))},t.prototype.height=function(){var t;return l(this.singleSelection,function(){var e,n,i,r;for(i=this.nodes,r=[],e=0,n=i.length;n>e;e++)t=i[e],r.push(t.getBoundingClientRect().height);return r}.call(this))},t.prototype.size=function(){return this.nodes.length},t.prototype.empty=function(){return 0===this.nodes.length},t.prototype.contains=function(t){var e,n,i,r;for(r=this.nodes,e=0,n=r.length;n>e;e++)if(i=r[e],i.contains(t))return!0;return!1},t}(),h=function(t,n){var i,r;return i=n?t:"string"==typeof t?[c(t,document)]:[t],r=new e(i),r.singleSelection=!n,r},hx.select=function(t){return t instanceof HTMLElement||t instanceof SVGElement||hx.isString(t)||t===document||t===window?h(t):(hx.consoleWarning("hx.select was passed the wrong argument type","hx.select only accepts a HTMLElement, SVGElement or string argument, you supplied:",t),new e([]))},hx.select.getHexagonElementDataObject=s,hx.select.addEventAugmenter=function(t){return n.push(t)},hx.selectAll=function(t){return hx.isString(t)||hx.isArray(t)?hx.isArray(t)?h(t,!0):h(document).selectAll(t):(hx.consoleWarning("hx.selectAll was passed the wrong argument type","hx.selectAll only accepts a string argument, you supplied:",t),new e([]))},hx.detached=function(t,e){return e=a.hasOwnProperty(t)?a[t]:a.xhtml,hx.select(document.createElementNS(e,t))},hx.Selection=e}(),function(){var t,e,n;n=hx.vendor(window,"requestAnimationFrame")||function(t){return setTimeout(t,17)},e=function(t,e){return t()?void 0:n(e)},hx.loop=function(t){var n;return n=function(){return e(t,n)},void e(t,n)},hx.transition=function(t,e,n,i){var r,o;return null==n&&(n=hx.ease.linear),o=(new Date).getTime(),0>=t?(e(1,!1),i&&i(!1),hx.identity):(r=!1,hx.loop(function(){var s;return s=((new Date).getTime()-o)/t,s>=1||r?(e(1,r),i&&i(r),!0):(e(n(s),!1),!1)}),function(){return r=!0})},hx.ease=t={linear:hx.identity,quad:function(t){return t*t},cubic:function(t){return t*t*t}}}(),function(){var t,e;e=function(t){var e,n,i;for(i=new RegExp(/[-+]?(?:\d+\.?\d*|\.?\d+)|((?:[^-+\d])+|\D+)/g),n=[];null!==(e=i.exec(t));)n.push(isNaN(parseInt(e[0]))?e[0]:Number(e[0]));return n},t=function(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}},hx.interpolate=function(n,i){var r,o,s;return"number"==typeof n?t(n,i):(r=hx.color(n),o=hx.color(i),void 0!==r&&void 0!==o?function(t){return r.clone().mix(o,t).toString("rgba")}:(n=e(n),i=e(i),n.length===i.length?function(e){var r,o,s,a;for(r=[],o=s=0,a=n.length;a>=s;o=s+=1)isNaN(parseInt(n[o]))||isNaN(parseInt(i[o]))?n[o]===i[o]?r[o]=n[o]:r[o]=i[o]:r[o]=t(n[o],i[o])(e);return r.join("")}:(s=i.join(""),function(t){return s})))}}(),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;t=function(t){function e(t,n){this.node=t,this.ease=null!=n?n:hx.ease.linear,e.__super__.constructor.apply(this,arguments),this.cancelers=[],this.remaining=0,this.finished=!1,this.endCallback=function(t){return function(e){return t.remaining--,t.remaining<=0&&!t.finished&&!e?(t.finished=!0,t.emit("end")):void 0}}(this)}var n;return i(e,t),n=function(t,e){return this.remaining++,this.cancelers.push(hx.transition(e,t,this.ease,this.endCallback)),this},e.prototype.style=function(t,e,i){var r,o;return this.node?4===arguments.length?(r=hx.interpolate(arguments[1],arguments[2]),o=function(e){return function(n,i){return i?void 0:e.node.style.setProperty(t,r(n))}}(this),n.call(this,o,arguments[3]||200)):(r=hx.interpolate(window.getComputedStyle(this.node,null).getPropertyValue(t),e),o=function(e){return function(n,i){return i?void 0:e.node.style.setProperty(t,r(n))}}(this),n.call(this,o,i||200)):this.endCallback(),this},e.prototype.attr=function(t,e,i){var r,o;return this.node?4===arguments.length?(r=hx.interpolate(arguments[1],arguments[2]),o=function(e){return function(n,i){return i?void 0:e.node.setAttribute(t,r(n))}}(this),n.call(this,o,arguments[3]||200)):(r=hx.interpolate(this.node.getAttribute(t),e),o=function(e){return function(n,i){return i?void 0:e.node.setAttribute(t,r(n))}}(this),n.call(this,o,i||200)):this.endCallback(),this},e.prototype.cancel=function(){var t,e,n,i;for(this.emit("cancelled"),i=this.cancelers,e=0,n=i.length;n>e;e++)(t=i[e])();return this},e}(hx.EventEmitter),hx.animate=function(e,n){return new t(e,n)},hx.Selection.prototype.animate=function(t){return hx.animate(this.nodes[0],t)},e=function(t){function e(t,n,i,o){this.node=t,this.trigger=n,e.__super__.constructor.apply(this,arguments),this.actions=[],this.start=i||function(t){return function(){return r.call(t)}}(this),this.cancelers=o||[],this.cancelled=!1,this.finished=!1,this.trigger&&this.trigger.on("end",function(t){return function(){return t.finished=!0,t.cancelled?void 0:r.call(t)}}(this))}var r;return i(e,t),e.prototype.and=function(t,e){var i;return null==e&&(e=200),hx.isFunction(t)?this.actions.push(t):this.node&&(i=n.get(t),i?this.actions.push(function(t){return function(){return i(t.node,e)}}(this)):hx.consoleWarning(t+" is not a registered morph","The available morphs are",n.entries())),this},e.prototype.then=function(t,n){return null==n&&(n=200),this.actions.length>0?new e(this.node,this,this.start,this.cancelers).and(t,n):this.and(t,n)},e.prototype.andStyle=function(t,e,n){var i;return null==n&&(n=200),i=arguments,4===i.length?this.and(function(t){return function(){return hx.animate(t.node).style(i[0],i[1],i[2],i[3])}}(this)):this.and(function(i){return function(){return hx.animate(i.node).style(t,e,n)}}(this))},e.prototype.thenStyle=function(t,e,n){var i;return null==n&&(n=200),i=arguments,4===i.length?this.then(function(t){return function(){return hx.animate(t.node).style(i[0],i[1],i[2],i[3])}}(this)):this.then(function(i){return function(){return hx.animate(i.node).style(t,e,n)}}(this))},e.prototype.andAttr=function(t,e,n){var i;return null==n&&(n=200),i=arguments,4===i.length?this.and(function(t){return function(){return hx.animate(t.node).attr(i[0],i[1],i[2],i[3])}}(this)):this.and(function(i){return function(){return hx.animate(i.node).attr(t,e,n)}}(this))},e.prototype.thenAttr=function(t,e,n){var i;return null==n&&(n=200),i=arguments,
4===i.length?this.then(function(t){return function(){return hx.animate(t.node).attr(i[0],i[1],i[2],i[3])}}(this)):this.then(function(i){return function(){return hx.animate(i.node).attr(t,e,n)}}(this))},e.prototype["with"]=function(t,e){return this.then(t,e)},e.prototype.withStyle=function(t,e,n){var i;return i=arguments,4===i.length?this.then(function(t){return function(){return hx.animate(t.node).style(i[0],i[1],i[2],i[3])}}(this)):this.then(function(i){return function(){return hx.animate(i.node).style(t,e,n)}}(this))},e.prototype.withAttr=function(t,e,n){var i;return i=arguments,4===i.length?this.then(function(t){return function(){return hx.animate(t.node).attr(i[0],i[1],i[2],i[3])}}(this)):this.then(function(i){return function(){return hx.animate(i.node).attr(t,e,n)}}(this))},e.prototype.cancel=function(){var t,e,n,i;if(!this.cancelled)for(this.emit("cancelled"),this.cancelled=!0,i=this.cancelers,e=0,n=i.length;n>e;e++)t=i[e],hx.isFunction(t.cancel)&&t.cancel();return this},r=function(){var t,e,n,i,r,o,s,a;if(this.actions.length>0){for(e=this.actions.length,r=function(t){return function(){return e--,0===e?t.emit("end"):void 0}}(this),o=this.actions,a=[],n=0,i=o.length;i>n;n++)t=o[n],s=t(r),void 0!==s&&s.cancel&&this.cancelers.push(s),s instanceof hx.EventEmitter?a.push(s.on("end",r)):0===t.length?a.push(r()):a.push(void 0);return a}return this.emit("end")},e.prototype.go=function(t){var e;return t===!0&&this.cancelOngoing(),this.start(),this.node&&(e=hx.select.getHexagonElementDataObject(this.node,!0),null==e.morphs&&(e.morphs=[]),e.morphs=e.morphs.filter(function(t){return!t.cancelled&&!t.finished}),e.morphs.push(this)),this},e.prototype.cancelOngoing=function(){var t,e,n,i,r;if(this.node&&(i=hx.select.getHexagonElementDataObject(this.node,!1),i&&i.morphs)){for(r=i.morphs,t=0,e=r.length;e>t;t++)n=r[t],n.finished||n.cancelled||n.cancel();i.morphs=[]}return this},e}(hx.EventEmitter),hx.morph=function(t){return new e(t)},hx.Selection.prototype.morph=function(){return new e(this.nodes[0])},n=new hx.Map,hx.morph.register=function(t,e){return n.set(t,e)}}(),function(){hx.select.addEventAugmenter({name:"pointerdown",setup:function(t,e){return t.addEventListener("mousedown",function(t){return e.emit("pointerdown",{x:t.clientX,y:t.clientY,event:t})}),hx.supports("touch")?t.addEventListener("touchstart",function(t){return e.emit("pointerdown",{x:t.targetTouches[0].clientX,y:t.targetTouches[0].clientY,event:t})}):void 0}}),hx.select.addEventAugmenter({name:"pointermove",setup:function(t,e){return t.addEventListener("mousemove",function(t){return e.emit("pointermove",{x:t.clientX,y:t.clientY,event:t})}),hx.supports("touch")?t.addEventListener("touchmove",function(t){return e.emit("pointermove",{x:t.targetTouches[0].clientY,y:t.targetTouches[0].clientY,event:t})}):void 0}}),hx.select.addEventAugmenter({name:"pointerup",setup:function(t,e){return t.addEventListener("mouseup",function(t){return e.emit("pointerup",{x:t.clientX,y:t.clientY,event:t})}),hx.supports("touch")?(t.addEventListener("touchend",function(t){return e.emit("pointerup",{event:t})}),t.addEventListener("touchcancel",function(t){return e.emit("pointerup",{event:t})})):void 0}}),hx.select.addEventAugmenter({name:"pointerleave",setup:function(t,e){return t.addEventListener("mouseleave",function(t){return e.emit("pointerleave",{x:t.clientX,y:t.clientY,event:t})}),hx.supports("touch")?t.addEventListener("touchleave",function(t){return e.emit("pointerleave",{event:t})}):void 0}}),hx.select.addEventAugmenter({name:"pointerenter",setup:function(t,e){return t.addEventListener("mouseenter",function(t){return e.emit("pointerenter",{x:t.clientX,y:t.clientY,event:t})}),hx.supports("touch")?t.addEventListener("touchenter",function(t){return e.emit("pointerenter",{event:t})}):void 0}})}(),function(){var t,e,n,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;hx.morph.register("fadeout",function(t,e){return null==e&&(e=100),hx.animate(t).style("opacity",0,e)}),hx.morph.register("fadein",function(t,e){return null==e&&(e=100),hx.animate(t).style("opacity",1,e)}),i=function(t,e){var n,i,r,o,s,a,l;if("none"!==t.style("display")){for(a=[],n=0,r=e.length;r>n;n++)s=e[n],a.push({name:s,value:t.style(s)});return a}for(l=[],i=0,o=e.length;o>i;i++)s=e[i],l.push({name:s,value:"0px"});return l},n=function(t,e){var n,i,r,o;for(o=[],n=0,i=e.length;i>n;n++)r=e[n],o.push({name:r,value:t.style(r,"").style(r)});return o},r=function(t,e){var n,i,r;for(n=0,r=e.length;r>n;n++)i=e[n],t.style(i.name,i.value)},e=function(t,e,n){var i,r,o,s;for(i=t.animate(),r=0,s=e.length;s>r;r++)o=e[r],i.style(o.name,o.value,n);return i},hx.morph.register("expand",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["height","padding-top","padding-bottom","margin-top","margin-bottom","width","padding-left","padding-right","margin-left","margin-right"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.style("overflow","hidden"),e(l,s,o).on("end",function(t){return n(l,a)})}),hx.morph.register("expandv",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["height","padding-top","padding-bottom","margin-top","margin-bottom"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.style("overflow","hidden"),e(l,s,o).on("end",function(t){return n(l,a),l.style("overflow","")})}),hx.morph.register("expandh",function(t,o){var s,a,l,h;return null==o&&(o=100),a=["width","padding-left","padding-right","margin-left","margin-right"],l=hx.select(t),h=i(l,a),l.style("display",""),s=n(l,a),r(l,h),l.style("overflow","hidden"),e(l,s,o).on("end",function(t){return n(l,a),l.style("overflow","")})}),hx.morph.register("collapse",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).style("overflow","hidden"),hx.animate(t).style("height","0px",e).style("padding-top","0px",e).style("padding-bottom","0px",e).style("margin-top","0px",e).style("margin-bottom","0px",e).style("width","0px",e).style("padding-left","0px",e).style("padding-right","0px",e).style("margin-left","0px",e).style("margin-right","0px",e).on("end",function(t){return n.style("display","none").style("height","").style("padding-top","").style("padding-bottom","").style("margin-top","").style("margin-bottom","").style("width","").style("padding-left","").style("padding-right","").style("margin-left","").style("margin-right","").style("overflow","")})}),hx.morph.register("collapsev",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).style("overflow","hidden"),hx.animate(t).style("height","0px",e).style("padding-top","0px",e).style("padding-bottom","0px",e).style("margin-top","0px",e).style("margin-bottom","0px",e).on("end",function(t){return n.style("display","none").style("height","").style("padding-top","").style("padding-bottom","").style("margin-top","").style("margin-bottom","").style("overflow","")})}),hx.morph.register("collapseh",function(t,e){var n;return null==e&&(e=100),n=hx.select(t).style("overflow","hidden"),hx.animate(t).style("width","0px",e).style("padding-left","0px",e).style("padding-right","0px",e).style("margin-left","0px",e).style("margin-right","0px",e).on("end",function(t){return n.style("display","none").style("width","").style("padding-left","").style("padding-right","").style("margin-left","").style("margin-right","").style("overflow","")})}),hx.morph.register("rotate-90",function(t,e){return null==e&&(e=100),hx.animate(t).style("-webkit-transform","matrix(1, 0, 0, 1, 0, 0)","matrix(0, 1, -1, 0, 0, 0)",e).style("transform","matrix(1, 0, 0, 1, 0, 0)","matrix(0, 1, -1, 0, 0, 0)",e).on("end",function(){return hx.select(t).style("transform","").style("-webkit-transform","")}).on("cancel",function(){return hx.select(t).style("transform","").style("-webkit-transform","")})}),hx.morph.register("rotate-0",function(t,e){return null==e&&(e=100),hx.animate(t).style("-webkit-transform","matrix(0, 1, -1, 0, 0, 0)","matrix(1, 0, 0, 1, 0, 0)",e).style("transform","matrix(0, 1, -1, 0, 0, 0)","matrix(1, 0, 0, 1, 0, 0)",e).on("end",function(){return hx.select(t).style("transform","").style("-webkit-transform","")}).on("cancel",function(){return hx.select(t).style("transform","").style("-webkit-transform","")})}),t=function(t){function e(t){this.cancel=o(this.cancel,this),e.__super__.constructor.apply(this,arguments),this.timeout=setTimeout(function(t){return function(){return t.emit("end")}}(this),t)}return s(e,t),e.prototype.cancel=function(){return clearTimeout(this.timeout)},e}(hx.EventEmitter),hx.morph.register("delay",function(e,n){return null==n&&(n=100),new t(n)})}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(){var t;n.__super__.constructor.apply(this,arguments),this.exceptions=new hx.List,t=void 0,this.downAction=function(e){return function(n){var i,r,o,s,a;for(n=n.event,t=n.target,i=!0,a=e.exceptions.entries(),o=0,s=a.length;s>o;o++)r=a[o],r.contains(n.target)&&(i=!1);return i?e.emit("click"):void 0}}(this),this.upAction=function(e){return function(n){var i,r,o,s,a;for(n=n.event,i=!0,t&&!t.contains(n.target)&&(i=!1),t=void 0,a=e.exceptions.entries(),o=0,s=a.length;s>o;o++)r=a[o],r.contains(n.target)&&(i=!1);return i?e.emit("click"):void 0}}(this),hx.select(document).on("pointerdown",this.downAction,!0),hx.select(document).on("pointerup",this.upAction,!0)}return e(n,t),n.prototype.addException=function(t){return this.exceptions.add(t)},n.prototype.removeAllExceptions=function(){return this.exceptions.clear()},n.prototype.cleanUp=function(){return hx.select(document).off("pointerdown",this.downAction),hx.select(document).off("pointerup",this.upAction)},n}(hx.EventEmitter),hx.ClickDetector=t}(),function(){var t;t=function(t){var e;return e=[],hx.selectAll(t).map(function(t){return t=hx.select(t),t.classed("hx-btn-toggle")?(e.push(t.node()),t.on("click",function(t){var e;return t=hx.select(t.target),e=t.classed("hx-btn-toggle-off"),t.attr("data",e).classed("hx-btn-toggle-off",!e)},!0).attr("data",t.classed("hx-btn-toggle-off")?!1:!0)):void 0}),e},hx.initialiseToggleButtons=t,t(".hx-btn-toggle")}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=function(t){var e;return e=hx.select(t),e.size()>0&&"fixed"===e.style("position")?!0:void 0},i=function(t){var e,n;return e=hx.select(t),n=Number(e.style("z-index")),!isNaN(n)&&n>0?n:void 0},n=function(t,e){var n,i;for(n=t;null!==n&&9!==n.nodeType;){if(i=e(n),null!=i)return i;n=n.parentNode}return!1},t=function(t){function o(t,e,n,i,r,s,a){var l;switch(this.selector=t,this.dropdownContent=e,null==n&&(n="click"),null==i&&(i="lblt"),this.spacing=r,this.matchWidth=null!=s?s:!0,this.ddClass=null!=a?a:"",o.__super__.constructor.apply(this,arguments),this.selection=hx.select(this.selector),this.visible=!1,this.dropdown=void 0,this.clickDetector=new hx.ClickDetector,this.useScroll=!1,l=function(){switch(i){case"up":return"ltlb";case"down":return"lblt";case"left":return"ltrt";case"right":return"rtlt";default:return i}}(),this.alignments=l.split(""),n){case"click":this.selection.on("click",function(t){return function(){return t.toggle()}}(this));break;case"hover":this.selection.on("mouseover",function(t){return function(){return t.show()}}(this)),this.selection.on("mouseout",function(t){return function(){return t.hide()}}(this)),this.selection.on("click",function(t){return function(){return t.toggle()}}(this))}}return r(o,t),o.prototype.toggle=function(){return this.isOpen()?this.hide():this.show()},o.prototype.show=function(){var t,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k;if(y=null!=this.spacing?this.spacing:Number(hx.theme.dropdown.spacing),!this.dropdown){switch(!1){case!hx.isString(this.dropdownContent):this.dropdown=hx.select("body").append("div").attr("class","hx-dropdown"),this.dropdown.html(this.dropdownContent),this.clickDetector.removeAllExceptions(),this.clickDetector.addException(this.dropdown.node()),this.clickDetector.addException(this.selection.node());break;case!hx.isFunction(this.dropdownContent):this.dropdown=hx.select("body").append("div").attr("class","hx-dropdown"),d=this.dropdown.node(),this.dropdownContent(d),this.clickDetector.removeAllExceptions(),this.clickDetector.addException(d),this.clickDetector.addException(this.selection.node());break;default:console.error("hexagon: dropdownContent is not a valid type "+this.selector)}this.ddClass.length>0&&this.dropdown.classed(this.ddClass,!0)}if(this.clickDetector.on("click",function(t){return function(){return t.hide()}}(this)),!this.visible&&this.dropdown){if(x=n(this.selection.node(),i),x>0&&this.dropdown.style("z-index",x+1),g=this.selection.box(),this.dropdown.style("display","block"),this.matchWidth&&this.dropdown.style("min-width",g.width+"px"),a=this.dropdown.box(),s=this.dropdown.style("max-height").replace("px",""),h=g.left,w=g.top,"r"===this.alignments[0]&&(h=g.right),"b"===this.alignments[1]&&(w=g.bottom),"r"===this.alignments[2]&&(h-=a.width),"b"===this.alignments[3]&&(w-=a.height),this.alignments[0]!==this.alignments[2])switch(this.alignments[2]){case"l":h+=y;break;case"r":h-=y}if(this.alignments[1]!==this.alignments[3])switch(this.alignments[3]){case"t":w+=y;break;case"b":c=!0,w-=y}return v=window.scrollbars?16:0,0>h&&(h=0),(u=h+a.width-window.innerWidth+v)>0&&(h-=u),0>w&&(w=0),o=isNaN(s)?a.height:Math.min(s,a.height),(b=w+o-window.innerHeight)>0&&(p=!0,w-=b),r=function(t,e,n,i){var r,o,s;return r=n>t&&e>i,o=e>=i&&i>t&&t>=n,s=n>=t&&e>n&&i>=e,r||o?2:s?1:0},l=r(h,h+a.width,g.left,g.left+g.width),m=r(w,w+a.height,g.top,g.top+g.height),l>0&&m>0&&(m>1&&!p?(c=!1,w=g.top+g.height+y):(c=!0,w=g.top-a.height-y,0>w&&(c=!1,w=g.top+g.height+y))),f=n(this.selection.node(),e),f?this.dropdown.style("position","fixed"):(w+=window.scrollY,h+=window.scrollX),k="top",c&&(k="bottom",t=document.body.scrollHeight-document.body.clientHeight,w=document.body.scrollHeight-w-t-a.height),this.dropdown.style("top","auto").style(k,w+"px").style("left",h+"px").style("width",a.width+"px"),this.dropdown.style("height","0px").style(k,w+8+"px").style("opacity",0).morph()["with"]("fadein",150).and("expandv",150).and(function(t){return function(){return t.dropdown.animate().style(k,w+"px",150)}}(this)).then(function(t){return function(){return t.useScroll&&null!=t.dropdown?t.dropdown.style("overflow-y","auto"):void 0}}(this)).go(),this.visible=!0,this.emit("show"),this.emit("change",!0)}},o.prototype.hide=function(){return this.visible?(this.visible=!1,this.emit("hide"),this.emit("change",!1),this.dropdown.remove(),this.dropdown=void 0,this.clickDetector.off("click")):void 0},o.prototype.isOpen=function(){return this.visible},o.prototype.cleanUp=function(){return this.clickDetector.cleanUp()},o}(hx.EventEmitter),hx.Dropdown=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e,i,r){var o,s,a;this.lazyContent=e,null==i&&(i=!1),null==r&&(r=!0),n.__super__.constructor.apply(this,arguments),this.lazyContentCreated=!1,this.selection=hx.select(t).classed("hx-openable",!0).classed("hx-collapsible",!0),s=this.selection.select(".hx-collapsible-heading"),(a=s.select(".hx-collapsible-toggle")).empty()?s.on("click",function(t){return function(){return t.toggle()}}(this),!0):(s.classed("hx-collapsible-heading-no-hover",!0),a.on("click",function(t){return function(){return t.toggle()}}(this),!0)),o=this.selection.select(".hx-collapsible-content").style("height",0).style("opacity",0),r&&(a.empty()?(s.select("i").remove(),s.prepend("i")["class"]("fa fa-chevron-right hx-collapsible-icon")):(a.select("i").remove(),a.prepend("i")["class"]("fa fa-chevron-right hx-collapsible-icon"))),hx.select.getHexagonElementDataObject(this.selection.node()).widget=this,this.visible=void 0,i?this.show(!1):this.hide(!1)}return e(n,t),n.prototype.toggle=function(t){return null==t&&(t=!0),this.isOpen()?this.hide(t):this.show(t)},n.prototype.show=function(t){var e;return null==t&&(t=!0),this.lazyContentCreated||(this.lazyContentCreated=!0,this.lazyContent&&this.lazyContent(this.selection.select(".hx-collapsible-content").node())),this.visible!==!0&&(this.selection.classed("hx-collapsible-expanded",!0).classed("hx-opened",!0),e=this.selection.select(".hx-collapsible-content"),t?(e.morph()["with"]("expandv",100).and("fadein",100).go(!0),this.selection.select(".hx-collapsible-heading").select(".hx-collapsible-icon").morph()["with"]("rotate-90",200).go(!0)):e.style("display","").style("height","").style("opacity",""),this.visible=!0,this.emit("show"),this.emit("change",!0)),this},n.prototype.hide=function(t){return null==t&&(t=!0),this.visible!==!1&&(this.selection.classed("hx-collapsible-expanded",!1).classed("hx-opened",!1),t?(this.selection.select(".hx-collapsible-content").morph()["with"]("fadeout",100).and("collapsev",100).go(!0),this.selection.select(".hx-collapsible-heading").select(".hx-collapsible-icon").morph()["with"]("rotate-0",200).go(!0)):this.selection.select(".hx-collapsible-content").style("display","none"),this.visible=!1,this.emit("hide"),this.emit("change",!1)),this},n.prototype.isOpen=function(){return this.visible},n}(hx.EventEmitter),hx.Collapsible=t,hx.initialiseCollapsibles=function(e,n){return hx.selectAll(e).map(function(e){return new t(e,n)})}}(),function(){var t,e,n,i;n=null!=("undefined"!=typeof Intl&&null!==Intl?Intl.Collator:void 0),t=n?new Intl.Collator(void 0,{numeric:!0}).compare:function(t,e){return e>t?-1:t>e?1:0},e=function(e,n){return isNaN(Number(e))||isNaN(Number(n))?t(e,n):e-n},i=function(t,e){var i;return null==e&&(e={numeric:!0}),i=n?new Intl.Collator(t,e).compare:function(n,i){return n.localeCompare(i,t,e)},function(t,e){return isNaN(Number(t))||isNaN(Number(e))?i(t,e):t-e}},hx.sort={compare:e,localeCompare:i}}(),function(){var t;t=function(){function t(t,e,n){var i;this.rootSelection=t,this.selector=e,this.defaultType=n,i=this,this["new"]=function(t){return"."===i.selector.charAt(0)?this.append(i.defaultType)["class"](i.selector.substring(1)).node():this.append(i.defaultType).node()},this.each=function(t,e){},this.old=function(t,e){return this.remove()}}return t.prototype.enter=function(t){return this["new"]=t,this},t.prototype.exit=function(t){return this.old=t,this},t.prototype.update=function(t){return this.each=t,this},t.prototype.apply=function(t,e){var n,i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M,C,D,T,P,A,L;if(0!==this.rootSelection.size()){if(t instanceof Array||(t=[t]),o=[],L=[],s=[],S=this.rootSelection.selectAll(this.selector).nodes,e){for(b=new hx.Map,i=new hx.Map,u=0,c=t.length;c>u;u++)r=t[u],h=e(r),i.set(h,r);for(v=0,p=S.length;p>v;v++)w=S[v],k=hx.select.getHexagonElementDataObject(w),k.datum?(n=k.datum,h=e(n),b.has(h)?s.push({element:w,datum:n}):(b.set(h,w),i.has(h)?(r=i.get(h),i["delete"](h),L.push({element:w,datum:r})):s.push({element:w,datum:n}))):s.push({element:w,datum:void 0});o=function(){var t,e,r,o;for(r=i.entries(),o=[],e=0,t=r.length;t>e;e++)n=r[e],o.push({datum:n[1]});return o}()}else{for(a=0,y=0,d=S.length;d>y;y++)w=S[y],a<t.length?(k=hx.select.getHexagonElementDataObject(w),k.datum=t[a],L.push({element:w,datum:t[a]})):(k=hx.select.getHexagonElementDataObject(w,!1),s.push({element:w,datum:k.datum})),a++;if(a<t.length)for(l=_=T=a,P=t.length-1;P>=T?P>=_:_>=P;l=P>=T?++_:--_)o.push({datum:t[l]})}for(m=function(){var t,e,i;for(i=[],a=e=0,t=o.length;t>e;a=++e)n=o[a],i.push({element:this["new"].call(this.rootSelection,n.datum,a),datum:n.datum});return i}.call(this),M=0,f=m.length;f>M;M++)n=m[M],hx.select.getHexagonElementDataObject(n.element).datum=n.datum;for(a=C=0,x=s.length;x>C;a=++C)n=s[a],this.old.call(hx.select(n.element),n.datum,n.element,a);for(A=L.concat(m),a=D=0,g=A.length;g>D;a=++D)n=A[a],this.each.call(hx.select(n.element),n.datum,n.element,a);return this}},t}(),hx.Selection.prototype.view=function(e,n){return null==n&&(n="div"),0===this.size()&&hx.consoleWarning(".view() called on an empty selection"),new t(this,e,n)}}(),function(){var t,e,n,i,r,o,s,a,l;s=["y","z","a","f","p","n","µ","","","K","M","G","T","P","E","Z","Y"],l=function(t,e){var n,i,r;return i=t.toString(),i.length<e?(r=e-i.length,function(){var t,e,i;for(i=[],n=t=0,e=r-1;e>=0?e>=t:t>=e;n=e>=0?++t:--t)i.push("0");return i}().join("")+i):i},r=function(t){return t?Math.floor(Math.log(Math.abs(t))/Math.LN10):1},o=function(t,e,n){return n>=0?Math.round(t/Math.pow(e,n))*Math.pow(e,n):Math.round(t*Math.pow(e,-n))/Math.pow(e,-n)},n=function(t,e){var n;return isNaN(t)?"NaN":(n=r(t)-e+1,o(t,10,n).toString())},i=function(t,e){var i,o,a,l;return isNaN(t)?"NaN":(i=Math.min(r(t),26),a=s[Math.min(Math.max(0,Math.floor(8+i/3)),16)],l=Math.abs(t)<1&&i%3&&!(i>-3&&0>i)?1e3:1,-3===i&&(l=1e3,a=s[6]),o=Math.pow(10,i-i%3)/l,n(t/o,e)+a)},t=function(t,e){var i;return isNaN(t)?"NaN":(i=r(t),n(t/Math.pow(10,i),e)+"e"+i)},e=function(t,e){return isNaN(t)?"NaN":t.toFixed(e)},a=function(t,e,n){return n?function(n){return t(n,e)}:function(n){return hx.isString(n)?n:t(n,e)}},hx.format={round:function(t,e){return a(n,t,e)},si:function(t,e){return a(i,t,e)},exp:function(e,n){return a(t,e,n)},fixed:function(t,n){return a(e,t,n)},zeroPad:function(t,e){return a(l,t,e)}}}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var i,r,o;this.selector=t,null==e&&(e=""),n.__super__.constructor.apply(this,arguments),this.min=void 0,this.max=void 0,r=hx.select(this.selector),o=r["class"]("hx-number-picker"),i=o.append("button").attr("type","button")["class"]("hx-btn "+e),i.append("i")["class"]("fa fa-chevron-up"),i.on("click",function(t){return function(){return t.increment()}}(this)),this.selectInput=o.append("input"),this.selectInput.attr("type","number"),this.selectInput.on("blur",function(t){return function(){var e,n;return null==t.selectInput.attr("readonly")&&(n=e=t.selectInput.value(),void 0!==t.max&&n>t.max&&(n=t.max),void 0!==t.min&&n<t.min&&(n=t.min),n!==e&&t.selectInput.value(n),t.selectInput.attr("data-value",n)),t.emit("input-change",{value:t.value()}),t.emit("change",{value:t.value()})}}(this)),i=o.append("button").attr("type","button")["class"]("hx-btn "+e),i.append("i")["class"]("fa fa-chevron-down"),i.on("click",function(t){return function(){return t.decrement()}}(this))}var i;return e(n,t),i=function(t){var e,n;return n=e=t.value(),void 0!==t.max&&n>t.max&&(n=t.max),void 0!==t.min&&n<t.min&&(n=t.min),n!==e?t.value(n):void 0},n.prototype.getValue=function(){return hx.deprecatedWarning(this.selector+": NumberPicker.getValue()","Use NumberPicker.value() instead."),this.value.apply(this,arguments)},n.prototype.setValue=function(t,e){return hx.deprecatedWarning(this.selector+": NumberPicker.setValue(value, screenValue)","Use NumberPicker.value(value, screenValue) instead."),this.value.apply(this,arguments)},n.prototype.value=function(t,e){return arguments.length>0?(void 0!==this.max&&t>this.max&&(t=this.max),void 0!==this.min&&t<this.min&&(t=this.min),e&&isNaN(e)?this.selectInput.attr("type","text").attr("readonly",""):this.selectInput.attr("type","number").node().removeAttribute("readonly"),this.selectInput.value(e||t),this.selectInput.attr("data-value",t),this.emit("change",{value:t}),this):Number(this.selectInput.attr("data-value"))},n.prototype.setMin=function(t){return this.min=t,this.selectInput.attr("min",t),i(this),this},n.prototype.setMax=function(t){return this.max=t,this.selectInput.attr("max",t),i(this),this},n.prototype.increment=function(){return this.value(this.value()+1),this.emit("increment"),this},n.prototype.decrement=function(){return this.value(this.value()-1),this.emit("decrement"),this},n}(hx.EventEmitter),hx.NumberPicker=t}(),function(){var t,e,n,i,r,o,s,a,l,h,u=function(t,e){function n(){this.constructor=t}for(var i in e)c.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c={}.hasOwnProperty;r=function(t,e){return function(n){var i;return i=hx.select(n).view(".hx-menu-item").update(function(t,e){return t.build(e)}).apply(t()),e?e.addException(n):void 0}},o=function(t){var e,n;return e=[],n=function(t,i){return t.forEach(function(t,r){return t.parentIndex=i,e.push(t),t.items?n(t.items,r):void 0})},n(t.items),e},l=function(t,e,n,i){var r,s,a,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_;if(null!=(w=t.dropdown.dropdown)&&w.selectAll(".hx-menu-item").classed("hx-menu-active",!1),e>=0){for(r=o(t),g=r[e].node,a=null!=(b=r[e])?b.content:void 0,p=!(null!=a?a.disabled:void 0)&&!(null!=a?a.unselectable:void 0);!(null!==g.offsetParent&&p||i);){if(n?e-=1:e+=1,a=null!=(k=r[e])?k.content:void 0,p=!(null!=a?a.disabled:void 0)&&!(null!=a?a.unselectable:void 0),null==r[e]){c=!0;break}g=r[e].node}if(c&&!n)return void l(t,e-1,!0);t.cursorPos=e,null==(h=null!=(S=t.dropdown.dropdown)?S.node():void 0)||i||(x=hx.select(g).classed("hx-menu-active",!0),f=x.node(),v=f.offsetTop,s=x.select(".hx-menu-collapsible"),d=s.size()>0?s.node().clientHeight:f.clientHeight,y=hx.select(f.parentNode),m=y.classed("hx-collapsible-content")?y.node().offsetTop:0,_=v+d+m,u=_>h.clientHeight?_-h.clientHeight:0,h.scrollTop=u)}return t.has("select")?t.emit("select",{content:null!=r?r[t.cursorPos]:void 0,index:t.cursorPos,click:i,type:i?"click":""}):void 0},a=function(t){var e;return e=t.cursorPos,e>0?e-=1:0===e&&(e=-1),t.cursorPos=e,l(t,e,!0)},s=function(t){var e,n;return n=t.cursorPos,e=o(t),n<e.length-1&&(n+=1),t.cursorPos=n,l(t,n)},h=function(t,e){switch(e){case!0:return t.show();case!1:return t.hide();default:return t.toggle()}},i=function(t,e,n){var i,r,s,l;return null==n&&(n="enter"),r="tab"===n?Math.max(t.cursorPos,0):t.cursorPos,i=o(t),l=i[r],null==e||e||null==(null!=l&&null!=(s=l.parent)?s.collapsible:void 0)?null!=(null!=l?l.collapsible:void 0)?h(l.collapsible,e):null!=e&&e||null==e?t.emit("select",{type:n,content:l}):void 0:(h(l.parent.collapsible,e),setTimeout(function(){return a(t)},200))},n=function(t,e){switch(t.which){case 9:i(e,void 0,"tab");break;case 13:t.preventDefault(),i(e,void 0);break;case 37:i(e,!1);break;case 38:t.preventDefault(),a(e);break;case 39:i(e,!0);break;case 40:t.preventDefault(),s(e)}return e.emit("input",t)},e=function(){function t(t,e,n){this.content=t,this.parent=e,this.menu=n,this.items=[],this.dropdown=void 0}return t.prototype.build=function(t){var e,n,i,o;return this.node=t,t=hx.select(t),this.items.length>0?(t.view(".hx-collapsible").apply(this),e=t.select(".hx-collapsible"),e.view(".hx-collapsible-heading").apply(this),e.view(".hx-collapsible-content").update(function(){return this.style("display","none")}).apply(this),i=e.select(".hx-collapsible-heading").classed("hx-menu-collapsible",!0).node(),n=t.select(".hx-collapsible-content").node(),this.menu.renderer(i,this.content),this.collapsible=new hx.Collapsible(e.node()),r(function(t){return function(){return t.items}}(this))(n)):(o=!this.content.unselectable&&!this.content.disabled,t.classed("hx-menu-link",o).classed("hx-menu-item-disabled",this.content.disabled).classed("hx-menu-unselectable",this.content.unselectable),this.menu.renderer(t.node(),this.content))},t.prototype.add=function(e){var n,i,r,o;if(hx.isArray(e))for(r=0,o=e.length;o>r;r++)n=e[r],this.add(n);else i=new t(e,this,this.menu),this.items.push(i);return this},t.prototype.addItem=function(t){return hx.deprecatedWarning(this.menu.selector+": MenuItem.addItem(item)","Use MenuItem.add(item) instead"),this.add.apply(this,arguments)},t.prototype.addItems=function(t){return hx.deprecatedWarning(this.menu.selector+": MenuItem.addItems(items)","Use MenuItem.add(items) instead"),this.add.apply(this,arguments)},t.prototype.clearItems=function(){return this.items=[]},t.prototype.addException=function(t){return this.dropdown.clickDetector.addException(t),this.parent.addException(t)},t}(),t=function(t){function i(t,e,a,h){var u,c,p,d,f,x,g;if(this.selector=t,null==a&&(a="click"),i.__super__.constructor.apply(this,arguments),this.items=[],f=hx.select(this.selector),!h)for(h="",p=0,d=s.length;d>p;p++)u=s[p],f.classed(u)&&(this.colorClass=u);null!=this.colorClass&&(h=h+" "+this.colorClass),h="hx-menu "+h,this.dropdown=new hx.Dropdown(this.selector,"",a,e,void 0,!0,h),this.dropdown.dropdownContent=r(function(t){return function(){return t.items}}(this)),x=this,"input"===f.node().nodeName.toLowerCase()&&(c=!0,g=f),this.dropdown.on("show",function(){return x.cursorPos=-1,c||(g=x.dropdown.dropdown,g.attr("tabindex","-1"),g.node().focus()),g.on("keydown",function(t){return x.dropdown.isOpen()&&n(t,x),x.emit("keydown",t)}),x.dropdown.dropdown.on("click",function(t){var e,n,i,r,s;if(s=hx.select(t.target).closest(".hx-menu-item").node(),null==s&&(s=t.target),i=-1,r=hx.select(s),r.classed("hx-menu-link")){for(e=o(x),n=0;0>i;){if(e[n].node===s){i=n;break}n+=1}l(x,i,void 0,!0)}return g.node().focus()})}),this.dropdown.pipe(this)}var s;return u(i,t),s=["hx-positive","hx-warning","hx-negative","hx-info","hx-compliment","hx-contrast"],i.prototype.renderer=function(t,e){return hx.select(t).html(e).on("click",function(t){return function(){return t.emit("select",e)}}(this))},i.prototype.add=function(t){var n,i,r,o,s;if(hx.isArray(t)){for(s=[],r=0,o=t.length;o>r;r++)n=t[r],s.push(this.add(n));return s}return i=new e(t,this,this),this.items.push(i),i},i.prototype.addItem=function(t){return hx.deprecatedWarning(this.selector+": Menu.addItem(item)","Use Menu.add(item) instead"),this.add.apply(this,arguments)},i.prototype.addItems=function(t){return hx.deprecatedWarning(this.selector+": Menu.addItems(items)","Use Menu.add(items) instead"),this.add.apply(this,arguments)},i.prototype.addException=function(t){return this.dropdown.clickDetector.addException(t)},i.prototype.clearItems=function(){return this.items=[]},i.prototype.hide=function(){return this.dropdown.hide()},i.prototype.render=function(t){var e;return e=function(t,n){var i,r,o,s,a;for(a=[],o=0,s=t.length;s>o;o++)i=t[o],r=n.add(i),i.children?a.push(e(i.children,r)):a.push(void 0);return a},this.clearItems(),e(t,this)},i}(hx.EventEmitter),hx.Menu=t}(),function(){var t,e,n,i;n={caseSensitive:!1,searchValues:void 0,sort:!0},e=function(t){return t?function(t){return t}:function(t){return t.toLowerCase()}},i=function(t,e,n){var i,r,o,s,a,l;if(l=0,r=!1,null!=n.searchValues)for(a=n.searchValues(t),o=0,s=a.length;s>o;o++)i=a[o],l+=n.lookup(n.caseModifier(i.toString())),l>-1&&(r=!0);else l+=n.lookup(n.caseModifier(t.toString()));return e===!0?l:r||l>-1?!0:!1},t=function(t){return function(r,o,s){return null==s&&(s={}),s=hx.merge({},n,s),s.caseModifier=e(s.caseSensitive),"string"==typeof o&&(o=s.caseModifier(o)),s.lookup=t(o),r=r.filter(function(t){return i(t,!1,s)}),s.sort===!0&&(r=r.sort(function(t,e){var n,r,o,a,l,h,u,c;if(r=i(t,!0,s),a=i(e,!0,s),r>a)return 1;if(a>r)return-1;if(null!=s.searchValues){for(u=0,n=s.searchValues(t),o=s.searchValues(e),l=h=0,c=n.length;c>h&&(u=hx.sort.compare(n[l],o[l]),0===u);l=h+=1);return u}return hx.sort.compare(t,e)})),r}},hx.filter={exact:t(function(t){return function(e){return e===t?t.length:-1}}),startsWith:t(function(t){return function(e){return hx.startsWith(e,t)?t.length:-1}}),contains:t(function(t){return function(e){var n;return n=e.indexOf(t),n>-1?n+t.length:-1}}),excludes:t(function(t){return function(e){var n;return n=e.indexOf(t),-1===n?t.length:-1}}),greater:t(function(t){return function(e){var n;return n=hx.sort.compare(e,t),-1!==n?n:-1}}),less:t(function(t){return function(e){var n;return n=hx.sort.compare(t,e),-1!==n?n:-1}}),
fuzzy:t(function(t){var e,n;return n="("+t.split("").join(").*?(")+").*?",e=new RegExp(n),function(t){var n;return n=t.match(e),null!=n?n.index+n[0].length:-1}}),regex:t(function(t){return function(e){var n;return n=e.match(t),null!=n?n.index+n[0].length:-1}})}}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=hx.format.zeroPad(2),n=function(){function t(){this.currentLocale=void 0}return t.prototype.dateOrder=function(){var t,e,n,i,r,o,s,a,l;for(t=new Date(2003,5,1),e=t.toLocaleDateString(),l=e.indexOf(t.getFullYear()),o=e.indexOf(t.getMonth()+1),n=e.indexOf(t.getDate()),a=[],i=r=0,s=e.length;s>=0?s>=r:r>=s;i=s>=0?++r:--r)switch(i){case l:a.push("YYYY");break;case o:a.push("MM");break;case n:a.push("DD")}return 0===a.length&&(a=["DD","MM","YYYY"]),a},t.prototype.localiseWeekStart=function(){return 0},t.prototype.localiseWeek=function(){return["Su","Mo","Tu","We","Th","Fr","Sa"]},t.prototype.localiseDay=function(t,e){return e?r(t):t},t.prototype.localiseMonth=function(t,e){return e?r(t+1):["January","February","March","April","May","June","July","August","September","October","November","December"][t]},t.prototype.localiseYear=function(t){return t},t.prototype.localiseDate=function(t,e){return e?t.getFullYear()+"-"+r(t.getMonth()+"-"+zeropad(t.getDate()+"-")):t.toLocaleDateString().split("/").map(function(t){return r(t)}).join("/")},t.prototype.locale=function(t){return void 0},t.prototype.stringToDate=function(t){var e,n,i,r,o,s,a,l,h,u,c,p,d,f,x;if(p=dateString.split("/"),e=!p.some(function(t){return""===t||"0"===t})){for(r="",c=localiser.dateOrder(),o=s=0,a=c.length;a>s;o=++s)switch(d=c[o],u=p[o],d){case"DD":i=u.length<3&&""!==u,n=p[o];break;case"MM":h=u.length<3&&""!==u,l=p[o];break;case"YYYY":x=u.length<5&&""!==u,f=p[o]}return i&&h&&x?new Date(f,l,n):new Date("Invalid Date")}return new Date("Invalid Date")},t}(),i=function(){function t(){this.currentLocale=moment.locale()}return t.prototype.dateOrder=function(){var t,e,n,i,r,o,s,a,l;for(t=moment({year:2003,month:11,day:22}).locale(this.currentLocale),e=t.format("L"),l=e.indexOf(t.format("YYYY")),o=e.indexOf(t.format("MM")),n=e.indexOf(t.format("DD")),a=[],i=r=0,s=e.length;s>=0?s>=r:r>=s;i=s>=0?++r:--r)switch(i){case l:a.push("YYYY");break;case o:a.push("MM");break;case n:a.push("DD")}return 0===a.length&&(a=["DD","MM","YYYY"]),a},t.prototype.localiseWeekStart=function(){return moment().weekday(0).toDate().getDay()},t.prototype.localiseWeek=function(){var t,e,n,i;for(t=moment().weekday(0),t.locale(this.currentLocale),e=[t.format("dd")],n=i=0;6>i;n=++i)e.push(t.add(1,"d").format("dd"));return e},t.prototype.localiseDay=function(t,e){return moment({day:t,month:0}).locale(this.currentLocale).format(e?"DD":"D")},t.prototype.localiseMonth=function(t,e){return moment({month:t}).locale(this.currentLocale).format(e?"MM":"MMMM")},t.prototype.localiseYear=function(t){return moment({year:t}).locale(this.currentLocale).format("YYYY")},t.prototype.localiseDate=function(t,e){return moment(t).locale(this.currentLocale).format(e?"":"L")},t.prototype.locale=function(t){return null!=t?this.currentLocale=t:this.currentLocale},t.prototype.stringToDate=function(t){var e,n,i,r,o,s,a,l,h,u,c,p;if(u=dateString.split("/"),e=!u.some(function(t){return""===t||"0"===t})){for(i="",h=this.getPickerOrder(),r=o=0,s=h.length;s>o;r=++o)switch(c=h[r],l=u[r],c){case"DD":n=l.length<3&&""!==l,i+="DD";break;case"MM":a=l.length<3&&""!==l,i+="MM";break;case"YYYY":p=l.length<5&&""!==l,i+="YYYY"}return n&&a&&p?moment(dateString,i,this.currentLocale).toDate():new Date("Invalid Date")}return new Date("Invalid Date")},t}(),e=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.selectedDate1=new Date,this.selectedDate1.setHours(0,0,0,0),this.selectedDate2=new Date,this.selectedDate2.setHours(0,0,0,0),this.updateVisibleMonth()}return o(e,t),e.prototype.showMonth=function(t,e,n){var i;i=new Date(e,t),i=null!=this.validEnd&&i>this.validEnd?new Date(this.validEnd):null!=this.validStart&&i<this.validStart?new Date(this.validStart):i,this.monthNum=i.getMonth(),this.yearNum=i.getFullYear(),n||this.emit("calendarChange")},e.prototype.updateVisibleMonth=function(){return this.yearNum=this.year(),this.monthNum=this.month()},e.prototype.showNextMonth=function(){return this.showMonth(this.monthNum+1,this.yearNum)},e.prototype.showPrevMonth=function(){return this.showMonth(this.monthNum-1,this.yearNum)},e.prototype.addDays=function(t,e){return this.day(this.day(e)+t)},e.prototype.addMonths=function(t,e){return this.month(this.month(e)+t)},e.prototype.addYears=function(t,e){return this.year(this.year(e)+t)},e.prototype.getWhichDate=function(t){var e;return e=null!=t&&t?this.selectedDate1<this.selectedDate2?this.selectedDate1:this.selectedDate2:null==t||t?this.selectedDate1:this.selectedDate2<this.selectedDate1?this.selectedDate1:this.selectedDate2},e.prototype.date=function(t,e){var n,i;return null==t&&(t=!0),arguments.length>0&&"boolean"!=typeof arguments[0]?(null!=e?(i=this.getWhichDate(!0),n=this.getWhichDate(!1),this.selectedDate1=i,this.selectedDate2=n,e?(this.selectedDate1=t,this.selectedDate2=t):this.selectedDate2=t):(this.selectedDate1=t,this.selectedDate2=t),this.updateVisibleMonth(),this.checkValidDates(!0),this.emit("change"),void 0):this.getWhichDate(t)},e.prototype.day=function(t){return null==t&&(t=!0),arguments.length>0&&"boolean"!=typeof t?(this.selectedDate1.setDate(t),this.selectedDate2.setDate(t),this.checkValidDates(!0),this.updateVisibleMonth(),this.emit("change"),void 0):this.getWhichDate(t).getDate()},e.prototype.month=function(t){return null==t&&(t=!0),arguments.length>0&&"boolean"!=typeof t?(this.selectedDate1.setMonth(t),this.selectedDate2.setMonth(t),this.checkValidDates(!0),this.updateVisibleMonth(),this.emit("change"),void 0):this.getWhichDate(t).getMonth()},e.prototype.year=function(t){return null==t&&(t=!0),arguments.length>0&&"boolean"!=typeof t?(this.selectedDate1.setFullYear(t),this.selectedDate2.setFullYear(t),this.checkValidDates(!0),this.updateVisibleMonth(),this.emit("change"),void 0):this.getWhichDate(t).getFullYear()},e.prototype.getCalendarDays=function(t){var e,n,i,r,o,s,a,l;for(l=new Date(this.yearNum,this.monthNum).getDay()-t,0>l&&(l+=7),i=new Date(this.yearNum,this.monthNum+1,0).getDate(),o=[],o.push(l>0?function(){var t,n,i;for(i=[],e=t=0,n=l-1;n>=0?n>=t:t>=n;e=n>=0?++t:--t)i.push(void 0);return i}().concat(function(){s=[];for(var t=1,e=7-l;e>=1?e>=t:t>=e;e>=1?t++:t--)s.push(t);return s}.apply(this)):[1,2,3,4,5,6,7]),r=1-l;i>r;)r+=7,n=Math.min(r+6,i),n>=r&&o.push(function(){a=[];for(var t=r;n>=r?n>=t:t>=n;n>=r?t++:t--)a.push(t);return a}.apply(this));return o},e.prototype.getCount=function(){var t,e,n;return n=864e5,t=this.getWhichDate(!0)-this.getWhichDate(!1),e=Math.round(Math.abs(t/n)),e+1},e.prototype.isSelectedDay=function(t,e,n,i){return this.year(i)===t&&this.month(i)===e&&this.day(i)===n},e.prototype.isBetweenDays=function(t,e,n){var i,r,o;return o=new Date(t,e,n),r=this.getWhichDate(!0),i=this.getWhichDate(!1),i>o&&o>r},e.prototype.isValidDay=function(t,e,n){var i,r,o;return i=new Date(t,e,n),r=null!=this.validEnd?i<=this.validEnd:!0,o=null!=this.validStart?i>=this.validStart:!0,r&&o},e.prototype.isToday=function(t,e,n){var i,r;return r=new Date,i=new Date(t,e,n),i.setHours(0,0,0,0)===r.setHours(0,0,0,0)},e.prototype.checkValidDates=function(t){var e,n;e=!1,null!=this.validStart&&(this.selectedDate1<this.validStart&&(this.selectedDate1=new Date(this.validStart),e=!0),this.selectedDate2<this.validStart&&(this.selectedDate2=new Date(this.validStart),e=!0)),null!=this.validEnd&&(this.selectedDate1>this.validEnd&&(this.selectedDate1=new Date(this.validEnd),e=!0),this.selectedDate2>this.validEnd&&(this.selectedDate2=new Date(this.validEnd),e=!0)),e&&(n=this.selectedDate1<=this.selectedDate2?this.selectedDate1:this.selectedDate2,this.monthNum=n.getMonth(),this.yearNum=n.getFullYear(),t||this.emit("change"))},e.prototype.validRange=function(t,e){this.validStart=t,null!=this.validStart&&this.validStart.setHours(0,0,0,0),this.validEnd=e,null!=this.validEnd&&this.validEnd.setHours(0,0,0,0),this.checkValidDates()},e}(hx.EventEmitter),t=function(t){function r(t,o,s,u){var c,p,d,f,x,g,v,y,m,w,b,k,S;this.selector=t,this.type=null!=o?o:"calendar",this.closeOnSelect=null!=s?s:!0,this.selectRange=null!=u?u:!1,r.__super__.constructor.apply(this,arguments),c=this._={},w=this,this.selectRange&&(this.type="calendar"),c.feed=new e,this.localiser="undefined"!=typeof moment&&null!==moment?new i:new n,c.feed.on("calendarChange",function(t){return function(e){return a.call(t)}}(this)).on("change",function(t){return function(e){return t.preventFeedback?void 0:(t.preventFeedback=!0,t.selectRange?(t.inputStart.classed("hx-date-error",!1),t.inputEnd.classed("hx-date-error",!1)):t.input.classed("hx-date-error",!1),t.dontSetupInput||h.call(t),t.suppressCallback||t.emit("change"),t.dontSetupInput=!1,t.suppressCallback=!1,t.preventFeedback=!1,"calendar"===t.type?a.call(t):l.call(t))}}(this)),this.suppressCallback=!1,c.clickStart=void 0,this.selection=hx.select(this.selector).classed("hx-date-picker",!0),y=this.selection.append("div")["class"]("hx-date-input-container"),v=y.append("i")["class"]("fa fa-calendar"),this.selectRange?(this.useInbuilt=!1,k=function(t){var e,n,i,r;return w.suppressCallback?void 0:(e=w.localiser.stringToDate(w.inputStart.value()),n=w.localiser.stringToDate(w.inputEnd.value()),t&&e>n?(e=n,w.inputStart.value(w.inputEnd.value())):!t&&e>n&&(n=e,w.inputEnd.value(w.inputStart.value())),r=e.getTime(),i=n.getTime(),r&&i?(w.setRange(e,n,!0),w.showMonth(e.getMonth(),e.getFullYear())):(w.inputStart.classed("hx-date-error",!r),w.inputEnd.classed("hx-date-error",!i)))},this.inputStart=y.append("input")["class"]("hx-date-input").on("input",function(){return k(!1)}),y.append("i")["class"]("hx-date-to-icon fa fa-angle-double-right"),this.inputEnd=y.append("input")["class"]("hx-date-input").on("input",function(){return k(!0)})):(this.input=y.append("input")["class"]("hx-date-input").on("input",function(t){return function(e){var n;return w.suppressCallback?void 0:(n=w.localiser.stringToDate(e.target.value),n.getTime()?(w.date(n,!0),w.showMonth(n.getMonth(),n.getFullYear())):t.input.classed("hx-date-error",!0))}}(this)),this.useInbuilt=hx.supports("date")&&hx.supports("touch"),this.useInbuilt&&this.input.attr("type","date")),h.call(this),"calendar"===this.type?(d=hx.detached("div"),d["class"]("hx-datepicker-calendar"),f=d.append("div")["class"]("hx-calendar-month-header"),this.monthNameHeader=f.append("div")["class"]("hx-month"),f.append("div")["class"]("hx-divider").text(" / "),this.yearHeader=f.append("div")["class"]("hx-year"),p=f.append("div")["class"]("hx-calendar-month-back").on("click",function(){return c.feed.showPrevMonth()}).append("i")["class"]("fa fa-chevron-left"),g=f.append("div")["class"]("hx-calendar-month-forward").on("click",function(){return c.feed.showNextMonth()}).append("i")["class"]("fa fa-chevron-right"),this.calendarTable=d.append("table")["class"]("hx-calendar").append("tbody"),this.calendarHeaderView=this.calendarTable.append("tr").view("th","th").enter(function(t){return this.append("th").text(t).node()}).update(function(t){return this.text(t).node()}),b=function(t){return function(e){var n;return n=hx.select(e),n.append(d),a.call(t,!0)}}(this)):"datepicker"===this.type&&(x=hx.detached("div").node(),m=hx.detached("div").node(),S=hx.detached("div").node(),this.dayPicker=new hx.NumberPicker(x).on("change",function(t){return function(e){return t.suppressCallback?void 0:c.feed.day(e.value)}}(this)),this.monthPicker=new hx.NumberPicker(m).on("change",function(t){return function(e){return t.suppressCallback?void 0:c.feed.month(e.value-1)}}(this)),this.yearPicker=new hx.NumberPicker(S).on("change",function(t){return function(e){return t.suppressCallback?void 0:c.feed.year(e.value)}}(this)),this.dayPicker.selectInput.attr("tabindex",1),this.monthPicker.selectInput.attr("tabindex",2),this.yearPicker.selectInput.attr("tabindex",3),b=function(t){return function(e){var n,i,r,o,s;for(s=hx.select(e),o=t.localiser.dateOrder(),i=0,r=o.length;r>i;i++)switch(n=o[i]){case"DD":s.append(x);break;case"MM":s.append(m);break;case"YYYY":s.append(S)}return l.call(t,!0)}}(this)),this.useInbuilt||(this.dropdown=new hx.Dropdown(this.selector,b,"click","down",void 0,!1))}var s,a,l,h,u;return o(r,t),u=function(t,e,n,i){var r,o;return r=this._.feed,o=this,hx.select(t).view(".hx-day").enter(function(t){var e;return e=this.append("td")["class"]("hx-day"),o.selectRange&&e.append("div")["class"]("hx-day-range-bg"),e.append("div")["class"]("hx-day-text"),e.node()}).update(function(t){var e,s,a,l,u,c;return e=t,c=isNaN(e)?"":o.localiser.localiseDay(e),u=r.isValidDay(i,n,e),this.classed("hx-day-today",r.isToday(i,n,e)).classed("hx-out-of-range",!u),o.selectRange?(l=r.isSelectedDay(i,n,e,!0),s=r.isSelectedDay(i,n,e,!1),a=r.isBetweenDays(i,n,e),this.classed("hx-selected-date",l||s).classed("hx-selected-date-start",l).classed("hx-selected-date-range",a).classed("hx-selected-date-end",s)):this.classed("hx-selected-date",r.isSelectedDay(i,n,e)),u?this.classed("hx-out-of-month",null==e).on("click",function(s){return function(){return o._.clickStart=o.selectRange?!o._.clickStart:void 0,null!=t&&r.date(new Date(i,n,e),o._.clickStart),h.call(o),(o.selectRange&&!o._.clickStart||!o.selectRange)&&o.closeOnSelect?o.hideDropdown():void 0}}(this)):this.on("click",function(){}),this.select(".hx-day-text").text(isNaN(Number(c))?c:e)}).apply(e)},h=function(){return this.selectRange?(this.inputStart.value(this.localiser.localiseDate(this._.feed.date(!0),this.useInbuilt)),this.inputEnd.value(this.localiser.localiseDate(this._.feed.date(!1),this.useInbuilt))):this.input.value(this.localiser.localiseDate(this._.feed.date(),this.useInbuilt))},a=function(t){var e,n,i,r,o,s;return this.useInbuilt||!this.dropdown.isOpen()&&!t?void 0:(e=this._.feed,o=this,s=e.yearNum,i=e.monthNum,r=o.localiser.localiseMonth(i,!1),this.monthNameHeader.text(r),this.yearHeader.text(o.localiser.localiseYear(s)),n=e.getCalendarDays(o.localiser.localiseWeekStart()),this.calendarTable.view(".hx-week","tr").update(function(t,e){return u.call(o,e,t,i,s)}).apply(n),this.calendarHeaderView.apply(this.localiser.localiseWeek()))},l=function(t){var e,n,i,r,o,s,a,l,h;if(!this.useInbuilt&&(this.dropdown.isOpen()||t)){for(e=this._.feed,this.suppressCallback=!0,n=e.day(),s=e.month(),h=e.year(),a=this.localiser.dateOrder(),i=r=0,o=a.length;o>r;i=++r)switch(l=a[i]){case"DD":this.dayPicker.value(n,this.localiser.localiseDay(n,!0));break;case"MM":this.monthPicker.value(s+1,this.localiser.localiseMonth(s,!0));break;case"YYYY":this.yearPicker.value(h,this.localiser.localiseYear(h))}return this.suppressCallback=!1}},r.prototype.showDropdown=function(){return this.useInbuilt||this.dropdown.show(),this},r.prototype.hideDropdown=function(){return this.useInbuilt||this.dropdown.hide(),this},r.prototype.showMonth=function(t,e){return this._.feed.showMonth(t-1,e||this._.feed.year()),this},r.prototype.addDays=function(t){return this._.feed.addDays(t),this},r.prototype.addMonths=function(t){return this._.feed.addMonths(t),this},r.prototype.addYears=function(t){return this._.feed.addYears(t),this},r.prototype.getScreenDate=function(t){return this.localiser.localiseDate(this._.feed.date(!t))},r.prototype.date=function(t,e,n){return this.dontSetupInput=null!=e?e:!1,this.suppressCallback=null!=n?n:!1,this._.feed.date(t)||this},r.prototype.day=function(t,e){return this.suppressCallback=null!=e?e:!1,this._.feed.day(t)||this},r.prototype.month=function(t,e){var n;return this.suppressCallback=null!=e?e:!1,null!=(n=this._.feed.month(t-1))?n+1:this},r.prototype.year=function(t,e){return this.suppressCallback=null!=e?e:!1,this._.feed.year(t)||this},r.prototype.range=function(t,e,n,i){return null==n&&(n=!1),this.suppressCallback=null!=i?i:!1,arguments.length>0?(this.selectRange&&(this.dontSetupInput=n,this._.feed.date(t,!0),this.dontSetupInput=n,this._.feed.date(e,!1)),this):{start:this.date(!0),end:this.date(!1),count:this._.feed.getCount()}},r.prototype.validRange=function(t,e,n){return this.suppressCallback=null!=n?n:!1,this._.feed.validRange(t,e),this},r.prototype.update=function(t){return this.localiser.locale(t),h.call(this),"calendar"===this.type?a.call(this,!0):l.call(this,!0),this.dropdown.isOpen()&&(this.dropdown.hide(),this.dropdown.show()),this},s=function(t,e,n){return hx.deprecatedWarning(t+": DatePicker."+e,"Use DatePicker."+n+" instead.")},r.prototype.getDate=function(t){return s(this.selector,"getDate()","date()"),this.date(t)},r.prototype.setDate=function(t,e,n){return s(this.selector,"setDate(date, dontSetupInput, suppressCallback)","date(date, dontSetupInput, suppressCallback)"),this.date.apply(this,arguments)},r.prototype.setDay=function(t,e){return s(this.selector,"setDay(day, suppressCallback)","day(day, suppressCallback)"),this.day.apply(this,arguments)},r.prototype.setMonth=function(t,e){return s(this.selector,"setMonth(month, suppressCallback)","month(month, suppressCallback)"),this.month.apply(this,arguments)},r.prototype.setYear=function(t,e){return s(this.selector,"setYear(year, suppressCallback)","year(year, suppressCallback)"),this.year.apply(this,arguments)},r.prototype.getRange=function(){return s(this.selector,"getRange()","range()"),this.range()},r.prototype.setRange=function(t,e,n,i){return null==n&&(n=!1),this.suppressCallback=null!=i?i:!1,s(this.selector,"setRange(date1, date2, dontSetupInput, suppressCallback)","range(date1, date2, dontSetupInput, suppressCallback)"),this.range.apply(this,arguments)},r}(hx.EventEmitter),hx.DatePicker=t}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;r=hx.format.zeroPad(2),t=function(){function t(){this.currentLocale=void 0}return t.prototype.localiseTime=function(t,e){var n;return n=t.getHours()+":"+r(t.getMinutes()),e&&(n+=":"+r(t.getSeconds())),n},t.prototype.checkTime=function(t){return!isNaN(t[0])&&!isNaN(t[1])&&!isNaN(t[2])},t.prototype.locale=function(t){return void 0},t}(),e=function(){function t(){this.currentLocale=moment.locale()}return t.prototype.localiseTime=function(t,e){var n;return n=e?"H:mm:ss":"H:mm",moment(t).locale(this.currentLocale).format(n)},t.prototype.checkTime=function(t){return moment({hours:t[0],minutes:t[1],seconds:t[2]}).locale(this.currentLocale).isValid()},t.prototype.locale=function(t){return t?this.currentLocale=t:this.currentLocale},t}(),i=function(t){function e(t){this.showSeconds=t,e.__super__.constructor.apply(this,arguments),this.selectedDate=new Date,this.selectedDate.setMilliseconds(0),this.showSeconds||this.selectedDate.setSeconds(0)}return o(e,t),e.prototype.date=function(t,e){return arguments.length>0&&null!=t?(e?this.selectedDate=t:(t.setHours(this.hour(),this.minute(),this.second(),0),this.selectedDate=t),void this.emit("change",this.selectedDate)):this.selectedDate},e.prototype.hour=function(t){return arguments.length>0&&null!=t?(this.selectedDate.setHours(t),void this.emit("change",this.selectedDate)):this.selectedDate.getHours()},e.prototype.minute=function(t){return arguments.length>0&&null!=t?(this.selectedDate.setMinutes(t),void this.emit("change",this.selectedDate)):this.selectedDate.getMinutes()},e.prototype.second=function(t){return arguments.length>0&&null!=t?(this.selectedDate.setSeconds(t),void this.emit("change",this.selectedDate)):this.selectedDate.getSeconds()},e.prototype.addHours=function(t){return this.hour(this.hour()+t)},e.prototype.addMinutes=function(t){return this.minute(this.minute()+t)},e.prototype.addSeconds=function(t){return this.second(this.second()+t)},e}(hx.EventEmitter),n=function(n){function s(n,r,o){var a,u,c,p,d,f,x;this.selector=n,this.showSeconds=r,s.__super__.constructor.apply(this,arguments),a=this._={},a.feed=new i(this.showSeconds),a.localiser="undefined"!=typeof moment&&null!==moment?new e:new t,a.feed.on("change",function(t){return function(e){return t.preventFeedback?void 0:(t.preventFeedback=!0,t.input.classed("hx-time-error",!1),t.dontSetupInput||l.call(t),t.suppressCallback||t.emit("change"),t.dontSetupInput=!1,t.suppressCallback=!1,t.preventFeedback=!1,h.call(t))}}(this)),this.suppressCallback=!1,this.selection=hx.select(this.selector).classed("hx-time-picker",!0),p=this.selection.append("div")["class"]("hx-time-input-container"),c=p.append("i")["class"]("fa fa-clock-o"),this.input=p.append("input")["class"]("hx-time-input"),this.input.on("input",function(t){return function(e){var n;return t.suppressCallback?void 0:(n=e.target.value.split(":"),null==n[2]&&(n[2]=0),a.feed.checkTime(n)?(a.feed.hour(n[0]),a.feed.minute(n[1]),a.feed.second(n[2]||0)):t.input.classed("hx-time-error",!0))}}(this)),l.call(this),u=hx.detached("div").node(),d=hx.detached("div").node(),f=hx.detached("div").node(),this.hourPicker=new hx.NumberPicker(u,o).on("change",function(t){return function(e){return t.suppressCallback?void 0:a.feed.hour(e.value)}}(this)),this.hourPicker.selectInput.attr("tabindex",1).attr("maxlength","2"),this.minutePicker=new hx.NumberPicker(d,o).on("change",function(t){return function(e){return t.suppressCallback?void 0:a.feed.minute(e.value)}}(this)),this.minutePicker.selectInput.attr("tabindex",2).attr("maxlength","2"),this.secondPicker=new hx.NumberPicker(f,o).on("change",function(t){return function(e){return t.suppressCallback?void 0:a.feed.second(e.value)}}(this)),this.secondPicker.selectInput.attr("tabindex",3).attr("maxlength","2"),x=function(t){return function(e){var n;return n=hx.select(e),n.append(u),n.append(d),t.showSeconds&&n.append(f),h.call(t,!0)}}(this),this.dropdown=new hx.Dropdown(this.selector,x,"click","down",void 0,!1,"hx-time-picker-dropdown")}var a,l,h;return o(s,n),h=function(t){var e,n;return this.dropdown.isOpen()||t?(e=this._.feed,this.suppressCallback=!0,n=this.getScreenTime(!0).split(":"),this.hourPicker.value(e.hour(),n[0]),this.minutePicker.value(r(e.minute()),n[1]),this.secondPicker.value(r(e.second()),n[2]),this.suppressCallback=!1):void 0},l=function(){return this.input.classed("hx-short-time",!this.showSeconds),this.input.value(this.getScreenTime(this.showSeconds))},s.prototype.date=function(t,e,n){return this.suppressCallback=null!=n?n:!1,this._.feed.date(t,e)||this},s.prototype.hour=function(t,e){return this.suppressCallback=null!=e?e:!1,this._.feed.hour(t)||this},s.prototype.minute=function(t,e){return this.suppressCallback=null!=e?e:!1,this._.feed.minute(t)||this},s.prototype.second=function(t,e){return this.suppressCallback=null!=e?e:!1,this._.feed.second(t)||this},s.prototype.addHours=function(t){return this._.feed.addHours(t),this},s.prototype.addMinutes=function(t){return this._.feed.addMinutes(t),this},s.prototype.addSeconds=function(t){return this._.feed.addSeconds(t),this},s.prototype.getScreenTime=function(){return this._.localiser.localiseTime(this._.feed.date(),this.showSeconds)},s.prototype.update=function(t){return this._.localiser.locale(t),l.call(this),h.call(this,!0),this},a=function(t,e,n){return hx.deprecatedWarning(t+": TimePicker."+e,"Use TimePicker."+n+" instead.")},s.prototype.getDate=function(){return a(this.selector,"getDate()","date()"),this.date()},s.prototype.getHour=function(){return a(this.selector,"getHour()","hour()"),this.hour()},s.prototype.getMinute=function(){return a(this.selector,"getMinute()","minute()"),this.minute()},s.prototype.getSecond=function(){return a(this.selector,"getSecond()","second()"),this.second()},s.prototype.setDate=function(t,e,n){return a(this.selector,"setDate(date, dontSetupInput, suppressCallback)","date(date, dontSetupInput, suppressCallback)"),this.date.apply(this,arguments)},s.prototype.setHour=function(t,e){return a(this.selector,"setHour(hour, suppressCallback)","hour(hour, suppressCallback)"),this.hour.apply(this,arguments)},s.prototype.setMinute=function(t,e){return a(this.selector,"setMinute(minute, suppressCallback)","minute(minute, suppressCallback)"),this.minute.apply(this,arguments)},s.prototype.setSecond=function(t,e){return a(this.selector,"setSecond(second, suppressCallback)","second(second, suppressCallback)"),this.second.apply(this,arguments)},s}(hx.EventEmitter),hx.TimePicker=n}(),function(){var t,e,n,i,r,o;t=function(t){var e;return e=t.responseType,e&&"text"!==e?t.response:t.responseText},r=function(e,n,i,r,o,s){var a,l,h,u;if(u=e.status,h=null!=i?{url:n,data:i}:n,!u&&t(e)||u>=200&&300>u||304===u){try{l=o.formatter(e)}catch(c){return a=c,void r(a,void 0,h,s)}r(void 0,l,h,s)}else r(e,void 0,h,s)},o=function(t,e,n,i){var r,o,s,a;t.open(i.requestType,e,!0),o=i.headers;for(r in o)a=o[r],t.setRequestHeader(r,a);return i.responseType&&(t.responseType=i.responseType),t.overrideMimeType(i.contentType),s=null!=n&&"string"!=typeof n?JSON.stringify(n):n,t.send(s)},n=function(t,e,n,i,s){var a,l,h,u,c;return null==e&&(e=null),null==i&&(i={}),h={requestType:"GET",formatter:hx.identity,headers:{}},i=hx.merge(!0,h,i),i.contentType&&(null==(a=i.headers)["Content-Type"]&&(a["Content-Type"]=i.contentType),null==(l=i.headers).accept&&(l.accept=i.contentType+",*/*")),"GET"===i.requestType&&e&&(i.requestType="POST"),u=new XMLHttpRequest,"withCredentials"in u||void 0===typeof XDomainRequest||!/^(http(s)?:)?\/\//.test(t)||(u=new XDomainRequest),c=function(){return r(u,t,e,n,i,s)},"onload"in u?u.onload=u.onerror=c:u.onreadystatechange=function(){u.readyState>3&&c()},o(u,t,e,i)},e=function(t,e,i,r,o){var s,a,l,h,u,c,p;if("array"===t){for(u=[],s=function(t,n,i,o){var s,a;return u[o]={data:n,source:i},r(t,n,i,o),u.filter(function(t){return void 0!==t}).length===e.length?(a=u.map(function(t){return t.source}),s=u.map(function(t){return t.data}),r(t,s,a,-1)):void 0},c=[],a=l=0,h=e.length;h>l;a=++l)p=e[a],hx.isObject(p)&&(i=p.data||i,p=p.url),c.push(n(p,i,s,o,a));return c}return"object"===t?(i=e.data||i,p=e.url):p=e,n(p,i,r,o)},hx.request=function(){var t,n,i,r,o;return o=arguments[0],r=function(){switch(!1){case!hx.isArray(o):return"array";case!hx.isObject(o):return"object";case!hx.isString(o):return"string"}}(),!r||"array"===r&&0===o.length?void console.error("Incorrect URL passed into hx.request: ",o):(hx.isFunction(arguments[1])?(t=arguments[1],i=arguments[2]):(n=arguments[1],t=arguments[2],i=arguments[3]),e(r,o,n||null,t,i))},i=function(t,e,n){var i,r,o,s,a;return a=t[0],hx.isFunction(t[1])?(i=t[1],s=t[2]):(r=t[1],i=t[2],s=t[3]),o={contentType:e,formatter:n},s=hx.merge(!0,o,s),hx.request(a,r,i,s)},hx.json=function(){return i(arguments,"application/json",function(t){return t.responseText?JSON.parse(t.responseText):void 0})},hx.html=function(){return i(arguments,"text/html",function(t){return hx.parseHTML(t.responseText)})}}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t){var e;n.__super__.constructor.apply(this,arguments),this.current=void 0,this.selectItems=[],e=hx.select(t).classed("hx-select",!0),hx.select.getHexagonElementDataObject(e.node()).widget=this,this.selectedText=e.append("span"),e.append("i")["class"]("fa fa fa-caret-down"),this.renderFunc=function(t,e){return hx.select(t).text(e)},this.menu=new hx.Menu(e.node()),this.menu.on("select",function(t){return function(e){var n;return null!=(null!=(n=e.content)?n.content:void 0)?(t.current=e.content.content,t.selectedText.text(t.current.text||t.current),t.menu.hide(),t.emit("change",t.current)):void 0}}(this))}return e(n,t),n.prototype.renderer=function(t){return this.renderFunc=t,this.menu.renderer=t,this},n.prototype.items=function(t){return this.selectItems=t,this.menu.render(t),this},n.prototype.value=function(t){var e,n,i,r;if(arguments.length>0){for(r=this.selectItems,e=0,i=r.length;i>e;e++)if(n=r[e],n===t||n.value===t){this.current=n,this.renderFunc(this.selectedText.node(),n);break}return this}return this.current},n}(hx.EventEmitter),hx.Select=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e,i){var r;this.selector=t,this.classifier=e,this.validator=i,n.__super__.constructor.apply(this,arguments),this.selection=hx.select(this.selector).classed("hx-tag-input",!0),this.tagContainer=this.selection.append("span")["class"]("hx-tags-container"),this.form=this.selection.append("form"),this.input=this.form.append("input").attr("placeholder","add tag..."),r=!1,this.form.on("keypress",function(t){return function(e){var n;return 13===e.keyCode&&t.form.node().checkValidity()&&(e.preventDefault(),n=t.input.value())?(t.add(n,void 0,!0),t.emit("add",{value:n,type:"user"}),t.input.value("")):void 0}}(this)),this.input.on("input",function(t){return function(){var e,n;return n=t.input.value(),t.validator?(e=t.validator(n),t.input.node().setCustomValidity(e||"")):""===n?t.input.node().setCustomValidity(""):void 0}}(this)),this.input.on("keydown",function(t){return function(e){var n,i,o;return 8===(e.keyCode||e.charCode)&&!r&&(r=!0,t.input.node().setCustomValidity(""),""===t.input.value()&&(i=t.tagContainer.selectAll(".hx-tag"),i.size()>0))?(n=hx.select(i.node(i.size()-1)),o=n.text(),n.remove(),t.emit("remove",{value:o,type:"user"})):void 0}}(this)),this.input.on("keyup",function(t){return 8===(t.keyCode||t.charCode)?(r=!1,!0):void 0})}return e(n,t),n.prototype.add=function(t,e,n){var i,r,o,s,a,l;if(hx.isArray(t)){for(a=[],r=0,o=t.length;o>r;r++)s=t[r],a.push(this.add(s,e,n));return a}return l=this.tagContainer.append("span").text(t),e?l["class"]("hx-tag "+e):l["class"]("hx-tag"),this.classifier&&(i=this.classifier(t),i&&l.classed(i,!0)),l.on("click",function(t){return function(){var e;return e=l.text(),l.remove(),t.emit("remove",{value:e,type:"user"})}}(this)),n?void 0:this.emit("add",{value:t,type:"api"})},n.prototype.remove=function(t){var e,n;return null!=t?(this.tagContainer.selectAll(".hx-tag").filter(function(e){return hx.select(e).text()===t}).each(function(t){return function(e){return t.emit("remove",{value:hx.select(e).text(),type:"api"})}}(this)).remove().length,this):(e=this.tagContainer.selectAll(".hx-tag").each(function(t){return function(e){return t.emit("remove",{value:hx.select(e).text(),type:"api"})}}(this)),n=e.text(),e.remove(),n)},n.prototype.removeAll=function(){return hx.deprecatedWarning(this.selector+": TagInput.removeAll()","Use TagInput.remove() instead."),this.remove()},n.prototype.tags=function(){return this.tagContainer.selectAll(".hx-tag").text()},n}(hx.EventEmitter),hx.TagInput=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(t){function e(t,n){var i;this.selector=t,this.animate=null!=n?n:!0,e.__super__.constructor.apply(this,arguments),this.expanded=!1,i=hx.select(this.selector).classed("hx-openable",!0).classed("hx-morph-section",!0),i.select(".hx-morph-toggle").on("click",function(t){return function(){return t.toggle()}}(this)),i.select(".hx-morph-content").style("display","none")}return n(e,t),e.prototype.visible=function(t){var e,n,i;return void 0===t?this.expanded:(n=hx.select(this.selector).classed("hx-opened",t),i=n.select(".hx-morph-toggle"),e=n.select(".hx-morph-content"),this.animate?e.morph().cancelOngoing()["with"](t?"expand":"fadeout",100).and(t?"fadein":"collapse",100).go():e.style("display",t?"":"none"),this.expanded=t,this.emit(t?"show":"hide",{toggle:i.node(),content:e.node()}),void 0)},e.prototype.toggle=function(){return this.visible(!this.expanded);
},e.prototype.show=function(){return this.visible(!0)},e.prototype.hide=function(){return this.visible(!1)},e}(hx.EventEmitter),t=function(t){function e(t,n,i){var r;e.__super__.constructor.call(this,t,!1),r=this,this.on("show",function(t){return r.detector=new hx.ClickDetector(t.content),n.call(r,t.toggle,t.content),hx.select(t.toggle).style("display","none"),r.detector.addException(t.content),r.detector.on("click",function(){return r.detector.cleanUp(),r.detector=void 0,r.hide()})}),this.on("hide",function(t){return i.call(r,t.toggle,t.content),hx.select(t.toggle).style("display","")})}return n(e,t),e}(e),hx.MorphSection=e,hx.InlineMorphSection=t}(),function(){var t,e,n;t=void 0,n=void 0,e=function(){var e,i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b;if(l=document.attachEvent,b=!1,y=function(t){var e,n,i,r;r=t.__resizeTriggers__,n=r.firstElementChild,e=r.lastElementChild,i=n.firstElementChild,e.scrollLeft=e.scrollWidth,e.scrollTop=e.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},u=function(t){return t.offsetWidth!==t.__resizeLast__.width||t.offsetHeight!==t.__resizeLast__.height},m=function(t){var e;e=this,y(this),this.__resizeRAF__&&h(this.__resizeRAF__),this.__resizeRAF__=v(function(){u(e)&&(e.__resizeLast__.width=e.offsetWidth,e.__resizeLast__.height=e.offsetHeight,e.__resizeListeners__.forEach(function(n){n.call(e,t)}))})},c=function(){var t,e,n;b||(t=(i?i:"")+".resize-triggers { "+(o?o:"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style"),n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),e.appendChild(n),b=!0)},!l){for(v=function(){var t;return t=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return window.setTimeout(t,20)},function(e){return t(e)}}(),h=function(){var t;return t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.clearTimeout,function(e){return t(e)}}(),e=!1,a="animation",x="",s="animationstart",p="Webkit Moz O ms".split(" "),w="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),g="",d=document.createElement("fakeelement"),void 0!==d.style.animationName&&(e=!0),e===!1&&(f=0);f<p.length;){if(void 0!==d.style[p[f]+"AnimationName"]){g=p[f],a=g+"Animation",x="-"+g.toLowerCase()+"-",s=w[f],e=!0;break}f++}r="resizeanim",i="@"+x+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",o=x+"animation: 1ms "+r+"; "}t=function(t,e){l?t.attachEvent("onresize",e):(t.__resizeTriggers__||("static"===getComputedStyle(t).position&&(t.style.position="relative"),c(),t.__resizeLast__={},t.__resizeListeners__=[],(t.__resizeTriggers__=document.createElement("div")).className="resize-triggers",t.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',t.appendChild(t.__resizeTriggers__),y(t),t.addEventListener("scroll",m,!0),s&&t.__resizeTriggers__.addEventListener(s,function(e){e.animationName===r&&y(t)})),t.__resizeListeners__.push(e))},n=function(t,e){l?t.detachEvent("onresize",e):(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(t.removeEventListener("scroll",m),t.__resizeTriggers__=!t.removeChild(t.__resizeTriggers__)))}},hx.select.addEventAugmenter({name:"resize",setup:function(n,i){return("undefined"==typeof t||null===t)&&e(),t(n,function(t){var e;return e=hx.select(n).box(),i.emit("resize",{clientRect:e,event:t})})}})}(),function(){var t,e,n,i,r,o=function(t,e){function n(){this.constructor=t}for(var i in e)s.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=function(t){function e(t,n,i){this.title=t,this.setup=n,this.isClosable=null!=i?i:!0,e.__super__.constructor.apply(this,arguments),this.contentContainer=null,this.setupTitlebar=function(t){return hx.select(t).text(this.title)}}var n;return o(e,t),n=function(t,e){var n;return n=hx.select("body").classed("hx-modal-open",!1),n.select(".hx-modal-container").remove(),n.select(".hx-modal-shade").remove(),t.emit("close",e)},e.prototype.show=function(){var t,e,i,r,o,s;return t=hx.select("body").classed("hx-modal-open",!0),o=t.select(".hx-modal-shade"),o.empty()&&(o=t.append("div").attr("class","hx-modal-shade"),o.style("opacity",0).morph()["with"]("fadein",150).go()),r=t.select(".hx-modal-container"),r.empty()&&(r=t.append("div").attr("class","hx-modal-container")),i=r.select(".hx-modal"),i.empty()&&(i=r.append("div").attr("class","hx-modal")),s=i.append("div").attr("class","hx-modal-title"),this.setupTitlebar.call(this,s.node()),this.isClosable&&(e=s.append("button").attr("type","button")["class"]("hx-modal-close hx-btn").html('<i class="fa fa-times"></i>').on("click",function(t){return function(){return n(t,{cause:"button"})}}(this)),this.buttonClass&&e.classed(this.buttonClass,!0),r.on("click",function(t){return function(e){return i.node().contains(e.target)?void 0:n(t,{cause:"shade"})}}(this))),this.contentContainer=i.append("div").attr("class","hx-modal-content"),this.setup&&this.setup(this.contentContainer.node()),i.style("opacity",0).style("top","-30px").morph()["with"]("fadein",150).and(function(){return i.animate().style("top","0px",100)}).go(),this.emit("open",this.contentContainer.node()),this},e.prototype.close=function(){return n(this,{cause:"api"})},e}(hx.EventEmitter),n=function(t,e,n,i){return void e.forEach(function(e){return t.append("button").attr("type","button")["class"](e.classes).html('<i class="'+e.icon+'"></i> '+e.text).on("click",function(){return i(e.value),n.close()})})},e=function(t,e){return function(n){return n=hx.select(n),n.classed("hx-background-"+t,!0),null!=e&&n.append("i")["class"]("fa "+e),n.append("span").text(this.title),this.buttonClass="hx-"+t}},i=function(i,r,o,s,a,l,h){var u,c;return c=function(t){var e,i;return null==s&&(s=[{text:"Cancel",icon:"fa fa-times",value:!1,classes:"hx-btn hx-negative"},{text:"Confirm",icon:"fa fa-check",value:!0,classes:"hx-btn hx-positive"}]),i=hx.select(t),r=i.append("div")["class"]("hx-modal-message").text(r),e=i.append("div")["class"]("hx-modal-buttons"),n(e,s,this,o)},u=new t(i,c,a),null!=l&&(u.setupTitlebar=e(l,h)),u.on("close",function(t){return"api"!==t.cause?o():void 0}),u.show()},r=function(e,i,r,o){var s,a;return null==o&&(o=!0),a=function(t){var e,o,s,a;return o=[{text:"Cancel",icon:"fa fa-times",value:!1,classes:"hx-btn hx-negative"},{text:"Confirm",icon:"fa fa-check",value:!0,classes:"hx-btn hx-positive"}],s=hx.select(t),i=s.append("span")["class"]("hx-modal-message").text(i),a=s.append("input")["class"]("hx-modal-input").text(a),e=s.append("div")["class"]("hx-modal-buttons"),n(e,o,this,function(t){return r(t?a.value():t)})},s=new t(e,a),s.on("close",function(t){return"api"!==t.cause?r():void 0}),s.show()},hx.Modal=t,hx.modal={dialog:i,input:r}}(),function(){var t,e,n,i;n=5,t=function(){function t(t,e,n,i,r){this.manager=t,this.message=e,this.icon=n,this.cssclass=i,this.pinned=r,this.domPin=hx.detached("i").attr("class","hx-notification-pin fa fa-thumb-tack").on("click",function(t){return function(){return t.togglePin()}}(this)),this.id=this.manager.nextId(),this.updatePinnedStatus()}return t.prototype.startTimeout=function(t){return this.timeoutId=window.setTimeout(function(t){return function(){return t.close()}}(this),1e3*t)},t.prototype.close=function(){return this.manager.removeNotification(this)},t.prototype.pin=function(){return this.pinned=!0,window.clearTimeout(this.timeoutId),this.updatePinnedStatus()},t.prototype.unpin=function(){return this.pinned=!1,this.startTimeout(1),this.updatePinnedStatus()},t.prototype.togglePin=function(){return this.pinned?this.unpin():this.pin()},t.prototype.updatePinnedStatus=function(){return this.domPin.classed("hx-notification-pin-pinned",this.pinned)},t}(),e=function(){function e(t){null==t&&(t="body"),this.currentId=0,this.notifications=[],this.notificationContainer=hx.select(t).append("div").attr("class","hx-notification-container")}var i,r;return r=function(t,e){return e.append("i").attr("class","hx-notification-icon "+t.icon),e.append("div").attr("class","hx-notification-text").text(t.message),e.append("i").attr("class","hx-notification-close fa fa-times").on("click",function(){return t.close()}),e.append(t.domPin)},e.prototype.nextId=function(){return this.currentId++},e.prototype.redraw=function(){var t;return t=this.notificationContainer.view(".hx-notification"),t.enter(function(t){var e;return e=this.append("div"),e.attr("class","hx-notification "+t.cssclass).each(function(n){return r(t,e),t.trueHeight=e.style("height")}).style("opacity",0).style("height",0).style("padding-top",0).style("padding-bottom",0).style("margin-top",0).style("margin-bottom",0).morph()["with"]("expandv").and("fadein").then(function(){return e.style("height","")}).go(),e.node()}),t.exit(function(){return this.style("overflow","hidden").morph()["with"]("fadeout",100).then("collapsev",100).then(function(t){return function(){return t.remove()}}(this)).go()}),t.apply(this.notifications,function(t){return t.id})},e.prototype.removeNotification=function(t){var e;return e=this.notifications.indexOf(t),e>=0&&this.notifications.splice(e,1),this.redraw()},i=function(e,n,i,r,o){var s;return s=new t(e,n,i,r,o),e.notifications.push(s),e.redraw(),s},e.prototype.permanent=function(t,e,n){return null==e&&(e=""),null==n&&(n=""),i(this,t,e,n,!0)},e.prototype.temporary=function(t,e,r,o){var s;return null==e&&(e=""),null==r&&(r=""),null==o&&(o=n),s=i(this,t,e,r,!1),s.startTimeout(o),s},e.prototype.info=function(t,e){return null==e&&(e=n),this.temporary(t,"fa fa-info","hx-info",e)},e.prototype.warning=function(t,e){return null==e&&(e=n),this.temporary(t,"fa fa-warning","hx-warning",e)},e.prototype.negative=function(t,e){return null==e&&(e=n),this.temporary(t,"fa fa-exclamation-circle","hx-negative",e)},e.prototype.positive=function(t,e){return null==e&&(e=n),this.temporary(t,"fa fa-check","hx-positive",e)},e.prototype.loading=function(t){return this.permanent(t,"hx-spinner","hx-loading")},e}(),hx.NotificationManager=e,i=void 0,hx.notify=function(){return i||(i=new e),i},hx.notify.defaultTimeout=function(t){return arguments.length>0?void(n=t||5):n},hx.notify.setDefaultTimeout=function(t){return hx.deprecatedWarning("hx.notify.setDefaultTimeout(timeout)","Use hx.notify.defaultTimeout(timeout) instead."),hx.notify.defaultTimeout.apply(this,arguments)},hx.getNotificationManager=function(){return hx.deprecatedWarning("hx.getNotificationManager()","Use hx.notify() instead."),hx.notify.apply(this,arguments)},hx.getNotificationManager=function(){return hx.deprecatedWarning("hx.getNotificationManager.setDefaultTimeout(timeout)","Use hx.notify.defaultTimeout(timeout) instead."),hx.notify.defaultTimeout.apply(this,arguments)}}(),function(){var t;t=function(){function t(t){var n,i,r;this.selector=t,this.isMobileFriendly=hx.select(this.selector).select(".hx-titlebar-menu-icon-mobile").size()>0,n=hx.select(this.selector).select(".hx-titlebar-linkbar").selectAll(".hx-titlebar-link").size()>0,i=hx.select("body").classed("hx-titlebar-fixed"),r=hx.select("body").classed("hx-full-screen"),this.isMobileFriendly&&(hx.select(this.selector).select(".hx-titlebar-menu-icon-mobile").on("click",function(t){return function(){return e.call(t,!t.visible,!0)}}(this)),this.visible=!0,e.call(this,!1,!1)),n&&(i||r)&&hx.select("body").classed("hx-titlebar-link-padding",!0)}var e;return e=function(t,e){var n;return null==e&&(e=!0),this.isMobileFriendly&&t!==this.visible?(this.visible=t,n=function(n){return t?(n.classed("hx-titlebar-mobile-hide",!1),e?n.style("height","0px").morph()["with"]("expandv",150).go():void 0):e?n.morph()["with"]("collapsev",50).then(function(){return n.classed("hx-titlebar-mobile-hide",!0)}).thenStyle("display","").go():n.classed("hx-titlebar-mobile-hide",!0)},n(hx.select(this.selector).selectAll(".hx-titlebar-menu-icons")),n(hx.select(this.selector).selectAll(".hx-titlebar-linkbar"))):void 0},t.prototype.show=function(t){return e.call(this,!0,t)},t.prototype.hide=function(t){return e.call(this,!1,t)},t.prototype.setActive=function(t){var e;return e=hx.selectAll(".hx-titlebar-link").classed("hx-selected",!1),null!=t?hx.isString(t)?hx.select(t).classed("hx-selected",!0):hx.select(e.node(t)).classed("hx-selected",!0):void 0},t.prototype.setContextClass=function(t){var e,n,i,r,o;for(r=["hx-positive","hx-negative","hx-warning","hx-info"],o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push(hx.select(this.selector).select(".hx-titlebar").classed(e,t===e));return o},t}(),hx.TitleBar=t,hx.select(".hx-heading").size()>0&&(hx.titlebar=new hx.TitleBar(".hx-heading"))}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var r,s,a,h,u,c,p,d,f,x,g;if(this.selector=t,null==e&&(e={}),n.__super__.constructor.apply(this,arguments),hx.isString(e)&&hx.consoleWarning(selector+": hx.Slider incorrect value passed into constructor",'The slider constructor expects an options object as the second parameter but was passed "'+e+'"'),this.options=hx.merge(!0,i,e),this._=r={},r.isDiscrete=(null!=(d=this.options.discreteValues)?d.length:void 0)>0||null!=this.options.step,r.container=hx.select(this.selector).classed("hx-slider",!0).append("div").classed("hx-slider-inner",!0).classed("hx-slider-double","range"===this.options.type).classed("hx-slider-discrete",r.isDiscrete).on("pointerdown",function(t){return function(e){return r.mouseDown=!0,t.emit("slidestart",t.value()),l.call(t,e)}}(this)),r.range=r.container.append("div")["class"]("hx-slider-range"),null==r.controlWidth&&(r.controlWidth=Number(window.getComputedStyle(document.querySelector(".hx-slider-range"),":after").width.replace("px",""))),r.valueL=r.range.append("div")["class"]("hx-slider-value").style("left",0),r.valueR=r.range.append("div")["class"]("hx-slider-value").style("left","100%"),hx.select(document).on("pointermove",function(t){return function(e){return r.mouseDown?l.call(t,e):void 0}}(this),!0),hx.select(document).on("pointerup",function(t){return function(e){var n;return r.mouseDown?(r.mouseDown=!1,r.dragging=void 0,n=r.range.select(".hx-slider-active"),n.morph()["with"]("delay",100).then("fadeout",200).then(function(){return n.classed("hx-slider-active",!1),r.valueVis=!1}).go(!0),t.emit("slideend",t.value())):void 0}}(this),!0),r.slidableWidth="range"===this.options.type?r.container.width()-r.controlWidth:r.container.width(),null!=this.options.step){for(x=[],s=this.options.min;s<=this.options.max;)x.push(s),s+=this.options.step;this.options.max=1,this.options.min=0,this.setDiscreteValues(x,!1)}else r.isDiscrete&&this.setDiscreteValues(this.options.discreteValues,!1);h=this.options.max-this.options.min,p=.25*h+this.options.min,c=.5*h+this.options.min,u=.75*h+this.options.min,"range"===this.options.type?(f=null!=this.options.startValue?this.options.startValue:r.isDiscrete?o.call(this,p):p,a=null!=this.options.endValue?this.options.endValue:r.isDiscrete?o.call(this,u):u,this.values={startValue:f,endValue:a}):(g=null!=this.options.endValue?this.options.endValue:r.isDiscrete?o.call(this,c):c,this.values={value:g}),this.values.value?this.value(this.values.value):this.value({startValue:this.values.startValue,endValue:this.values.endValue})}var i,r,o,s,a,l;return e(n,t),i={type:"slider",discreteValues:void 0,render:function(t,e,n){return hx.select(e).text(hx.format.fixed(2)(n))},min:0,max:1,step:void 0},s=function(t){return this._.isDiscrete?o.call(this,t):t*(this.options.max-this.options.min)+this.options.min},r=function(t){return this._.discreteValues[t]},o=function(t){var e,n,i,r,o;e=this._,r=e.discreteSpacing/2,i=e.discreteValues;for(n in i)if(o=i[n],t>=o-r&&o+r>t)return n;return t},l=function(t){var e,n,i,o,a,l,h,u;e=this._,e.slidableWidth="range"===this.options.type?e.container.width()-e.controlWidth:e.container.width(),t.event.preventDefault(),l=hx.clamp(0,e.container.width(),t.x-e.container.box().left)/e.slidableWidth,u={},"range"===this.options.type?(h=e.isDiscrete?r.call(this,this.values.startValue):this.values.startValue,i=e.isDiscrete?r.call(this,this.values.endValue):this.values.endValue,h=(h-this.options.min)/(this.options.max-this.options.min),i=(i-this.options.min)/(this.options.max-this.options.min),n=(i-h)/2,a=e.controlWidth/e.slidableWidth,o=l-a/2>=i-n,"end"===e.dragging||o&&"start"!==e.dragging?(e.dragging="end",l-=a,l=hx.clamp(h,1,l),u.endValue=s.call(this,l)):(e.dragging="start",l=hx.clamp(0,i,l),u.startValue=s.call(this,l))):(e.dragging="value",u.value=s.call(this,l)),this.value(u),this.emit("change",this.value())},a=function(){var t,e,n,i,o;t=this._,setTimeout(function(){var e,n;return n=t.container.selectAll(".hx-slider-point"),n.empty()?void 0:(e=n.nodes[0].offsetHeight,n.each(function(t){return hx.select(t).style("width",e+"px").style("margin-left",-e/2+"px")}))},100),"range"===this.options.type?(i=t.isDiscrete?r.call(this,this.values.startValue):this.values.startValue,e=t.isDiscrete?r.call(this,this.values.endValue):this.values.endValue):(i=this.options.min,e=t.isDiscrete?r.call(this,this.values.value):this.values.value),t.isDiscrete||(i=(i-this.options.min)/(this.options.max-this.options.min),e=(e-this.options.min)/(this.options.max-this.options.min)),t.range.style("left",100*i+"%").style("width",100*(e-i)+"%"),"start"===t.dragging?(n=t.valueL,o=this.values.startValue):null!=t.dragging&&(n=t.valueR,o="end"===t.dragging?this.values.endValue:this.values.value),null!=n&&null!=o&&(t.valueVis||(t.valueVis=!0,n.classed("hx-slider-active",!0).classed("hx-slider-under",!1),n.morph()["with"]("fadein",30).then(function(t){return function(){var t;return t=n.box(),n.classed("hx-slider-under",t.top-t.height<0)}}(this)).go(!0)),this.options.render(this,n.node(),o))},n.prototype.setDiscreteValues=function(t,e){var n,i,r,o,s,l;for(null==e&&(e=!0),n=this._,n.discreteValues={},n.discreteSpacing=1/(t.length-1),n.container.selectAll(".hx-slider-point").remove(),i=r=0,l=t.length;l>=0?l>r:r>l;i=l>=0?++r:--r)s=i*n.discreteSpacing,n.discreteValues[t[i]]=s,("range"===this.options.type||i>0)&&(o=n.range.insertBefore("div")["class"]("hx-slider-point").style("left",100*s+"%"));return e&&a.call(this),this},n.prototype.value=function(t){var e;return arguments.length>0?(e=function(t){return function(e){return t._.isDiscrete?e:hx.clamp(t.options.min,t.options.max,e)}}(this),"range"===this.options.type?(null!=t.startValue&&(this.values.startValue=e(t.startValue)),null!=t.endValue&&(this.values.endValue=e(t.endValue))):hx.isObject(t)?null!=t.value&&(this.values.value=e(t.value)):null!=t&&(this.values.value=e(t)),a.call(this),this):"range"===this.options.type?{startValue:this.values.startValue,endValue:this.values.endValue}:this.values.value},n.prototype.getValue=function(){return hx.deprecatedWarning(this.selector+": Slider.getValue()","Use Slider.value() instead."),this.value.apply(this,arguments)},n.prototype.setValue=function(t){return hx.deprecatedWarning(this.selector+": Slider.setValue(value)","Use Slider.value(value) instead."),this.value.apply(this,arguments)},n}(hx.EventEmitter),hx.Slider=t}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t,e){var n,i,r,o,s,a,l,h,u;return u=this,n=this._,null==n.prevTerm&&(n.prevTerm=""),i=n.data.get(t),t.length>=n.prevTerm.length&&null==i&&(i=n.data.get(n.prevTerm)),null==i&&(i=n.data.get("")),n.prevTerm=t,s="external"===this.options.matchType?i:0!==t.length||this.options.showAll?this.options.filter(i,t):[],o=i.length===s.length&&i.length>0,!this.options.showOtherResults||e||o||(l=s.length>0?s:[{unselectable:!0,text:u.options.noResultsMessage}],a=[{unselectable:!0,heading:!0,text:u.options.otherResultsMessage}],h=a.concat(0===s.length?i:(r=i.filter(function(t){return s.some(function(e){return e===t})?!1:!0}),null==this.options.filterOptions.sort||this.options.filterOptions.sort?r=null!=this.options.inputMap?r.sort(function(t,e){return t=u.options.inputMap(t),e=u.options.inputMap(e),hx.sort.compare(t,e)}):r.sort(hx.sort.compare):void 0,r)),s=l.concat(h)),s},e=function(t,i,r){var o,s,a,l,h;return l=this,o=this._,void(null==o.callback||i?(o.menu.cursorPos=-1,s=r?void 0:"external"===this.options.matchType?o.data.get(t):n.call(l,t),a={unselectable:!0,text:""},o.menu.clearItems(),h=!1,null==s?a.text="Loading...":t.length<this.options.minLength?a.text="Please enter "+this.options.minLength+" or more characters":(t.length>0||this.options.showAll)&&0===s.length?this.options.trimTrailingSpaces&&o.input.value().lastIndexOf(" ")===o.input.value().length-1?h=!0:this.options.noResultsMessage.length>0&&null!=this.options.noResultsMessage&&(a.text=this.options.noResultsMessage):t.length>=this.options.minLength&&s.length>0&&o.menu.add(s),a.text.length>0&&o.menu.add(a),o.menu.items.length>0?o.menu.dropdown.isOpen()?o.menu.dropdown.dropdownContent(o.menu.dropdown.dropdown.node()):o.menu.dropdown.show():o.menu.hide(),h&&(o.input.value(o.input.value().substring(0,o.input.value().length-1)),e.call(l,o.input.value(),i,r))):t.length<this.options.minLength||!this.options.showAll&&0===t.length?(o.data.set(t,[]),e.call(l,t,!0)):(e.call(l,t,!0,!0),o.currentSearch=t,o.data.get(t)?e.call(l,t,!0):(o.data.set(t,!0),o.callback.call(l,t,function(n){return o.cleanUp||(o.data.set(t,n),o.currentSearch!==t)?void 0:e.call(l,t,!0)}))))},i=function(){return this._.cleanUp=!1,e.call(this,this._.input.value()||"")},t=function(t){function o(t,i,r){var s,a,l,h,u,c,p,d,f,x;this.selector=t,this.data=i,this.options=null!=r?r:{},o.__super__.constructor.apply(this,arguments),this._=s={},s.ignoreMatch=!1,s.ignoreNextFocus=!1,f=this,c={minLength:0,showAll:!0,trimTrailingSpaces:!1,mustMatch:!1,inputMap:void 0,renderer:void 0,matchType:"contains",placeholder:void 0,filter:void 0,filterOptions:void 0,showOtherResults:!1,allowTabCompletion:!0,noResultsMessage:"No results found",otherResultsMessage:"Other Results"},s.data=new hx.Map,hx.isFunction(this.data)?s.callback=this.data:s.data.set("",this.data),hx.isArray(this.data)||hx.isFunction(this.data)?(this.options=hx.merge(!0,c,this.options),null!=this.options.inputMap&&(a={searchValues:function(t){return[f.options.inputMap(t)]}}),this.options.filterOptions=hx.merge({},a,this.options.filterOptions),null==(l=this.options).filter&&(l.filter=function(t,e){return hx.filter[f.options.matchType](t,e,f.options.filterOptions)}),null==(h=this.options).renderer&&(h.renderer=null!=this.options.inputMap?function(t,e){return hx.select(t).text(f.options.inputMap(e))}:function(t,e){return hx.select(t).text(e)}),null==(u=this.options).placeholder&&(u.placeholder=this.options.minLength>0?"Min length "+this.options.minLength+" characters":void 0),p=hx.select(this.selector),d=new hx.Menu(this.selector,"down","","hx-autocomplete-dropdown"),d.on("input",function(t){return f.options.allowTabCompletion&&9===(t.which||t.keyCode)?t.preventDefault():void 0}),d.pipe(this,void 0,["keydown"]),s.setInputValue=null!=this.options.inputMap?function(t){return p.value(f.options.inputMap(t)),s.suppressEvents?void 0:f.emit("change",t)}:function(t){return p.value(t),s.suppressEvents?void 0:f.emit("change",t)},null!=this.options.placeholder&&p.attr("placeholder",this.options.placeholder),p.on("focus",function(t){return s.ignoreNextFocus?void 0:(s.cleanUp=!1,f.show())},!0),p.on("blur",function(t){return null!=t.relatedTarget&&f.hide(),s.ignoreNextFocus=!1},!0),x=void 0,p.on("input",function(){return s.cleanUp=!1,clearTimeout(x),s.initialValue=p.value(),x=setTimeout(function(){return p.value()!==s.prevTerm?e.call(f,p.value()||""):void 0},200)}),d.renderer=function(t,e){var n;return n=hx.select(t),n.style("font-weight",""),e.unselectable||e.heading?(n.text(e.text).on("click",function(){return void 0}),e.heading?n.style("font-weight","600"):void 0):f.options.renderer(t,e)},d.on("select",function(t){var e,n;if(e=null!=t&&null!=(n=t.content)?n.content:void 0,null!=e){if(!(null!=e?e.unselectable:void 0)&&!(null!=e?e.heading:void 0)&&!(null!=e?e.disabled:void 0))if("tab"===t.type){if(f.options.allowTabCompletion)return s.setInputValue(e),s.ignoreMatch=!0,f.hide(),f.emit("select",e)}else{if(null==s.initialValue&&t.index>-1)return s.initialValue=p.value();if(-1===t.index&&null!=s.initialValue)return p.value(s.initialValue);if(s.setInputValue(e),"click"===t.type||"enter"===t.type)return s.ignoreMatch=!0,f.hide(),f.emit("select",e),s.ignoreNextFocus=!0}}else if("enter"===t.type)return s.ignoreMatch=!1,f.hide(),p.value().length>0&&f.emit("select",p.value()),s.ignoreNextFocus=!0}),d.on("show",function(){return s.initialValue=p.value(),d.dropdown.useScroll=!0}),d.on("hide",function(){var t;return s.cleanUp=!0,s.ignoreMatch||f.options.mustMatch&&p.value().length>0&&(t="external"===f.options.matchType?s.data.get(p.value()):n.call(f,p.value(),!0),t!==!0&&(null!=t?t.length:void 0)>0?(t=null!=t?t.filter(function(t){return t=null!=f.options.inputMap?f.options.inputMap(t):t,t.toLowerCase()===p.value().toLowerCase()}):void 0,(null!=t?t.length:void 0)>0?s.setInputValue(t[0]):p.value("")):p.value("")),s.ignoreMatch=!1,f.clearCache(),s.suppressEvents||f.emit("hide",p.value()),void(s.suppressEvents=!1)}),d.on("click",function(){return s.ignoreMatch=!0},!0),s.menu=d,s.input=p):hx.consoleWarning("AutoComplete - ",this.selector,": data set incorrectly - you supplied: ",this.data," but should have been an array of items or a function")}return r(o,t),o.prototype.clearCache=function(){return this._.data=new hx.Map,null==this.data||hx.isFunction(this.data)||this._.data.set("",this.data),this},o.prototype.show=function(){return this._.ignoreNextFocus=!1,i.call(this),this},o.prototype.hide=function(t){var e;return null==t&&(t=!1),e=this._,e.suppressEvents=t,e.ignoreNextFocus=!1,e.menu.dropdown.isOpen()&&(e.menu.hide(),e.prevTerm=void 0,e.cleanUp=!0),this},o}(hx.EventEmitter),hx.AutoComplete=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.add=function(e){var n;return n=new t(this.x,this.y),null!==e&&(isNaN(e.x)||(n.x+=e.x),isNaN(e.y)||(n.y+=e.y)),n},t.prototype.subtract=function(e){var n;return n=new t(this.x,this.y),null!==e&&(isNaN(e.x)||(n.x-=e.x),isNaN(e.y)||(n.y-=e.y)),n},t.prototype.min=function(e){var n;return n=new t(this.x,this.y),null!==e&&(!isNaN(e.x)&&this.x>e.x&&(n.x=e.x),!isNaN(e.y)&&this.y>e.y&&(n.y=e.y)),n},t.prototype.max=function(e){var n;return n=new t(this.x,this.y),null!==e&&(!isNaN(e.x)&&this.x<e.x&&(n.x=e.x),!isNaN(e.y)&&this.y<e.y&&(n.y=e.y)),n},t.prototype.bound=function(t,e){var n;return n=this.max(t),n.min(e)},t.prototype.check=function(){var e;return e=new t(this.x,this.y),isNaN(e.x)&&(e.x=0),isNaN(e.y)&&(e.y=0),e},t.prototype.apply=function(t){return isNaN(this.x)||t.style("left",this.x+"px"),isNaN(this.y)?void 0:t.style("top",this.y+"px")},t}(),t=function(t){function i(t,n,r,o){var s;null==n&&(n="#000"),this.showInputs=null!=r?r:0,null==o&&(o="lblt"),i.__super__.constructor.apply(this,arguments),"string"==typeof n?this.currentColor=hx.color(n):this.currentColor=n,s=function(n){return function(i){var r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M,C,D,T,P,A,L,N,E,z,V,I,O,B,R,W,F,H,Y,j,q,X,U,Z,G,K,J;return a=function(t){return t=t?t:window.event,t.stopPropogation&&t.stopPropogation(),t.preventDefault&&t.preventDefault(),t.cancelBubble=t.cancel=!0,t.returnValue=!1,!1},v=function(t,e,n){return n?t.subtract(e):t.add(e)},b=function(t){var n,r;return t=t?t:window.event,isNaN(t.layerX)&&t.offsetX?n=new e(t.offsetX,t.offsetY):(r=t.touches||t.targetTouches)?(i=hx.select(r[0].target).box(),n=new e(r[0].pageX-i.left-window.scrollX,r[0].pageY-i.top-window.scrollY)):n=new e(t.layerX,t.layerY),v(n,V,!0)},r=function(t){var n;return t=t?t:window.event,isNaN(window.scrollX)&&t.clientX?new e(t.clientX+document.documentElement.scrollLeft+document.body.scrollLeft,t.clientY+document.documentElement.scrollTop+document.body.scrollTop):(n=t.touches||t.targetTouches)?new e(n[0].clientX+window.scrollX,n[0].clientY+window.scrollY):new e(t.clientX+window.scrollX,t.clientY+window.scrollY)},w=function(t){return t=t?t:window.event,t.target?t.target:t.srcElement},m=function(){return n.showInputs&&J.style("background",n.currentColor.toString()),n.emit("changeend",n.currentColor)},g=function(t){var i,r;return n.showInputs&&(D.value(n.currentColor.toString().toUpperCase()),R.value(n.currentColor.r),S.value(n.currentColor.g),s.value(n.currentColor.b),P.value(Math.round(360*n.currentColor.h)),F.value(Math.round(100*n.currentColor.s)),N.value(Math.round(100*n.currentColor.l)),I.style("background",n.currentColor.toString())),("slider"===t||"box"===t)&&(i=hx.color().setHSL([n.currentColor.h,1,.5]),_.style("background-color",i.toString())),"box"===t&&(Z.style("top",M-n.currentColor.h*M-U.y+"px"),r=new e(n.currentColor.s*M,(1-n.currentColor.l)*M),r=v(r,p,!0),r.apply(d),m()),n.emit("change",n.currentColor)},C=function(t){return hx.color.isColorString(D.value())?(n.currentColor=hx.color(D.value()),g("box")):void 0},B=function(t){return n.currentColor.setRGB([parseInt(R.value())||0,n.currentColor.g,n.currentColor.b]),g("box")},k=function(t){return n.currentColor.setRGB([n.currentColor.r,parseInt(S.value())||0,n.currentColor.b]),g("box")},o=function(t){return n.currentColor.setRGB([n.currentColor.r,n.currentColor.g,parseInt(s.value())||0]),g("box")},T=function(t){return n.currentColor.setHSL([parseFloat(P.value())||0,n.currentColor.s,n.currentColor.l]),g("box")},W=function(t){return n.currentColor.setHSL([n.currentColor.h,parseFloat(F.value())/100||0,n.currentColor.l]),g("box")},L=function(t){return n.currentColor.setHSL([n.currentColor.h,n.currentColor.s,parseFloat(N.value())/100||0]),g("box")},X=function(t,e){return t=v(t,U,!1),n.currentColor.setHSL([(M-t.y)/M,n.currentColor.s,n.currentColor.l]),g("slider")},c=function(t,e){return t=v(t,p,!1),n.currentColor.setHSL([n.currentColor.h,t.x/M,1-t.y/M]),g("circle")},Y=function(t,e){var n;return n=b(t),w(t)===e.node()&&(n.y+=parseInt(e.style("top"))),n=v(n,U,!0),n=n.bound(K,G),n.apply(e),X(n)},l=function(t,e){var n;return n=b(t),w(t)===e.node()&&(n.x+=parseInt(e.style("left")),n.y+=parseInt(e.style("top"))),n=v(n,p,!0),n=n.bound(x,f),n.apply(e),c(n)},y=function(t,n,i,o,s,l,h){var u,c,p,d,f,x,g,v,y,m,w,b;return p=m=y=w=d=null,null!==i&&null!==o&&(b=i.min(o),o=i.max(o),i=b),x=function(n){return y||!w||d?void 0:(y=!0,null!==s&&s(n,t),p=r(n),m=new e(parseInt(t.style("left")),parseInt(t.style("top"))),m=m.check(),hx.select(document).on("touchmove",f),hx.select(document).on("touchend",v),hx.select(document).on("mousemove",f),hx.select(document).on("mouseup",v))},f=function(e){var n;if(y&&!d)return n=r(e),n=n.add(m).subtract(p),n=n.bound(i,o),n.apply(t),null!==l&&l(n,t),a(e)},v=function(t){return g(),a(t)},g=function(){return!y||d?!0:(hx.select(document).off("touchmove",f),hx.select(document).off("touchend",v),hx.select(document).off("mousemove",f),hx.select(document).off("mouseup",v),p=m=null,null!==h&&h(t),y=!1)},u=function(){return w||d?void 0:(w=!0,n.on("touchstart",x),n.on("mousedown",x))},c=function(){return w&&!d?(n.off("touchstart",x),n.off("mousedown",x),
stopCurrentDragging&&y?g():void 0):void 0},u()},O=Math.round(99999*Math.random()),A=n.showInputs?"<div id='hx-colorpicker-inputs_"+O+"' class='hx-colorpicker-inputs'>\n  <div class='hx-colorpicker-input-group'>\n    <div id='hx-colorpicker-quickColor_"+O+"' class='hx-colorpicker-quickColor'></div><div id='hx-colorpicker-staticColor_"+O+"' class='hx-colorpicker-quickColor'></div>\n  </div>\n  <div class='hx-colorpicker-input'><label for='hex'>Hex:</label><input name='hex' id='hx-colorpicker-input-hex_"+O+"' type='text' size='7' maxlength='7' /></div>\n  <div class='hx-colorpicker-input-group'>\n    <div class='hx-colorpicker-input'><label for='red'>R:</label><input name='red' id='hx-colorpicker-input-red_"+O+"' type='text' size='7' maxlength='3' /></div>\n    <div class='hx-colorpicker-input'><label for='green'>G:</label><input name='green' id='hx-colorpicker-input-green_"+O+"' type='text' size='7' maxlength='3' /></div>\n    <div class='hx-colorpicker-input'><label for='blue'>B:</label><input name='blue' id='hx-colorpicker-input-blue_"+O+"' type='text' size='7' maxlength='3' /></div>\n  </div>\n  <div class='hx-colorpicker-input-group'>\n    <div class='hx-colorpicker-input'><label for='hue'>H:</label><input name='hue' id='hx-colorpicker-input-hue_"+O+"' type='text' size='7' maxlength='3' /></div>\n    <div class='hx-colorpicker-input'><label for='saturation'>S:</label><input name='saturation' id='hx-colorpicker-input-saturation_"+O+"' type='text' size='7' maxlength='3' /></div>\n    <div class='hx-colorpicker-input'><label for='lightness'>L:</label><input name='lightness' id='hx-colorpicker-input-lightness_"+O+"' type='text' size='7' maxlength='3' /></div>\n  </div>\n</div>":"",z="<div id='hx-colorpicker_"+O+"' class='hx-colorpicker'>\n  <div class='hx-colorpicker-inner'>\n    <div class='hx-colorpicker-fields'>\n      <div id='hx-colorpicker-grid_"+O+"' class='hx-colorpicker-grid'>\n        <div id='hx-colorpicker-circlePicker_"+O+"' class='hx-colorpicker-picker'></div>\n      </div>\n      <div id='hx-colorpicker-slider_"+O+"' class='hx-colorpicker-slider'>\n        <div id='hx-colorpicker-sliderPicker_"+O+"' class='hx-colorpicker-picker'></div>\n      </div>\n    </div>\n    "+A+"\n  </div>\n</div>","string"==typeof t&&(t=hx.select(t)),E=hx.select(i).html(z),_=hx.select("#hx-colorpicker-grid_"+O),H=hx.select("#hx-colorpicker-slider_"+O),Z=hx.select("#hx-colorpicker-sliderPicker_"+O),d=hx.select("#hx-colorpicker-circlePicker_"+O),n.showInputs&&(D=hx.select("#hx-colorpicker-input-hex_"+O),R=hx.select("#hx-colorpicker-input-red_"+O),S=hx.select("#hx-colorpicker-input-green_"+O),s=hx.select("#hx-colorpicker-input-blue_"+O),P=hx.select("#hx-colorpicker-input-hue_"+O),F=hx.select("#hx-colorpicker-input-saturation_"+O),N=hx.select("#hx-colorpicker-input-lightness_"+O),I=hx.select("#hx-colorpicker-quickColor_"+O),J=hx.select("#hx-colorpicker-staticColor_"+O),D.on("change",C),R.on("change",B),S.on("change",k),s.on("change",o),P.on("change",T),F.on("change",W),N.on("change",L),I.style("background",n.currentColor.toString()),J.style("background",n.currentColor.toString())),q=Z.node().offsetHeight,u=d.node().offsetHeight,M=_.node().offsetHeight-2,K=new e(0,-q/2),G=new e(0,M-q/2),x=new e(-(u/2),-(u/2)),f=new e(M-u/2,M-u/2),V=new e(navigator.userAgent.indexOf("Firefox")>=0?1:0,navigator.userAgent.indexOf("Firefox")>=0?1:0),p=new e(u/2,u/2),U=new e(0,q/2),j=h="",j=new y(Z,H,K,G,Y,X,m),h=new y(d,_,x,f,l,c,m),g("box")}}(this),new hx.Dropdown(t,s,"click",o)}return n(i,t),i}(hx.EventEmitter),hx.ColorPicker=t}(),function(){var t;t=function(){function t(t,n,i){this.domainMin=null!=t?t:0,this.domainMax=null!=n?n:10,this.rangeArr=i,this.rangeArr=this.rangeArr.sort(function(t,e){return t.val-e.val}),this.rangeMin=this.rangeArr[0].val,this.rangeMax=this.rangeArr[this.rangeArr.length-1].val,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax)}var e;return e=function(t,e,n,i){var r;return r=e-t,0!==r?(i-n)/r:1},t.prototype.apply=function(t){var e,n,i,r,o,s,a,l,h;switch(r=this.rangeMin+(t-this.domainMin)*this.factor,!1){case!(r<this.rangeMin):e=this.rangeArr[0].color;break;case!(r>this.rangeMax):e=this.rangeArr[this.rangeArr.length-1].color;break;default:for(n=i=0,h=this.rangeArr.length-1;h>i;n=i+=1)if(r>=this.rangeArr[n].val&&r<=this.rangeArr[n+1].val){a=n+1;break}o=r-this.rangeArr[a-1].val,l=this.rangeArr[a].val-this.rangeArr[a-1].val,s=hx.clamp(0,1,o/l),e=hx.color(this.rangeArr[a-1].color).mix(hx.color(this.rangeArr[a].color),s)}return e.toString()},t.prototype.domain=function(t,n){return this.domainMin=t,this.domainMax=n,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax),this},t.prototype.range=function(t){return this.rangeArr=t,this.factor=e(this.domainMin,this.domainMax,this.rangeMin,this.rangeMax),this},t}(),hx.ColorScale=t}(),function(){var t;t=function(){function t(t){this.selector=t}return t.prototype.render=function(t,e,n){var i,r,o,s;return null==n&&(n="/"),i=function(t,e){return e%2===0?this.append("span")["class"]("hx-crumbtrail-node").node():this.append("span")["class"]("hx-crumbtrail-separator").html(n).node()},o=function(t,n,i){return i%2===0?e(n,t):void 0},r=hx.flatten(t.map(function(t){return[t,0]})).slice(0,-1),s=hx.select(this.selector).view("span").enter(i).update(o).apply(r)},t}(),hx.Crumbtrail=t}(),function(){var t,e,n,i,r,o,s=function(t,e){function n(){this.constructor=t}for(var i in e)a.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},a={}.hasOwnProperty;r=function(){var t,e,n,i;return e=hx.select(this.selection.node().parentNode),i=[],n=-1,t=!0,e.selectAll(".hx-widget").each(function(e){var r;return e=hx.select(e),r=e.box(),e.classed("hx-widget-current")&&(t=!1),i.push({index:n+=1,x1:r.left,x2:r.left+r.width,y1:r.top,y2:r.top+r.height,width:r.width,node:e,before:t})}),i},o=function(t){var e;return e=this._,e.dragging?(t.event.preventDefault(),i.call(this,t)):t.event.which<2?(e.dragging=!0,e.origScrollY=window.pageYOffset,e.origScrollX=window.pageXOffset,this.selection.classed("hx-widget-current",!0),e.grid=r.call(this),e.origWidth=this.selection.style("width").replace("px",""),e.origHeight=this.selection.style("height").replace("px",""),this.selection.classed("hx-widget-drag",!0),e.placeholder=this.selection.insertAfter("div")["class"]("hx-widget-placeholder hx-group hx-vertical"),e.placeholder.style("min-height",e.origHeight+"px").append("div"),this.selection.style("width",e.origWidth+"px"),e.placeholderBox=e.placeholder.box(),e.controlBox=this.dragControl.box(),e.selectionBox=this.selection.box(),e.parentBox=hx.select(this.selection.node().parentNode).box(),n.call(this,t),e.currentPos=-1,this.emit("dragstart")):void 0},n=function(t){var e,n,i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m;if(e=this._,e.dragging){for(x=0,e.resizeOnDrag&&(this.selection.style("width",e.placeholderBox.width+"px"),x=e.placeholderBox.width-e.origWidth),i=e.controlBox.left+e.controlBox.width/2,r=e.controlBox.top+e.controlBox.height/2,d=e.parentBox.left-e.selectionBox.left,f=e.parentBox.top-e.selectionBox.top,c=window.scrollX-e.origScrollX,p=window.scrollY-e.origScrollY,v=t.x-d-i+c-x,m=t.y-f-r+p,this.selection.style("left",v+"px"),this.selection.style("top",m+"px"),g=t.x+c,y=t.y+p,h=e.grid,u=[],o=0,l=h.length;l>o;o++){if(n=h[o],s=g>=n.x1&&g<=n.x2,a=y>=n.y1&&y<=n.y2,s&&a){e.currentPos!==n.index&&e.currentPos>-1&&(n.before?n.node.insertBefore(e.placeholder):n.node.insertAfter(e.placeholder),e.placeholderBox=e.placeholder.box(),this.emit("drag")),e.currentPos=n.index;break}u.push(void 0)}return u}},i=function(t){var e;return e=this._,e.dragging?(e.dragging=!1,e.placeholder.insertAfter(this.selection),e.placeholder.remove(),this.selection.style("top",""),this.selection.style("left",""),this.selection.style("width",""),this.selection.classed("hx-widget-drag",!1),this.selection.classed("hx-widget-current",!1),this.emit("dragend")):void 0},t=function(){function t(t){this.selection=hx.select(t).classed("hx-layout",!0).classed("hx-group",!0).classed("hx-horizontal",!0).classed("hx-dashboard",!0)}return t.prototype.createWidget=function(t){return new e(this.selection.append("div").node(),t)},t.prototype.order=function(t){var e,n,i,r,o,s,a,l;if(l=this.selection.selectAll(".hx-widget").nodes,e=l.map(function(t){return hx.select.getHexagonElementDataObject(t).widget.id}),!l.some(function(t){return!hx.select.getHexagonElementDataObject(t).widget.id})){if(arguments.length>0){if(t.slice(0).sort().join("")===e.sort().join("")){for(n=0,o=t.length;o>n;n++)for(i=t[n],r=0,s=l.length;s>r;r++)if(a=l[r],hx.select.getHexagonElementDataObject(a).widget.id===i){this.selection.append(a);break}}else hx.consoleWarning("Dashboard.order(order): Incorrect value(s) specified for order array","The widgets in the dashboard does not match the widgets in the order array.","\nOrder: ",t,"\nWidgets: ",e);return this}return e}hx.consoleWarning("Dashboard.order: Id's must be specified for every element","Some widgets in the dashboard were not created with an id.","Every widget must have an id to enable sorting.")},t}(),e=function(t){function e(t,r){var s,a,l,h;e.__super__.constructor.apply(this,arguments),h=this,s=this._={},this.selection=hx.select(t),hx.select.getHexagonElementDataObject(this.selection.node(),!0).widget=this,this.selection["class"]("hx-widget hx-group hx-vertical").style("-webkit-flex-basis",r.width||"500px").style("-ms-flex-preferred-size",r.width||"500px").style("-o-flex-basis",r.width||"500px").style("flex-basis",r.width||"500px"),r.id&&(this.id=r.id),l=this.selection.append("div")["class"]("hx-widget-heading hx-section hx-fixed"),l.append("span").text(r.title),this.menuButton=l.append("button")["class"]("hx-btn hx-btn-invisible"),this.menuButton.append("i")["class"]("fa fa-bars"),this.body=this.selection.append("div")["class"]("hx-widget-body-wrapper hx-section").append("div")["class"]("hx-widget-body").style("height",r.height?r.height:""),this.menu=new hx.Menu(this.menuButton.node(),"rbrt"),this.menu.renderer=function(t,e){var n;return n=hx.select(t).classed("hx-widget-menu-item",!0),n.append("i")["class"]("fa "+e.icon),n.append("span").text(e.name)},this.showMenu(r.showMenu),s.draggable=!1,(r.draggable||r.showDragControl)&&(s.draggable=!0,s.resizeOnDrag=r.resizeOnDrag||!1,this.dragControl=l.append("button")["class"]("hx-btn hx-btn-invisible hx-drag-control"),this.dragControl.append("i")["class"]("fa fa-arrows"),a="widget-"+hx.randomId(),this.dragControl.on("pointerdown",a,function(t){return o.call(h,t)}),hx.select(document).on("pointermove",a,function(t){return n.call(h,t)}),hx.select(document).on("pointerup",a,function(t){return i.call(h,t)}),this.showDragControl(r.showDragControl))}return s(e,t),e.prototype.remove=function(){return this.selection.style("max-width",this.selection.style("width")).morph()["with"]("fadeout").thenStyle("max-width","0px").andStyle("height","0px").then(function(t){return function(){return t.selection.remove()}}(this)).go()},e.prototype.title=function(t){return this.selection.select(".hx-widget-heading").select("span").text(t)},e.prototype.showMenu=function(t){return this._.menuVisible=t,this.menuButton.style("display",t?"":"none"),this._.dragVisible?this.dragControl.style("right",this._.menuVisible?this.menuButton.width()+"px":""):void 0},e.prototype.showDragControl=function(t){return this._.draggable?(this._.dragVisible=t,this.dragControl.style("display",t?"":"none"),this.dragControl.style("right",this._.menuVisible?this.menuButton.width()+"px":"")):void 0},e}(hx.EventEmitter),hx.Dashboard=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e,i){var r,o;this.selector=t,this.type=e,this.showSeconds=i,n.__super__.constructor.apply(this,arguments),this.suppressCallback=!1,this.selection=hx.select(this.selector).classed("hx-date-time-picker",!0),r=this.selection.append("div").node(),o=this.selection.append("div").node(),this.datePicker=new hx.DatePicker(r,this.type),this.timePicker=new hx.TimePicker(o,this.showSeconds),this.datePicker.on("change",function(t){return function(){return t.timePicker.date(t.datePicker.date(),!1,!0),t.suppressCallback||t.emit("change",t.date()),t.suppressCallback=!1}}(this)),this.timePicker.on("change",function(t){return function(){return t.datePicker.date(t.date(),!1,!0),t.suppressCallback||t.emit("change",t.date()),t.suppressCallback=!1}}(this))}var i;return e(n,t),n.prototype.date=function(t,e,n){var i;return this.suppressCallback=n||!1,i=this.timePicker.date(t,e,n),i instanceof Date?i:this},n.prototype.year=function(t,e){var n;return this.suppressCallback=e||!1,n=this.datePicker.year(t,e),isNaN(n)?this:n},n.prototype.month=function(t,e){var n;return this.suppressCallback=e||!1,n=this.datePicker.month(t,e),isNaN(n)?this:n},n.prototype.day=function(t,e){var n;return this.suppressCallback=e||!1,n=this.datePicker.day(t,e),isNaN(n)?this:n},n.prototype.hour=function(t,e){var n;return this.suppressCallback=e||!1,n=this.timePicker.hour(t,e),isNaN(n)?this:n},n.prototype.minute=function(t,e){var n;return this.suppressCallback=e||!1,n=this.timePicker.minute(t,e),isNaN(n)?this:n},n.prototype.second=function(t,e){var n;return this.suppressCallback=e||!1,n=this.timePicker.second(t,e),isNaN(n)?this:n},n.prototype.getScreenDate=function(){return this.datePicker.getScreenDate()},n.prototype.getScreenTime=function(){return this.timePicker.getScreenTime()},n.prototype.addDays=function(t){return this.datePicker.addDays(t)},n.prototype.addMonths=function(t){return this.datePicker.addMonths(t)},n.prototype.addYears=function(t){return this.datePicker.addYears(t)},n.prototype.addHours=function(t){return this.timePicker.addHours(t)},n.prototype.addMinutes=function(t){return this.timePicker.addMinutes(t)},n.prototype.addSeconds=function(t){return this.timePicker.addSeconds(t)},n.prototype.update=function(t){return this.timePicker.update(t),this.datePicker.update(t)},i=function(t,e,n){return hx.deprecatedWarning(t+": DateTimePicker."+e,"Use DateTimePicker."+n+" instead.")},n.prototype.getDate=function(){return i(this.selector,"getDate()","date()"),this.date()},n.prototype.getHour=function(){return i(this.selector,"getHour()","hour()"),this.hour()},n.prototype.getMinute=function(){return i(this.selector,"getMinute()","minute()"),this.minute()},n.prototype.getSecond=function(){return i(this.selector,"getSecond()","second()"),this.second()},n.prototype.setDate=function(t,e,n){return this.suppressCallback=null!=n?n:!1,i(this.selector,"setDay(day, suppressCallback)","day(day, suppressCallback)"),this.date.apply(this,arguments)},n.prototype.setDay=function(t,e){return i(this.selector,"setDay(day, suppressCallback)","day(day, suppressCallback)"),this.day.apply(this,arguments)},n.prototype.setMonth=function(t,e){return i(this.selector,"setMonth(month, suppressCallback)","month(month, suppressCallback)"),this.month.apply(this,arguments)},n.prototype.setYear=function(t,e){return i(this.selector,"setYear(year, suppressCallback)","year(year, suppressCallback)"),this.year.apply(this,arguments)},n.prototype.setHour=function(t,e){return i(this.selector,"setHour(hour, suppressCallback)","hour(hour, suppressCallback)"),this.hour.apply(this,arguments)},n.prototype.setMinute=function(t,e){return i(this.selector,"setMinute(minute, suppressCallback)","minute(minute, suppressCallback)"),this.minute.apply(this,arguments)},n.prototype.setSecond=function(t,e){return i(this.selector,"setSecond(second, suppressCallback)","second(second, suppressCallback)"),this.second.apply(this,arguments)},n}(hx.EventEmitter),hx.DateTimePicker=t}(),function(){var t,e,n,i;n=function(t,e,n,i,r,o){return t>=n&&r>=t&&e>=i&&o>=e},e=function(t,e,n,i,r,o,s,a){var l,h,u,c,p,d;return h=n-t,c=i-e,u=s-r,p=a-o,l=(-c*(t-r)+h*(e-o))/(-u*c+h*p),d=(u*(e-o)-p*(t-r))/(-u*c+h*p),l>=0&&1>=l&&d>=0&&1>=d},t=function(t,e,n,i,r,o,s){var a;return e===i?s===e&&(t>=r&&o>=t||n>=r&&o>=n||r>t&&n>o):(a=t+(s-e)*(n-t)/(i-e),a>=r&&o>=a)},i=function(t,e,n,i,r,o,s){var a;return t===n?s===t&&(e>=r&&o>=e||i>=r&&o>=i||r>e&&i>o):(a=e+(s-t)*(i-e)/(n-t),a>=r&&o>=a)};var r;r=function(){function t(){this.c=hx.color()}return t.prototype.set=function(t,e){switch(t){case"color":return this.c=hx.color(e);case"color.red":return this.c.r=hx.clamp(0,255,e);case"color.green":return this.c.g=hx.clamp(0,255,e);case"color.blue":return this.c.b=hx.clamp(0,255,e);case"color.alpha":return this.c.a=hx.clampUnit(e)}},t}();var o;o=function(){function t(t){this.id=null!=t?t:hx.randomId(),this.attr=new hx.Map,this.properties=new hx.Map,this.selectable=this.addDiscreteProperty("selectable"),this.selected=!1}return t.prototype.addDiscreteProperty=function(t,e){var n;return null==e&&(e=!1),n=new a(e),this.properties.set(t,n),n},t.prototype.addNumberProperty=function(t,e){var n;return null==e&&(e=0),n=new l(e),this.properties.set(t,n),n},t.prototype.addColorProperty=function(t,e){var n;return null==e&&(e="#FFF"),n=new s(e),this.properties.set(t,n),n},t.prototype.addStringProperty=function(t,e){var n;return null==e&&(e=""),n=new h(e),this.properties.set(t,n),n},t.prototype.set=function(t,e,n,i){return this.properties.has(t)?this.properties.get(t).set(e,n,i):hx.startsWith(t,"attr.")?this.attr.set(t.substring(5),e):console.warn("unknown property: ",t,Error().stack),this},t.prototype.get=function(t){return this.properties.has(t)?this.properties.get(t).value:hx.startsWith(t,"attr.")?this.attr.get(t.substring(5)):void 0},t.prototype.drawBoundingBox=function(t,e){var n,i;return n=this.getBoundingBox(t),n?(e.setStrokeColor(hx.color("rgba(64, 64, 64, 1)")),i=2,e.setStrokeWidth(Math.min(1,.95/e.camera.actualZoom)),t.strokeRect(n[0]-i,n[1]-i,n[2]-n[0]+2*i,n[3]-n[1]+2*i),e.setFillColor(hx.color("rgba(128, 128, 128, 0.1)")),t.fillRect(n[0]-i,n[1]-i,n[2]-n[0]+2*i,n[3]-n[1]+2*i)):void 0},t.prototype.pointInBoundingBox=function(t,e){var i;return i=this.getBoundingBox(e),n(t.x,t.y,i[0],i[1],i[2],i[3])},t}();var s,a,l,h;s=function(){function t(t){this.value=hx.color(),hx.defined(t)&&this.set(t)}return t.prototype.set=function(t,e,n){var i,r,o,s,a,l,h,u,c,p,d;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(p=this.value.r,c=this.value.g,u=this.value.b,h=this.value.a,i=hx.color(t),l=i.r,a=i.g,s=i.b,o=i.a,r=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,d=function(t){return function(e,n){return n?void 0:(t.value.r=p+(l-p)*e,t.value.g=c+(a-c)*e,t.value.b=u+(s-u)*e,t.value.a=h+(o-h)*e)}}(this),this.stop=hx.transition(e,d,hx.ease.linear,r)):this.value=hx.color(t)},t}(),l=function(){function t(t){this.value=t,this.stop=void 0}return t.prototype.set=function(t,e,n){var i,r,o;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(r=this.value,i=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,o=function(e){return function(n,i){return i?void 0:e.value=r+(t-r)*n}}(this),this.stop=hx.transition(e,o,hx.ease.linear,i)):this.value=t},t}(),h=function(){function t(t){this.value=t,this.stop=void 0}return t.prototype.set=function(t,e,n){var i,r,o;return hx.defined(this.stop)&&(this.stop(),this.stop=void 0),hx.defined(e)?(r=hx.interpolate(this.value,t),i=n?function(t){return function(e){return t.stop=void 0,n(!e,t.value)}}(this):void 0,o=function(t){return function(e,n){return n?void 0:t.value=r(e)}}(this),this.stop=hx.transition(e,o,hx.ease.linear)):this.value=t},t}(),a=function(){function t(t){this.value=t}return t.prototype.set=function(t){return this.value=t},t}();var u;u=function(){function t(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}return t.prototype.set=function(t){return this.x=t.x,this.y=t.y},t.prototype.tweenTo=function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e},t.prototype.distanceTo=function(t){return Math.sqrt((this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y))},t.prototype.distanceToSquared=function(t){return(this.x-t.x)*(this.x-t.x)+(this.y-t.y)*(this.y-t.y)},t}();var c,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;c=function(t){function e(t){var n,i,p,d;this.drawing=t,e.__super__.constructor.apply(this,arguments),this.position=new u,this.zoom=1,this.actualPosition=new u,this.actualZoom=1,this.smoothPosition=!1,this.positionSmoothingFactor=.15,this.smoothZoom=!0,this.zoomSmoothingFactor=.15,this.zoomMax=null,this.zoomMin=null,this.xMin=null,this.yMin=null,this.xMax=null,this.yMax=null,this.mode=null,this.followContinualZoom=!1,this.smoothToNextTargetPosition=!1,this.lastx1=0,this.lasty1=0,this.lastx2=0,this.lasty2=0,this.lastZoom=1,this.isZoomTouch=!1,this.moving=!1,this.panEnabled=!1,this.zoomEnabled=!1,this.selectionEnabled=!1,n={selection:hx.select(this.drawing.canvasNode),positionLast:new u,touchStart:new u,mouseDown:!1,moveThreshold:5*this.drawing.dpr,longPressTime:1e3,longPressTimer:null,didLongPress:!1},i=function(t){return function(e){return s.call(t,e,n)}}(this),d=function(t){return function(e){return l.call(t,e,n)}}(this),p="drawing-"+hx.randomId(),hx.select(document).on("mouseup",p,i,!0),hx.select(document).on("touchend",p,d,!0),hx.select(this.drawing.canvasNode).on("mousemove",function(t){return function(e){return o.call(t,e,n)}}(this),!0),n.selection.on("mousedown",function(t){return function(e){return r.call(t,e,n)}}(this)),n.selection.on("wheel",function(t){return function(e){return a.call(t,e,n)}}(this)),hx.select(this.drawing.canvasNode).on("touchstart",function(t){return function(e){return c.call(t,e,n)}}(this),!0),n.selection.on("touchmove",function(t){return function(e){return h.call(t,e,n)}}(this)),n.selection.on("touchcancel",function(t){return function(e){return l.call(t,e,n)}}(this))}var n,i,r,o,s,a,l,h,c,d,f;return p(e,t),f=function(t){return this.zoom=t,this.emit("zoom",{zoom:t})},r=function(t,e){var n,i;return t.preventDefault(),this.mouseDown=!0,n=t.clientX,i=t.clientY,e.touchStart.x=n,e.touchStart.y=i,this.emit("pointerdown",{x:n,y:i})},o=function(t,e){var n,i,r,o;return this.panEnabled&&this.mouseDown&&t.preventDefault(),r=t.clientX,o=t.clientY,this.mouseDown&&(!this.moving&&(e.touchStart.x-r)*(e.touchStart.x-r)+(e.touchStart.y-o)*(e.touchStart.y-o)>e.moveThreshold*e.moveThreshold&&(this.moving=!0,e.positionLast.set(e.touchStart),this.panEnabled&&e.selection.style("cursor","move")),this.moving)?(n=r-e.positionLast.x,i=o-e.positionLast.y,e.positionLast.x=t.clientX,e.positionLast.y=t.clientY,d.call(this,n,i)):void 0},s=function(t,e){return this.mouseDown?(t.preventDefault(),this.mouseDown=!1,this.moving?this.moving=!1:n.call(this,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),e.selection.style("cursor","default"),this.emit("pointerup",{x:e.touchStart.x,y:e.touchStart.y})):void 0},d=function(t,e,n){return this.panEnabled?(this.mode=void 0,this.smoothToNextTargetPosition=!1,this.position.x-=t*this.drawing.dpr/this.actualZoom,this.position.y-=e*this.drawing.dpr/this.actualZoom,this.emit("move",{dx:t,dy:e})):void 0},a=function(t,e){var n,i,r,o,s,a;return this.zoomEnabled?(t.preventDefault(),t.stopPropagation(),n=-t.deltaY,1===t.deltaMode&&(n*=20),i=Math.min(.99,Math.abs(n/120*.2)),r=t.clientX,o=t.clientY,s=this.getWorldX(r),a=this.getWorldY(o),f.call(this,n>0?this.zoom/(1-i):this.zoom*(1-i))):void 0},c=function(t,e){var n,r,o,s,a,l,h;if(t.preventDefault(),this.mouseDown=!0,n=t.changedTouches,n.length>0)for(o=s=0,a=n.length-1;a>=s;o=s+=1)l=n[o].clientX,h=n[o].clientY,this.emit("pointerdown",{x:l,y:h});return 1===t.targetTouches.length?(l=t.targetTouches[0].clientX,h=t.targetTouches[0].clientY,e.touchStart.x=l,e.touchStart.y=h,r=!1,e.longPressTimer=setTimeout(function(t){return function(){return i.call(t,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),r=!0}}(this),e.longPressTime)):2===t.targetTouches.length?(e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null),this.isZoomTouch=!0,this.lastx1=t.targetTouches[0].clientX,this.lasty1=t.targetTouches[0].clientY,this.lastx2=t.targetTouches[1].clientX,this.lasty2=t.targetTouches[1].clientY,this.startPinchDistance=Math.sqrt((this.lastx1-this.lastx2)*(this.lastx1-this.lastx2)+(this.lasty1-this.lasty2)*(this.lasty1-this.lasty2)),this.lastZoom=this.zoom):void 0},h=function(t,e){var n,i,r,o,s,a,l,h,u;if(t.preventDefault(),1!==t.targetTouches.length||this.isZoomTouch){if(2===t.targetTouches.length&&this.zoomEnabled)return s=t.targetTouches[0].clientX,h=t.targetTouches[0].clientY,a=t.targetTouches[1].clientX,u=t.targetTouches[1].clientY,n=Math.sqrt((s-a)*(s-a)+(h-u)*(h-u)),f.call(this,this.lastZoom*n/this.startPinchDistance)}else if(o=t.targetTouches[0].clientX,l=t.targetTouches[0].clientY,!this.moving&&(e.touchStart.x-o)*(e.touchStart.x-o)+(e.touchStart.y-l)*(e.touchStart.y-l)>e.moveThreshold*e.moveThreshold&&(this.moving=!0,e.positionLast.set(e.touchStart),e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null)),this.moving&&(i=o-e.positionLast.x,r=l-e.positionLast.y,e.positionLast.x=o,e.positionLast.y=l,this.mouseDown))return d.call(this,i,r)},l=function(t,e){var i,r,o,s,a,l,h;if(this.mouseDown){if(t.preventDefault(),i=t.changedTouches,i.length>0)for(o=s=0,a=i.length-1;a>=s;o=s+=1)l=i[o].clientX,h=i[o].clientY,this.emit("pointerup",{x:l,y:h});return 0===t.targetTouches.length?(this.isZoomTouch=!1,e.longPressTimer&&(clearTimeout(e.longPressTimer),e.longPressTimer=null),this.moving?this.moving=!1:r||n.call(this,e.touchStart.x-e.selection.box().left,e.touchStart.y-e.selection.box().top),r=!1):void 0}},n=function(t,e){var n,i,r;return r=this.screenPointToWorldPoint(new u(t,e)),this.selectionEnabled&&(n=this.drawing.ctx,i=this.drawing.findBy(function(t){return t.selectable.value&&t.pointInBoundingBox(r,n)}),i?this.drawing.select(i):this.drawing.unselectAll()),this.emit("click",{x:t,y:e,wx:r.x,wy:r.y})},i=function(t,e){return this.emit("longpress",{x:t,y:e})},e.prototype.setupBounds=function(t,e,n,i,r,o){return this.zoomMin=t,this.zoomMax=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=o},e.prototype.clearTransform=function(t){return t.setTransform(1,0,0,1,0,0)},e.prototype.applyTransform=function(t){return t.translate(this.drawing.width/2,this.drawing.height/2),t.scale(this.actualZoom,this.actualZoom),t.translate(-this.actualPosition.x,-this.actualPosition.y)},e.prototype.update=function(){var t;switch(this.mode){case"follow":t=this.followObject.getBoundingBox(this.drawing.ctx),t&&(this.followContinualZoom&&(this.zoom=this.calculateZoomForBoundingBox(t,this.followZoomOut)),this.position.x=(t[0]+t[2])/2,this.position.y=(t[1]+t[3])/2)}return this.zoomMin&&this.zoom<this.zoomMin&&(this.zoom=this.zoomMin),this.zoomMax&&this.zoom>this.zoomMax&&(this.zoom=this.zoomMax),this.xMin&&this.position.x<this.xMin&&(this.position.x=this.xMin),this.yMin&&this.position.y<this.yMin&&(this.position.y=this.yMin),this.xMax&&this.position.x>this.xMax&&(this.position.x=this.xMax),this.yMax&&this.position.y>this.yMax&&(this.position.y=this.yMax),this.smoothPosition||this.smoothToNextTargetPosition?(this.actualPosition.tweenTo(this.position,this.positionSmoothingFactor),this.actualPosition.distanceTo(this.position)<1&&(this.smoothToNextTargetPosition=!1)):this.actualPosition.set(this.position),this.smoothZoom?this.actualZoom=hx.tween(this.actualZoom,this.zoom,this.zoomSmoothingFactor):this.actualZoom=this.zoom},e.prototype.getWorldRect=function(){return[this.actualPosition.x-this.drawing.width/(2*this.actualZoom),this.actualPosition.y-this.drawing.height/(2*this.actualZoom),this.actualPosition.x+this.drawing.width/(2*this.actualZoom),this.actualPosition.y+this.drawing.height/(2*this.actualZoom)]},e.prototype.getWorldX=function(t){return(t*this.drawing.dpr-this.drawing.width/2)/this.actualZoom+this.actualPosition.x},e.prototype.getWorldY=function(t){return(t*this.drawing.dpr-this.drawing.height/2)/this.actualZoom+this.actualPosition.y},e.prototype.screenPointToWorldPoint=function(t){var e;return e={x:(t.x*this.drawing.dpr-this.drawing.width/2)/this.actualZoom+this.actualPosition.x,y:(t.y*this.drawing.dpr-this.drawing.height/2)/this.actualZoom+this.actualPosition.y}},e.prototype.worldPointToScreenPoint=function(t){var e;return e={x:(t.x*this.drawing.dpr-this.actualPosition.x)*this.actualZoom+this.drawing.width/2,y:(t.y*this.drawing.dpr-this.actualPosition.y)*this.actualZoom+this.drawing.height/2}},e.prototype.calculateZoomForBoundingBox=function(t,e){return Math.min(this.drawing.width/((t[2]-t[0])*e),this.drawing.height/((t[3]-t[1])*e))},e.prototype.follow=function(t,e,n){var i;return this.smoothToNextTargetPosition=!0,t&&(this.mode="follow",this.followObject=t,this.followZoomOut=e,this.followContinualZoom=n,i=this.followObject.getBoundingBox(this.drawing.ctx))?this.zoom=this.calculateZoomForBoundingBox(i,e):void 0},e.prototype.stopFollowing=function(){return this.mode=null,this.followObject=null},e.prototype.show=function(t,e){var n;return this.smoothToNextTargetPosition=!0,t&&(n=t.getBoundingBox(this.drawing.ctx))?(this.zoom=this.calculateZoomForBoundingBox(n,e),this.position.x=(n[0]+n[2])/2,this.position.y=(n[1]+n[3])/2):void 0},e}(hx.EventEmitter);var f,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;f=function(t){function e(t,n){var r,o;null==n&&(n=!0),e.__super__.constructor.apply(this,arguments),r=hx.select(t),r.classed("hx-drawing",!0),this.canvas=r.append("canvas"),this.overlay=r.append("div")["class"]("hx-drawing-overlay"),o=r.node(),i.call(this,o),r.on("resize",function(t){return function(){return i.call(t,o)}}(this)),this.canvasNode=this.canvas.node(),this.ctx=this.canvasNode.getContext("2d"),this.defaultLayer=new x(this),this.layers=[this.defaultLayer],this.camera=new c(this),this.camera.pipe(this),this.globalAlpha=1,this.stats=null,this.selectedObjects=new hx.List,this.frame=0,n&&this.resume()}var n,i;return p(e,t),n=function(){var t;return t=!1,hx.loop(function(e){return function(){var n,i,r,o;for(e.stats&&e.stats.start(),e.camera.clearTransform(e.ctx),e.ctx.clearRect(0,0,e.width,e.height),e.camera.update(),e.camera.applyTransform(e.ctx),o=e.layers,n=0,r=o.length;r>n;n++)i=o[n],i.render(e.ctx);return e.stats&&(e.camera.clearTransform(e.ctx),e.stats.end(),e.stats.update(),e.stats.render()),e.emit("update",e.frame),e.frame++,t}}(this)),function(){return t=!0}},i=function(t){var e,n;return n=t.clientWidth,e=t.clientHeight,this.dpr=null!=window.devicePixelRatio?window.devicePixelRatio:1,this.canvas.prop("width",n*this.dpr),this.canvas.prop("height",e*this.dpr),this.canvas.style("width",n+"px"),this.canvas.style("height",e+"px"),this.canvas.style("position","relative"),this.width=n*this.dpr,this.height=e*this.dpr,this.overlay.style("width",n+"px"),this.overlay.style("height",e+"px"),this.state={height:n,width:e}},e.prototype.resume=function(){return this.stopFunc?void 0:this.stopFunc=n.call(this)},e.prototype.stop=function(){return this.stopFunc?(this.stopFunc(),this.stopFunc=void 0):void 0},e.prototype.find=function(t){var e,n,i,r,o;for(r=this.layers,e=0,i=r.length;i>e;e++)if(n=r[e],o=n.find(t))return o},e.prototype.findBy=function(t){var e,n,i,r,o;for(r=this.layers,e=0,i=r.length;i>e;e++)if(n=r[e],o=n.findBy(t))return o},e.prototype.createLayer=function(){var t;return t=new x(this),this.layers.push(t),t},e.prototype.showLayer=function(t){var e,n,i,r,o;for(r=this.layers,o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(n.visible=n===t);return o},e.prototype.follow=function(t,e,n){return null==e&&(e=1),null==n&&(n=!1),this.camera.follow(t,e,n)},e.prototype.stopFollowing=function(){return this.camera.stopFollowing},e.prototype.show=function(t,e){return null==e&&(e=1),this.camera.show(t,e)},e.prototype.enablePan=function(){return this.camera.panEnabled=!0;
},e.prototype.enableZoom=function(){return this.camera.zoomEnabled=!0},e.prototype.enableSelection=function(){return this.camera.selectionEnabled=!0},e.prototype.enablePerformanceGauge=function(){return this.stats=new v(this)},e.prototype.enableSearchbox=function(){var t;return this.searchbox=this.overlay.append("div").classed("hx-drawing-searchbox",!0),t=this.searchbox.append("input").attr("placeholder","Search"),t.on("keypress",function(e){return function(n){return 13===n.which?e.emit("search",t.prop("value")):void 0}}(this))},e.prototype.enableSidebar=function(t,e,n){return 2===arguments.length&&(n=e,e=null),this.sidebar=new g(this.overlay,t,e,n),this.showSidebar=function(t){return function(){return t.sidebar.show()}}(this),this.hideSidebar=function(t){return function(){return t.sidebar.hide()}}(this),this.toggleSidebar=function(t){return function(){return t.sidebar.toggle()}}(this)},e.prototype.create=function(t,e){return this.defaultLayer.create(t,e)},e.prototype["delete"]=function(t){var e,n,i,r,o;for(r=this.layers,o=[],e=0,i=r.length;i>e;e++)n=r[e],o.push(n["delete"](t));return o},e.prototype.deleteAll=function(){var t,e,n,i;for(i=this.layers,t=0,n=i.length;n>t;t++)e=i[t],e.deleteAll();return void 0},e.prototype.setGlobalAlpha=function(t){return this.globalAlpha=t},e.prototype.setFillColor=function(t){var e,n,i,r;return r=t.r,i=t.g,n=t.b,e=t.a*this.globalAlpha,this.ctx.fillStyle="rgba("+Math.floor(r)+","+Math.floor(i)+","+Math.floor(n)+","+e+")"},e.prototype.setStrokeColor=function(t){var e,n,i,r;return r=t.r,i=t.g,n=t.b,e=t.a*this.globalAlpha,this.ctx.strokeStyle="rgba("+Math.floor(r)+","+Math.floor(i)+","+Math.floor(n)+","+e+")"},e.prototype.setStrokeWidth=function(t){return this.ctx.lineWidth=t},e.prototype.setStrokeCap=function(t){return this.ctx.lineCap=t},e.prototype.getBoundingBox=function(){var t,e,n,i,r;if(this.layers.length>0){if(r=this.layers[0].getBoundingBox(this.ctx),this.layers.length>1)for(e=n=1,i=this.layers.length-1;i>=n;e=n+=1)t=this.layers[e].getBoundingBox(this.ctx),t&&(r?(t[0]<r[0]&&(r[0]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[2]>r[2]&&(r[2]=t[2]),t[3]>r[3]&&(r[3]=t[3])):r=t);return r}return null},e.prototype.select=function(t,e){var n,i,r,o;if(null==e&&(e=!1),e)this.selectedObjects.add(t);else{for(o=this.selectedObjects.values(),n=0,i=o.length;i>n;n++)r=o[n],r!==t&&(r.selected=!1,this.emit("unselect",r));this.selectedObjects=new hx.List([t])}return t.selected=!0,this.emit("select",t)},e.prototype.unselect=function(t){return this.selectedObjects.remove(t)?(t.selected=!1,this.emit("unselect",t)):void 0},e.prototype.unselectAll=function(){var t,e,n,i;for(i=this.selectedObjects.values(),t=0,e=i.length;e>t;t++)n=i[t],n.selected=!1,this.emit("unselect",n);return this.selectedObjects.clear()},e.prototype.selected=function(){return this.selectedObjects.values()},e}(hx.EventEmitter),hx.Drawing=f;var x;x=function(){function t(t){this.drawing=t,this.objects=[],this.visible=!0,this.alpha=1,this.alphaCurveFunction=null}var e,n;return n=function(t,e){return function(n){return 1-Math.abs(2*(Math.log(n)-t)/(e-t)-1)}},e=function(t,e){return function(n){return 1+Math.min(2*(Math.log(n)-t)/(e-t)-1,0)}},t.prototype.render=function(){var t,e,n,i,r;if(this.alphaCurveFunction&&(this.alpha=hx.clampUnit(this.alphaCurveFunction(this.drawing.camera.actualZoom)),this.visible=this.alpha>.01),this.visible){for(this.drawing.setGlobalAlpha(this.alpha),i=this.objects,r=[],t=0,e=i.length;e>t;t++)n=i[t],r.push(n.render(this.drawing.ctx,this.drawing,0,0));return r}},t.prototype.create=function(t,e){var n;return n=function(){switch(t){case"circle":return new y(e);case"rectangle":return new k(e);case"line":return new b(e);case"grid":return new w(e);case"text":return new _(e);case"shape":return new S(e);case"composite":return new m(e)}}(),n&&this.objects.push(n),n},t.prototype["delete"]=function(t){var e;return e=this.objects.indexOf(t),-1!==e?this.objects.splice(e,1):void 0},t.prototype.deleteAll=function(){return void(this.objects=[])},t.prototype.find=function(t){var e,n,i,r;for(r=this.objects,e=0,n=r.length;n>e;e++)if(i=r[e],i.id===t)return i},t.prototype.findBy=function(t){var e,n,i,r;for(r=this.objects,e=0,n=r.length;n>e;e++)if(i=r[e],t(i))return i},t.prototype.getBoundingBox=function(){var t,e,n,i,r;if(this.objects.length>0){if(r=this.objects[0].getBoundingBox(this.drawing.ctx),this.objects.length>1)for(e=n=1,i=this.objects.length-1;i>=n;e=n+=1)t=this.objects[e].getBoundingBox(this.drawing.ctx),t&&(r?(t[0]<r[0]&&(r[0]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[2]>r[2]&&(r[2]=t[2]),t[3]>r[3]&&(r[3]=t[3])):r=t);return r}return null},t.prototype.setAlphaCurve=function(t,i,r){return this.alphaCurveFunction=function(){switch(t){case"triangle":return n(i,r);case"ramp":return e(i,r)}}()},t}();var g,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;g=function(t){function e(t,n,i,r){switch(null==n&&(n="l"),e.__super__.constructor.apply(this,arguments),this.visible=!1,this.selection=t.append("div")["class"]("hx-drawing-sidebar hx-drawing-sidebar-"+n),n){case"t":case"b":this.selection.style("height","0px"),this.expandEvt="expandv",this.collapseEvt="collapsev";break;default:this.selection.style("width","0px"),this.expandEvt="expandh",this.collapseEvt="collapseh"}i&&(i.split(""),this.toggleBtn=t.append("div")["class"]("hx-btn hx-drawing-sidebar-toggle").classed("hx-drawing-sidebar-toggle-"+i[0],!0).classed("hx-drawing-sidebar-toggle-"+i[1],!0).on("click",function(t){return function(){return t.toggle()}}(this)).append("i")["class"]("fa fa-bars")),"function"==typeof r&&r(this.selection.node())}return p(e,t),e.prototype.toggle=function(){return this.visible?this.hide():this.show()},e.prototype.show=function(){return this.visible||(this.visible=!0,this.selection.morph()["with"](this.expandEvt,100).and("fadein",100).go(!0)),this},e.prototype.hide=function(){return this.visible&&(this.visible=!1,this.selection.morph()["with"]("fadeout",100).and(this.collapseEvt,100).go(!0)),this},e}(hx.EventEmitter);var v;v=function(){function t(t){this.drawing=t,this.position=new u(3,3),this.fps=void 0,this.ms=void 0,this.lastEnd=void 0,this.frameStart=void 0,this.frameEnd=void 0}return t.prototype.start=function(){return this.frameStart=(new Date).getTime()},t.prototype.end=function(){return this.lastEnd=this.frameEnd,this.frameEnd=(new Date).getTime()},t.prototype.update=function(){var t,e;return t=1e3/(this.frameEnd-this.lastEnd),isNaN(t)||(this.fps?this.fps=hx.tween(this.fps,t,.05):this.fps=t),e=this.frameEnd-this.frameStart,this.ms?this.ms=hx.tween(this.ms,e,.05):this.ms=e},t.prototype.render=function(){return this.drawing.ctx.fillStyle="rgba(0, 0, 40, 1)",this.drawing.ctx.strokeStyle="#ffffff",this.drawing.ctx.lineCap="square",this.drawing.ctx.lineWidth=1,this.drawing.ctx.fillRect(this.position.x,this.position.y,70,42),this.drawing.ctx.strokeRect(this.position.x,this.position.y,70,42),this.drawing.ctx.font="10pt Helvetica,Arial",this.drawing.ctx.fillStyle="#ffffff",this.drawing.ctx.fillText("FPS: "+Math.round(this.fps),8+this.position.x,18+this.position.y),this.ms<17?this.drawing.ctx.fillStyle="#ffffff":this.drawing.ctx.fillStyle="#ff5555",this.drawing.ctx.fillText("MS: "+Math.round(this.ms),8+this.position.x,33+this.position.y)},t}();var y,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;y=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.radius=this.addNumberProperty("radius",10)}return p(e,t),e.prototype.render=function(t,e,n,i){var r;return r=e.camera.getWorldRect(),r[0]-=n,r[1]-=i,r[2]-=n,r[3]-=i,this.position.x.value+this.radius.value>r[0]&&this.position.x.value-this.radius.value<r[2]&&this.position.y.value+this.radius.value>r[1]&&this.position.y.value-this.radius.value<r[3]&&(t.beginPath(),t.arc(this.position.x.value,this.position.y.value,this.radius.value,0,2*Math.PI,!0),t.closePath(),this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fill()),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.stroke()),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(){return[this.position.x.value-this.radius.value,this.position.y.value-this.radius.value,this.position.x.value+this.radius.value,this.position.y.value+this.radius.value]},e}(o);var m,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;m=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.angle=this.addNumberProperty("angle"),this.scale=this.addNumberProperty("scale",1),this.objectList=new hx.List,this.objectMap=new hx.Map}return p(e,t),e.prototype.set=function(t,n,i,r){var o,s,a,l;return this.properties.has(t)||hx.startsWith(t,"attr.")?e.__super__.set.call(this,t,n,i,r):(o=t.split("."),o.length>1?(a=o[0],l=o.slice(1).join("."),s=this.objectMap.get(a),s?s.set(l,n):console.warn("unknown property: ",t,Error().stack)):console.warn("unknown property: ",t,Error().stack)),this},e.prototype.get=function(t){var n,i,r,o;return this.properties.has(t)||hx.startsWith(t,"attr.")?e.__super__.get.call(this,t):(n=t.split("."),n.length>1&&(r=n[0],o=n.slice(1).join("."),i=this.objectMap.get(r))?i.get(o):void 0)},e.prototype.create=function(t,n){var i;return i=function(){switch(t){case"circle":return new y;case"rectangle":return new k;case"line":return new b;case"grid":return new w;case"text":return new _;case"shape":return new S;case"composite":return new e}}(),i&&(this.objectList.add(i),this.objectMap.set(n,i)),this},e.prototype["delete"]=function(t){return this.objectList["delete"](object),this.objectMap["delete"](t)},e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h;if(this.objectList.size>0&&(r=this.getBoundingBox(t),o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,!r||r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]))for(h=this.objectList.values(),s=0,a=h.length;a>s;s++)l=h[s],t.save(),t.translate(this.position.x.value,this.position.y.value),t.scale(this.scale.value,this.scale.value),t.rotate(this.angle.value),l.render(t,e,this.position.x.value+n,this.position.y.value+i),t.restore();return this.selected?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(t){var e,n,i,r,o;if(this.objectList.size>0){if(o=this.objectList.get(0).getBoundingBox(t),this.objectList.size>1)for(n=i=1,r=this.objectList.size-1;r>=i;n=i+=1)e=this.objectList.get(n).getBoundingBox(t),e&&(o?(e[0]<o[0]&&(o[0]=e[0]),e[1]<o[1]&&(o[1]=e[1]),e[2]>o[2]&&(o[2]=e[2]),e[3]>o[3]&&(o[3]=e[3])):o=e);return o[0]+=this.position.x.value,o[1]+=this.position.y.value,o[2]+=this.position.x.value,o[3]+=this.position.y.value,o}},e}(o);var w,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;w=function(t){function e(){var t,n;e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.cellSize={x:this.addNumberProperty("cellSize.x"),y:this.addNumberProperty("cellSize.y")},this.gridSize={x:this.addNumberProperty("gridSize.x"),y:this.addNumberProperty("gridSize.y")},this.gridLines={color:this.addColorProperty("gridLines.color"),width:this.addNumberProperty("gridLines.width"),enabled:this.addDiscreteProperty("gridLines.enabled",!1)},n=function(){var e,n;for(n=[],t=e=0;15>=e;t=e+=1)n.push(new r(Math.random(),Math.random()/2,0,.5));return n}(),this.cells={enabled:this.addDiscreteProperty("cells.enabled",!1),states:this.addDiscreteProperty("cells.states",void 0),palette:this.addDiscreteProperty("cells.palette",n)}}return p(e,t),e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M,C,D,T,P,A;if(o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,D=Math.max(0,Math.floor((o[0]-this.position.x.value)/this.cellSize.x.value)),T=Math.max(0,Math.floor((o[1]-this.position.y.value)/this.cellSize.y.value)),l=Math.min(this.gridSize.x.value-1,Math.ceil((o[2]-this.position.x.value)/this.cellSize.x.value)),h=Math.min(this.gridSize.y.value-1,Math.ceil((o[3]-this.position.y.value)/this.cellSize.y.value)),l>=D&&h>=T){if(this.cells.enabled.value)for(A=p=y=T,m=h;m>=p;A=p+=1)for(C=this.cells.states.value[A],P=d=w=D,b=l;b>=d;P=d+=1)r=C[P],e.setFillColor(this.cells.palette.value[r]),t.fillRect(this.position.x.value+P*this.cellSize.x.value+1,this.position.y.value+A*this.cellSize.y.value+1,this.cellSize.x.value-1,this.cellSize.y.value-1);if(this.gridLines.enabled){for(t.beginPath(),e.setStrokeColor(this.gridLines.color.value),e.setStrokeWidth(this.gridLines.width.value),e.setStrokeCap("square"),g=this.position.x.value,v=this.position.y.value,s=this.cellSize.x.value,a=this.cellSize.y.value,u=this.gridSize.x.value,c=this.gridSize.y.value,P=f=k=D,S=l+1;S>=f;P=f+=1)t.moveTo(g+P*s+.5,v+.5),t.lineTo(g+P*s+.5,v+a*c+.5);for(A=x=_=T,M=h+1;M>=x;A=x+=1)t.moveTo(g+.5,v+A*a+.5),t.lineTo(g+s*u+.5,v+A*a+.5);t.closePath(),t.stroke()}if(this.selected)return this.drawBoundingBox(t,e)}},e.prototype.getBoundingBox=function(){return[this.position.x.value,this.position.y.value,this.position.x.value+this.gridSize.x.value*this.cellSize.x.value,this.position.y.value+this.gridSize.y.value*this.cellSize.y.value]},e}(o);var b,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;b=function(e){function r(){r.__super__.constructor.apply(this,arguments),this.start={x:this.addNumberProperty("start.x"),y:this.addNumberProperty("start.y")},this.end={x:this.addNumberProperty("end.x"),y:this.addNumberProperty("end.y")},this.color=this.addColorProperty("color"),this.width=this.addNumberProperty("width")}return p(r,e),r.prototype.render=function(e,r,o,s){var a,l;return a=r.camera.getWorldRect(),a[0]-=o,a[1]-=s,a[2]-=o,a[3]-=s,l=0===this.width.value?Math.min(1,.95/r.camera.actualZoom):this.width.value,(n(this.start.x.value,this.start.y.value,a[0]-l,a[1]-l,a[2]+l,a[3]+l)||n(this.end.x.value,this.end.y.value,a[0]-l,a[1]-l,a[2]+l,a[3]+l)||t(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[0]-l,a[2]+l,a[1]-l)||t(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[0]-l,a[2]+l,a[3]+l)||i(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[1]-l,a[3]+l,a[0]-l)||i(this.start.x.value,this.start.y.value,this.end.x.value,this.end.y.value,a[1]-l,a[3]+l,a[2]+l))&&(e.beginPath(),r.setStrokeColor(this.color.value),r.setStrokeWidth(l),e.moveTo(this.start.x.value,this.start.y.value),e.lineTo(this.end.x.value,this.end.y.value),e.closePath(),e.stroke(),this.selected)?this.drawBoundingBox(e,r):void 0},r.prototype.getBoundingBox=function(){return[Math.min(this.start.x.value,this.end.x.value),Math.min(this.start.y.value,this.end.y.value),Math.max(this.start.x.value,this.end.x.value),Math.max(this.start.y.value,this.end.y.value)]},r}(o);var k,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;k=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.width=this.addNumberProperty("width",10),this.height=this.addNumberProperty("height",10)}return p(e,t),e.prototype.render=function(t,e,n,i){var r;return r=e.camera.getWorldRect(),r[0]-=n,r[1]-=i,r[2]-=n,r[3]-=i,this.position.x.value+this.width.value>r[0]&&this.position.x.value<r[2]&&this.position.y.value+this.height.value>r[1]&&this.position.y.value<r[3]&&(this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fillRect(this.position.x.value,this.position.y.value,this.width.value,this.height.value)),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.strokeRect(this.position.x.value,this.position.y.value,this.width.value,this.height.value)),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getBoundingBox=function(){return[this.position.x.value,this.position.y.value,this.position.x.value+this.width.value,this.position.y.value+this.height.value]},e}(o);var S,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;S=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.fill={enabled:this.addDiscreteProperty("fill.enabled",!0),color:this.addColorProperty("fill.color")},this.outline={enabled:this.addDiscreteProperty("outline.enabled",!1),width:this.addNumberProperty("outline.width"),color:this.addColorProperty("outline.color")},this.curve=this.addDiscreteProperty("curve",[]),this.type=""}return p(e,t),e.prototype.set=function(t,n,i,r){return"curve"===t&&(this.type="curve"),"polygon"===t&&(this.type="polygon",t="curve"),e.__super__.set.call(this,t,n,i,r)},e.prototype.get=function(t){return"polygon"===t&&(t="curve"),e.__super__.get.call(this,t)},e.prototype.render=function(t,e,n,i){var r,o,s,a,l,h,u,c,p,d,f;if(r=this.getBoundingBox(t),o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,r&&r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]){if(t.beginPath(),"polygon"===this.type)for(d=this.curve.value,s=a=0,h=d.length;h>a;s=++a)p=d[s],0===s?t.moveTo(this.position.x.value+p[0],this.position.y.value+p[1]):t.lineTo(this.position.x.value+p[0],this.position.y.value+p[1]);if("curve"===this.type)for(f=this.curve.value,s=l=0,u=f.length;u>l;s=++l)c=f[s],0===s?t.moveTo(this.position.x.value+c[0],this.position.y.value+c[1]):t.quadraticCurveTo(this.position.x.value+this.curve.value[s-1][2],this.position.y.value+this.curve.value[s-1][3],this.position.x.value+c[0],this.position.y.value+c[1]);if(t.closePath(),this.outline.enabled.value&&(e.setStrokeColor(this.outline.color.value),e.setStrokeWidth(this.outline.width.value),t.stroke()),this.fill.enabled.value&&(e.setFillColor(this.fill.color.value),t.fill()),this.selected)return this.drawBoundingBox(t,e)}},e.prototype.getBoundingBox=function(){var t,e,n,i,r,o,s,a,l,h,u,c;if("polygon"===this.type){for(l=h=this.curve.value[0][0],u=c=this.curve.value[0][1],s=this.curve.value,t=e=0,i=s.length;i>e;t=++e)o=s[t],o[0]<l&&(l=o[0]),o[1]<u&&(u=o[1]),o[0]>h&&(h=o[0]),o[1]>c&&(c=o[1]);return[this.position.x.value+l,this.position.y.value+u,this.position.x.value+h,this.position.y.value+c]}if("curve"===this.type){for(l=h=this.curve.value[0][0],u=c=this.curve.value[0][1],a=this.curve.value,t=n=0,r=a.length;r>n;t=++n)o=a[t],o[0]<l&&(l=o[0]),o[1]<u&&(u=o[1]),o[0]>h&&(h=o[0]),o[1]>c&&(c=o[1]),o[2]<l&&(l=o[2]),o[3]<u&&(u=o[3]),o[2]>h&&(h=o[2]),o[3]>c&&(c=o[3]);return[this.position.x.value+l,this.position.y.value+u,this.position.x.value+h,this.position.y.value+c]}},e}(o);var _,p=function(t,e){function n(){this.constructor=t}for(var i in e)d.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},d={}.hasOwnProperty;_=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.position={x:this.addNumberProperty("position.x"),y:this.addNumberProperty("position.y")},this.color=this.addColorProperty("color"),this.size=this.addNumberProperty("size",12),this.align={x:this.addDiscreteProperty("align.x","start"),y:this.addDiscreteProperty("align.y","top")},this.font=this.addDiscreteProperty("font","Helvetica,Arial"),this.text=this.addStringProperty("text")}return p(e,t),e.prototype.render=function(t,e,n,i){var r,o;return r=this.getBoundingBox(t),o=e.camera.getWorldRect(),o[0]-=n,o[1]-=i,o[2]-=n,o[3]-=i,r[2]>o[0]&&r[0]<o[2]&&r[3]>o[1]&&r[1]<o[3]&&(t.font="12px "+this.font.value,e.setFillColor(this.color.value),t.save(),t.scale(this.size.value/12,this.size.value/12),t.textAlign=this.align.x.value,t.textBaseline=this.align.y.value,t.fillText(this.text.value,this.position.x.value/(this.size.value/12),this.position.y.value/(this.size.value/12)),t.restore(),this.selected)?this.drawBoundingBox(t,e):void 0},e.prototype.getWidth=function(t){return void 0===this.textWidth&&(t.font="12px "+this.font.value,t.save(),t.setTransform(1,0,0,1,0,0),this.textWidth=t.measureText(this.text.value).width,t.restore()),this.textWidth},e.prototype.getBoundingBox=function(t){var e,n,i,r;switch(n=this.getWidth(t)*(this.size.value/12),e=this.size.value,this.align.x.value){case"start":i=0;break;case"end":i=n;break;case"center":i=n/2;break;default:i=0}switch(this.align.y.value){case"top":r=0;break;case"end":r=e;break;case"middle":r=e/2;break;default:r=0}return[this.position.x.value-i,this.position.y.value-r,this.position.x.value+n-i,this.position.y.value+e-r]},e}(o)}(),function(){var t,e,n,i=function(t,e){function n(){this.constructor=t}for(var i in e)r.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=function(t){function e(t,n,i){var r;switch(this.modifiers=n,this.extra=i,e.__super__.constructor.apply(this,arguments),r=this,this.sortedData=void 0,this.filteredData=void 0,!1){case!hx.isFunction(t):this.source=t;break;case!hx.isString(t):this.source=function(e,n){return hx.json(t,e,function(t,i){if(t)return n(void 0),r.emit("error",t);switch(e.type){case"header":return n(i.head);case"rowCount":return n(i.count);case"rows":return n(i.rows,i.processedSize)}})};break;default:this.source=function(e,n){switch(e.type){case"header":return n(t.head);case"rowCount":return n(t.body.length);case"rows":return r.getProcessedData(function(t){return n(t.slice(e.startRow,e.endRow),t.length)});case"data":return n(t)}}}this.modifiers.on("sort-change",function(t){return function(e){return t.sortedData=void 0,t.emit("sort-change",e)}}(this)),this.modifiers.on("filter-change",function(t){return function(e){return t.filteredData=void 0,t.emit("filter-change",e)}}(this)),this.modifiers.pipe(this,void 0,["change"])}var n;return i(e,t),n=function(t){return t.slice()},e.prototype.getFilteredData=function(t){return void 0===this.filteredData&&this.source({type:"data"},function(t){return function(e){var i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m;v=e.body,u=e.head,l=function(t){var e,n,i,r,o,s;for(o=t.toLowerCase(),s=u.columns,n=i=0,r=s.length;r>i;n=++i)if(e=s[n],e.value.toLowerCase()===o)return n;return void 0},h=!1,d={};for(o in t.modifiers.filters){r=t.modifiers.cellFilterValueLookup[o]||t.modifiers.cellValueLookup[o]||t.modifiers.defaultCellFilterValueLookup||t.modifiers.defaultCellValueLookup||function(t){return t},s=l(o),f=t.modifiers.filters[o];for(m in f)y=f[m],void 0!==y&&(h=!0,"string"==typeof y&&(y=y.split(" ").map(function(t){return t.trim()}).filter(function(t){return t})),null==d[m]&&(d[m]=[]),d[m].push({columnIndex:s,terms:y,cellLookup:r}))}if(h){for(a=function(t,e){var n,i,o,s,a,l,h,u,c,p;for(u=d[e],o=0,a=u.length;a>o;o++)if(i=u[o],n=i.columnIndex,r=i.cellLookup,h={caseSensitive:!1,searchValues:function(t){return t.columns?[r(t.columns[n])]:[r(t[n])]},sort:!1},hx.isArray(y))for(c=i.terms,s=0,l=c.length;l>s;s++)p=c[s],t=hx.filter[e](t,p,h);else t=hx.filter[e](t,y,h);return t},i=Object.keys(hx.filter),t.filteredData=n(v),g=[],c=0,p=i.length;p>c;c++)m=i[c],(null!=(x=d[m])?x.length:void 0)>0?g.push(t.filteredData=a(t.filteredData,m)):g.push(void 0);return g}return t.filteredData=v}}(this)),t(this.filteredData)},e.prototype.getSortedData=function(t){return void 0===this.filteredData&&(this.sortedData=void 0),this.getFilteredData(function(e){return function(i){var r,o;return void 0===e.sortedData&&(void 0!==e.modifiers.sortColumn&&void 0!==e.modifiers.sortDirection?(o=e.modifiers.sortColumn.toLowerCase(),r=e.modifiers.cellSortValueLookup[o]||e.modifiers.cellValueLookup[o]||e.modifiers.defaultCellSortValueLookup||e.modifiers.defaultCellValueLookup||function(t){return t},e.getColumnIndex(e.modifiers.sortColumn,function(t){var s,a;return a=e.modifiers.sortDirection?1:-1,e.sortedData=n(i),s=e.modifiers.columnCompare[o]||e.modifiers.defaultCompare,e.sortedData.sort(function(e,n){return s(r((e.columns||e)[t]),r((n.columns||n)[t]))*a})})):e.sortedData=i),t(e.sortedData)}}(this))},e.prototype.getProcessedData=function(t){return this.getSortedData(t)},e.prototype.getHeader=function(t){return this.source({type:"header",extra:this.extra},t)},e.prototype.getRows=function(t,e,n){return this.source({type:"rows",startRow:t,endRow:e,filters:this.modifiers.filters,sortColumn:this.modifiers.sortColumn,sortDirection:this.modifiers.sortDirection,extra:this.extra},n)},e.prototype.getRowCount=function(t){return this.source({type:"rowCount",extra:this.extra},t)},e.prototype.getColumnIndex=function(t,e){return this.getHeader(function(n){var i,r,o,s,a,l;for(a=t.toLowerCase(),l=n.columns,r=o=0,s=l.length;s>o;r=++o)if(i=l[r],i.value.toLowerCase()===a)return void e(r);return e(void 0)})},e}(hx.EventEmitter),n=function(t){function e(){var t;e.__super__.constructor.apply(this,arguments),t=this,this.filters={},this.sortDirection=void 0,this.sortColumn=void 0,this.defaultCellValueLookup=void 0,this.defaultCellFilterValueLookup=void 0,this.defaultCellSortValueLookup=void 0,this.cellValueLookup={},this.cellFilterValueLookup={},this.cellSortValueLookup={},this.columnCompare={},this.defaultCompare=void 0}var n;return i(e,t),n=function(t){switch(t){case"ascending":case"asc":case!0:return!0;case"descending":case"desc":case!1:return!1;default:return void 0}},e.prototype.sort=function(t,e,i){var r;return e=n(e),r=!1,1===arguments.length?(this.sortDirection=function(){switch(!1){case this.sortColumn===t:return!0;case this.sortDirection!==!0:return!1;case this.sortDirection!==!1:return void 0;default:return!0}}.call(this),this.sortColumn=t,r=!0):(this.sortDirection!==e||this.sortColumn!==t)&&(this.sortDirection=e,this.sortColumn=t,void 0===this.sortColumn&&(this.sortDirection=void 0),r=!0),r?(this.emit("sort-change",{column:this.sortColumn,direction:this.sortDirection}),this.emit("change",{callback:i})):void 0},e.prototype.filter=function(t,e,n,i){var r,o,s;return null==n&&(n="contains"),void 0!==t&&(null==(r=this.filters)[t]&&(r[t]={}),o=this.filters[t][n]!==e,o&&(s=this.filters[t][n],this.filters[t][n]=e,this.emit("filter-change",{column:t,type:n,filter:e,oldFilter:s}),this.emit("change",{callback:i}))),this},e.prototype.addFilter=function(t,e,n,i){var r,o,s,a,l;for(null==n&&(n="contains"),a=e.split(" "),o=0,s=a.length;s>o;o++)r=a[o],void 0!==(null!=(l=this.filters[t])?l[n]:void 0)?-1===this.filters[t][n].indexOf(r)&&this.filter(t,this.filters[t][n]+" "+r,n,i):this.filter(t,r,n,i);return this},e.prototype.removeFilter=function(t,e,n,i){var r,o,s,a,l,h,u,c;if(r=function(t){var n,i,r,o,s;for(o=t.split(" ").map(function(t){return t.toLowerCase()}),s=e.split(" ").map(function(t){return t.toLowerCase()}),i=0,r=s.length;r>i;i++)n=s[i],o=o.filter(function(t){return t!==n});return o=o.join(" "),""===o?void 0:o},0===arguments.length)for(s in this.filters){a=this.filters[s];for(o in a)c=a[o],this.filter(s,void 0,o,i)}else if(2===arguments.length||void 0!==n)if(null==n&&(n="contains"),void 0===t){l=this.filters;for(s in l)c=l[s],this.filter(s,r(c[n]),n,i)}else void 0!==this.filters[t]&&this.filters[t][n]&&this.filter(t,r(this.filters[t][n]),n,i);else if(void 0===t)for(s in this.filters){h=this.filters[s];for(n in h)c=h[n],this.filter(s,r(c),n,i)}else if(void 0!==this.filters[t]){u=this.filters[t];for(n in u)c=u[n],this.filter(t,r(c),n,i)}return this},e}(hx.EventEmitter),t=function(t){function o(t,e){var i;null==e&&(e={}),o.__super__.constructor.apply(this,arguments),this.options=hx.merge(!1,{rowsPerPage:100,showSorts:!0,showFilters:!0,showSelection:!1,rowSelectable:!0,cellRenderers:{},alwaysMobile:!1,useResponsive:!0,noDataMessage:"No Data",defaultCellValueLookup:void 0,defaultCellFilterValueLookup:void 0,defaultCellSortValueLookup:void 0,cellValueLookup:{},cellFilterLookup:{},cellSortValueLookup:{},defaultCompare:hx.sort.localeCompare(),columnCompare:{},enabledFilters:["exact","startsWith","less","greater","excludes"]},e),i=this._={selectedRows:[]},i.container=hx.select(t).classed("hx-table-widget hx-layout hx-group hx-vertical",!0),i.tableWrapper=i.container.append("div")["class"]("hx-section hx-table-wrapper hx-no-margin"),i.tableMessage=i.container.append("div")["class"]("hx-section hx-table-message"),i.rowCountMessage=hx.select(document.createElement("div")),i.rowCountMessage.append("span"),i.rowCountMessage.append("a").text("(clear selection)").on("click",function(t){return function(e){return e.preventDefault(),t.clearSelection()}}(this)),i.paginatorContainer=i.container.append("div")["class"]("hx-section hx-table-paginator"),this.paginator=new hx.Paginator(i.paginatorContainer.node()),this.paginator.on("change",function(t){return function(e){return"user"===e.cause?l(t):void 0}}(this)),i.modifiers=new n,i.modifiers.defaultCellValueLookup=this.options.defaultCellValueLookup,i.modifiers.defaultCellFilterValueLookup=this.options.defaultCellFilterValueLookup,i.modifiers.defaultCellSortValueLookup=this.options.defaultCellSortValueLookup,i.modifiers.cellValueLookup=a(this.options.cellValueLookup),i.modifiers.cellFilterValueLookup=a(this.options.cellFilterValueLookup),i.modifiers.cellSortValueLookup=a(this.options.cellSortValueLookup),i.modifiers.defaultCompare=this.options.defaultCompare,i.modifiers.columnCompare=this.options.columnCompare,i.feedChange=function(t){return function(e){return l(t,e),t.emit("change")}}(this),i.sortChange=function(t){return function(e){var n,r,o,s;return i.rendered&&(i.useMobileView||(s=i.header.columns.map(function(t){return t.value.toLowerCase()}),r=s.indexOf(e.column.toLowerCase()),-1!==r&&(h(i.tableWrapper.selectAll(".hx-table-sort-icon")),n=i.tableWrapper.select(".hx-table-header-sticky").selectAll(".hx-table-sort-icon"),o=n.node(r),h(hx.select(o),e.direction))),t.clearSelection()),t.paginator.page(1),t.emit("sort-change",e)}}(this),i.filterChange=function(t){return function(e){return t.paginator.page(1),t.clearSelection(),t.emit("filter-change",e)}}(this)}var s,a,l,h,u;return i(o,t),a=function(t){var e,n,i;n={};for(e in t)r.call(t,e)&&(i=t[e],n[e.toLowerCase()]=i);return n},o.prototype.setData=function(t,n,i,r,o){var s,a;return s=this._,null!=(a=s.feed)&&a.off(),s.modifiers.off(),i&&s.modifiers.sort(),r&&s.modifiers.removeFilter(),s.feed=new e(t,s.modifiers,n),s.feed.on("change",function(t){return s.feedChange(t.callback)}),s.feed.on("sort-change",s.sortChange),s.feed.on("filter-change",s.filterChange),s.newSource=!0,s.selectedRows=[],this.paginator.page(1),l(this,o),this},o.prototype.render=function(t){return l(this,t)},o.prototype.filter=function(t,e,n,i){return this._.modifiers.filter(t,e,n,i)},o.prototype.addFilter=function(t,e,n,i){return this._.modifiers.addFilter(t,e,n,i)},o.prototype.removeFilter=function(t,e,n,i){return this._.modifiers.removeFilter(t,e,n,i);
},o.prototype.sort=function(t,e,n){return this._.modifiers.sort(t,e,n)},o.prototype.restoreSelected=function(t){var e,n,i;for(e=0,i=t.length;i>e;e++)n=t[e],this._.selectedRows[n.index]=n.data;return l(this)},o.prototype.getSelected=function(){var t,e,n,i,r,o;for(i=this._.selectedRows,r=[],o=t=0,n=i.length;n>t;o=++t)e=i[o],e&&r.push({index:o,data:e});return r},o.prototype.clearSelection=function(){var t;return t=this._,t.tableWrapper.selectAll(".hx-table-row-selected").classed("hx-table-row-selected",!1),t.selectedRows=t.selectedRows.map(function(t){return!1}),u(this),this.emit("clearselection")},h=function(t,e){return t.classed("fa-sort-asc",e===!0).classed("fa-sort-desc",e===!1).classed("fa-unsorted",void 0===e)},u=function(t){var e,n,i,r,o,s,a,l,h,u;for(e=t._,u=e.selectedRows.filter(function(t){return t}).length,u>0?(void 0!==e.rowCount?e.rowCountMessage.select("span").text(u+" of "+e.rowCount+" rows selected "):(l=u>1?"s":"",e.rowCountMessage.select("span").text(u+" row"+l+" selected ")),e.tableMessage.node().appendChild(e.rowCountMessage.node())):e.tableMessage.text(""),o=0,h=e.startRowIndex,n=h+e.rows.length,i=r=s=h,a=n;a>=r;i=r+=1)e.selectedRows[i]&&o++;return e.tableWrapper.selectAll("thead").select("tr").classed("hx-table-row-selected",o>0)},s=function(t,e,n,i){var r,o,s,a,l,h,u;return r=i._,a={},l={},h={},u=function(t){var e,o,s,u,c,p,d,f,x,g,v,y,m,w;if(o=this,s=hx.select(t).classed("hx-table-filter-dropdown",!0),e=function(t,e){var s,u,c,p,d,f;return p=void 0,f=function(t){return h[e]=a[e].value(),r.modifiers.filter(n,t,e)},"contains"!==e?(d="greater"===e||"less"===e?e+" than":"startsWith"===e?"Starts with":e,d=d.charAt(0).toUpperCase()+d.slice(1),u=d+" filters..."):u="Filters...",l[e]=t.append("div").classed("hx-table-input-group hx-input-group",!0),a[e]=l[e].append("input").attr("placeholder",u).value(h[e]||(null!=(c=r.modifiers.filters[n])?c[e]:void 0)||""),"regex"===e?a[e].on("input",function(t){return function(){return clearTimeout(p),p=setTimeout(function(){var t,n,i;if(i=a[e].value(),a[e].style("border-color",""),i.length>0){try{n=new RegExp(i)}catch(r){t=r}return t?a[e].style("border-color","red"):f(n)}return f()},200)}}(this)):a[e].on("input",function(t){return clearTimeout(p),p=setTimeout(function(){return f(a[e].value())},200)}).on("keydown",function(t){var e;return e=t.keyCode?t.keyCode:t.which,27===e&&f(),13===e||27===e?o.hide():void 0}),s=l[e].append("button").attr("type","button")["class"]("hx-btn hx-negative"),s.append("i")["class"]("fa fa-times"),s.on("click",function(){return a[e].value(""),f(),0===i.options.enabledFilters.length?o.hide():void 0})},e(s,"contains"),i.options.enabledFilters.length>0){for(g=!1,x=function(t,e){var n;return n=t?"Less":"More",f.text(n),e?d.style("display",t?"block":"none"):d.morph()["with"](t?"expandv":"collapsev",150).go(),g=t},f=s.append("div")["class"]("hx-table-more-filters-link").append("a"),d=s.append("div")["class"]("hx-table-more-filters"),x(!1,!0),f.on("click",function(){return x("none"===d.style("display"))}),v=r.modifiers.filters[n],y=i.options.enabledFilters,w=[],c=0,p=y.length;p>c;c++)u=y[c],"contains"!==u?((null!=(m=h[u])?m.length:void 0)>0&&g===!1&&x(!0,!0),w.push(e(d,u))):w.push(void 0);return w}},o=r.useMobileView?"lblt":"rbrt",s=new hx.Dropdown(t,u,"",o,0),s.on("show",function(){return r.filterDropdown=s,a.contains.node().focus()}),hx.select(e).on("click",function(t){return t.stopPropagation(),s.toggle()})},l=function(t,e){var n,i,r,o,l,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M,C,D,T,P;return n=t._,n.modifiers.defaultCellValueLookup=t.options.defaultCellValueLookup,n.modifiers.defaultCellFilterValueLookup=t.options.defaultCellFilterValueLookup,n.modifiers.defaultCellSortValueLookup=t.options.defaultCellSortValueLookup,n.modifiers.cellValueLookup=a(t.options.cellValueLookup),n.modifiers.cellFilterValueLookup=a(t.options.cellFilterValueLookup),n.modifiers.cellSortValueLookup=a(t.options.cellSortValueLookup),n.modifiers.defaultCompare=t.options.defaultCompare,n.modifiers.columnCompare=t.options.columnCompare,n.lastRowSelected,n.shiftWasDown=!1,_=t.options.showSelection,b=null!=t.options.collapsibleRow,S=t.options.rowSelectable&&_&&!b,D=t.options.showSorts,r=t.options.showFilters,t.options.alwaysMobile?n.useMobileView=!0:t.options.useResponsive?(n.useMobileView=n.container.width()<480,n.currentView=n.useMobileView,n.responsiveListenerAdded||(n.responsiveListenerAdded=!0,n.container.on("resize",function(e){return function(){return n.currentView!==n.container.width()<480?(n.newSource=!0,t.render()):void 0}}(this)))):n.useMobileView=!1,i=function(t){return n.container.classed("hx-table-loading",!0),setTimeout(t,0)},c=function(t){var e;return"function"==typeof n.getHeaderCbCanceller&&n.getHeaderCbCanceller(),e=!1,n.getHeaderCbCanceller=function(t){return function(){return e=!0}}(this),n.feed.getHeader(function(i){return function(i){return e?void 0:(n.getHeaderCbCanceller=void 0,n.header=i,t())}}(this))},p=function(t){var e;return"function"==typeof n.getRowCountCbCanceller&&n.getRowCountCbCanceller(),e=!1,n.getRowCountCbCanceller=function(t){return function(){return e=!0}}(this),n.feed.getRowCount(function(i){return e?void 0:(n.getRowCountCbCanceller=void 0,n.rowCount=i,0===i&&(_=!1,b=!1,S=!1,D=!1,r=!1),t())})},P=function(e){var i;return void 0===n.processedSize?(t.paginator.setPageCount(void 0),n.paginatorContainer.style("display","")):(i=Math.ceil(n.processedSize/t.options.rowsPerPage),i>1?(t.paginator.setPageCount(i),n.paginatorContainer.style("display","")):n.paginatorContainer.style("display","none")),e()},l=function(e){var i,r,o;return"function"==typeof n.getRowsCbCanceller&&n.getRowsCbCanceller(),i=!1,n.getRowsCbCanceller=function(t){return function(){return i=!0}}(this),r=t.paginator.page()-1||0,o=t.options.rowsPerPage,n.feed.getRows(r*o,(r+1)*o,function(t,r){return i?void 0:(n.getRowsCbCanceller=void 0,n.rows=t,n.processedSize=r,e())})},f=function(t){var e;return n.newSource&&(n.tableWrapper.selectAll("table").remove(),e=n.tableWrapper.append("table")["class"]("hx-table hx-table-non-sticky"),e.append("thead").append("tr")["class"]("hx-table-header-row"),e.append("tbody"),e=n.tableWrapper.append("table")["class"]("hx-table hx-table-header-sticky"),e.append("thead").append("tr")["class"]("hx-table-header-row")),t()},k=function(t){var e;return e=t.append("th")["class"]("hx-table-cell hx-table-selection"),e.append("i")["class"]("fa fa-check"),e.node()},d=function(t,e){var n,i,r,o;return 0===e&&_?k(this):(n=this.append("th"),i=n.append("div"),r=i.append("span")["class"]("hx-table-header-left"),o=i.append("span")["class"]("hx-table-header-right"),r.append("span")["class"]("hx-table-header-name"),r.append("i")["class"]("hx-table-sort-icon fa fa-unsorted"),o.append("i")["class"]("fa fa-search"),n.node())},g=function(t){var e,i,o,s,a,l,u,c,p;return u=function(t,e,i){return 0!==i&&_||!_?(this.select(".hx-table-header-name").text(t.value),t.value===n.modifiers.sortColumn&&h(this.select(".hx-table-sort-icon"),n.modifiers.sortDirection),this.classed("hx-table-header-sort",D),this.classed("hx-table-header-filter",r)):void 0},a=function(t,e){var n;return n=this.append("th"),n.append("div")["class"]("hx-table-header-grouped-cell"),n.node()},l=function(t,e,n,i,r){return _&&t.unshift(void 0),hx.select(e).view("th").enter(a).update(function(t){var e;return null!=t&&(e=t[1]?t[1]:0===n?t[0]:void 0,this.attr("colspan",t[2]),this.select(".hx-table-header-grouped-cell").text(e)),t}).apply(t),e},n.header.columns.some(function(t){return null!=(null!=t?t.groups:void 0)})&&(s=n.header.columns,i=s.map(function(t){var e;return 1*((null!=t&&null!=(e=t.groups)?e.length:void 0)||0)}),e=hx.max(i),o=function(){p=[];for(var t=0;e>=0?e>t:t>e;e>=0?t++:t--)p.push(t);return p}.apply(this).map(function(t){return s.map(function(n){var i,r;if(null!=(null!=n?n.groups:void 0)){for(i=n.groups.slice(0),r=i[0];i.length<e;)i.unshift("");return[i.slice(0,+t+1||9e9).toString(),i[t]]}return["",""]})}),c=o.map(function(t){var e,n;return t.reduce(function(t,e){return e[0]===t[t.length-1][0]?(t[t.length-1][2]+=1,t):t.concat([[e[0],e[1],1]])},[[null!=(e=t[0])?e[0]:void 0,null!=(n=t[0])?n[1]:void 0,0]])}),n.tableWrapper.select("table").select("thead").view(".hx-table-header-group-row","tr").update(function(t,n,i){return l(t,n,i,e,c)}).apply(c)),s=_?[void 0].concat(n.header.columns):n.header.columns,n.tableWrapper.select("table").select("thead").select(".hx-table-header-row").view("th").enter(d).update(u).apply(s),t()},w=function(e){var i,o,a,l,c;return l=function(e,n){var i,r,o;return i=d.call(this,e,n),0===n&&_?hx.select(i).on("click",function(e){var n,r;return e.stopPropagation(),r=hx.select(i.parentNode),n=r.classed("hx-table-row-selected"),t._.lastRowSelected=void 0,M(0,t._.rows.length-1,!n),u(t)}):(r=hx.select(i).select(".hx-table-header-left"),o=hx.select(i).select(".hx-table-header-right"),s(i,o.node(),e.value.toLowerCase(),t)),i},c=function(t,e,i){return 0===i&&_&&_||(this.select(".hx-table-header-name").text(t.value),t.value===n.modifiers.sortColumn&&h(this.select(".hx-table-sort-icon"),n.modifiers.sortDirection),this.classed("hx-table-header-sort",D),this.classed("hx-table-header-filter",r)),this.select(".hx-table-header-left").on("click",function(){return D?n.modifiers.sort(t.value):void 0})},a=n.tableWrapper.select(".hx-table-header-sticky"),a.style("top",n.tableWrapper.node().scrollTop+"px"),o=_?[void 0].concat(n.header.columns):n.header.columns,a.select("thead").select(".hx-table-header-row").view("th").enter(l).update(c).apply(o),a.selectAll(".hx-table-header-group-row").remove(),i=n.tableWrapper.selectAll(".hx-table-header-group-row"),i.empty()||i.each(function(t){return a.select(".hx-table-header-row").insertBefore(t.cloneNode(!0))}),n.tableWrapper.on("scroll",function(t){return a.style("top",n.tableWrapper.node().scrollTop+"px")}),e()},m=function(t){return n.useMobileView?(n.tableWrapper.selectAll("thead").remove(),t()):g(function(){return w(function(){return t()})})},C=function(e,i,r,o,s,a){var l,h,c;return o&&null!=n.lastRowSelected?(n.shiftWasDown=!0,M(n.lastRowSelected,r),n.lastRowSelected=r):(n.shiftWasDown=!1,l=e.classed("hx-table-row-selected"),null!=r&&(n.lastRowSelected=r),h=null!=s?!s:e.classed("hx-table-row-selected"),!h!==l?(c=n.rows[r],h?delete n.selectedRows[i]:n.selectedRows[i]=c,t.has("rowselect")&&t.emit("rowselect",{rowData:c,selected:!h})):n.selectedRows[i]=void 0,e.classed("hx-table-row-selected",!h)),void(a||u(t))},M=function(e,i,r){var o,s,a,l,h,c,p,d,f,x,g;for(h=i,e>i&&(i=e,e=h,h=i),x=n.tableWrapper.select("tbody").selectAll("tr").nodes.map(hx.select),o=[],s=a=p=e,d=i;d>=a;s=a+=1)f=n.startRowIndex+s,o.push({row:x[s],index:f,isSelected:void 0!==n.selectedRows[f]});for(null==r&&o.some(function(t){return!t.isSelected&&t.index!==n.lastRowSelected})&&(r=!0),null==r&&n.shiftWasDown&&(r=!1),l=0,c=o.length;c>l;l++)g=o[l],(g.index!==n.lastRowSelected||n.shiftWasDown)&&C(g.row,g.index,g.index-n.startRowIndex,!1,r,!0);return void u(t)},x=function(e){var i,r,o,s,a,l,h,c,p,d,f,x;s=t.options.defaultCellRenderer||function(t,e,n){return this.text(t)},d=function(t,e,i,r){var o,s;return o=n.startRowIndex+r,s=hx.select(e.parentNode),s.classed("hx-table-row-selected",!!n.selectedRows[o]),this.on("click",function(t){return t.stopPropagation(),C(s,o,r,t.shiftKey)})},l={},h=t.options.cellRenderers;for(a in h)x=h[a],l[a.toLowerCase()]=x;return c=n.header.columns.map(function(t){return l[t.value.toLowerCase()]||s}),_&&(c=[d].concat(c)),r=function(t,e){return 0===e&&_?k(this,t,e):this.append("td")["class"]("hx-table-cell").node()},o=function(t,e,n,i){return c[n].call(this,t,e,n,i)},p=function(e,i,s){var a,l,h,u,c,p,d;return p=s,n.startRowIndex=(t.paginator.page()-1)*t.options.rowsPerPage,u=e.columns?e.columns:e,c=_?[void 0].concat(u):u,this.view(".hx-table-cell").enter(r).update(function(t,e,n){return o.call(this,t,e,n,p)}).apply(c),S&&this.on("click",function(t){return function(e){return e.stopPropagation(),C(t,n.startRowIndex+s,p,e.shiftKey)}}(this)),b?(h=!1,a=function(n){var i,r,o,s,a;return r=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row",!0),o=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row-hidden",!0),_&&r.append("th"),i=r.append("td").attr("colspan","99").style("padding","10px").append("div").classed("hx-table-collapsible-content",!0),s=n.nextElementSibling,a=n.parentNode,s?(a.insertBefore(o.node(),s),a.insertBefore(r.node(),s)):(h=!0,r.classed("hx-lastrow",!0),a.appendChild(o.node()),a.appendChild(r.node())),t.options.collapsibleRow(i.node(),e),{contentRow:r,hiddenRow:o,visible:!1}},d=function(){var t;return t=l,h&&hx.select(i).classed("hx-lastrow",t.visible),t.visible?(t.visible=!1,t.contentRow.style("display","none"),t.hiddenRow.style("display","none")):(t.visible=!0,t.contentRow.style("display",""),t.hiddenRow.style("display",""))},l=void 0,this.on("click",function(n){return function(i){return null==l&&(l=a(n.node())),d(),t.has("rowcollapsible")?t.emit("rowcollapsible",{rowData:e,isOpen:l.visible}):void 0}}(this))):void 0},n.tableWrapper.select(".hx-table-non-sticky").classed("hx-table-mobile",!1),n.tableWrapper.selectAll(".hx-table-collapsible-content-row").remove(),n.tableWrapper.selectAll(".hx-table-collapsible-content-row-hidden").remove(),n.rows.length>0?(i=n.tableWrapper.select(".hx-table-non-sticky").select("tbody"),i.select(".hx-table-no-data").remove(),i.view("tr","tr").update(p).apply(n.rows)):(f=n.tableWrapper.select(".hx-table-non-sticky"),f.select("tbody").remove(),f.append("tbody").append("tr")["class"]("hx-table-no-data").append("td").attr("colspan",99).text(t.options.noDataMessage)),u(t),e()},v=function(e){var i,o,a,l,c,p,d,f,x;return o=t.options.defaultCellRenderer||function(t,e,n){return this.text(t)},a=n.header.columns.map(function(e){return t.options.cellRenderers[e.value.toLowerCase()]||o}),i=function(t,e,n,i){return a[n].call(this,t,e,n,i)},l=function(e,n,i){var r,o,a,l,h;return l=this.append("tr")["class"]("hx-table-responsive-row"),0===n&&l.classed("hx-table-responsive-row-first",!0),h=l.append("th"),r=h.append("div"),a=r.append("span")["class"]("hx-table-header-right"),o=r.append("span")["class"]("hx-table-header-left"),o.append("i")["class"]("hx-table-sort-icon fa"),o.append("span")["class"]("hx-table-header-name"),a.append("i")["class"]("fa fa-search"),s(a.node(),a.node(),e[0].toLowerCase(),t),l.append("td"),l.node()},c=function(t,e,o,s){var a,l,u;return l=this.select("td"),l.attr("rowspan",""),l.style("display",""),i.call(l,t[1],l.node(),o,s),u=this.select("th"),this.select(".hx-table-header-name").text(t[0]),u.classed("hx-table-header-sort",D&&0===s),u.classed("hx-table-header-filter",r&&0===s),this.select(".hx-table-header-left").on("click",function(e){return D?(e.stopPropagation(),n.modifiers.sort(t[0])):void 0}),a=n.modifiers.sortColumn===t[0]?n.modifiers.sortDirection:void 0,h(this.select(".hx-table-sort-icon"),a)},p=function(e,i,o,s){var a,l,u;return l=this.select("td"),0===o?(l.text(t.options.noDataMessage),l.style("display",""),l.attr("rowspan",n.header.columns.length+1)):(l.text(""),l.style("display","none")),u=this.select("th"),this.select(".hx-table-header-name").text(e),u.classed("hx-table-header-sort",D&&0===s),u.classed("hx-table-header-filter",r&&0===s),this.select(".hx-table-header-left").on("click",function(t){return D?(t.stopPropagation(),n.modifiers.sort(e[0])):void 0}),a=n.modifiers.sortColumn===e[0]?n.modifiers.sortDirection:void 0,h(this.select(".hx-table-sort-icon"),a)},d=function(){var t,e;return t=this.append("tbody"),_&&(e=t.append("tr").append("th")["class"]("hx-table-selection").attr("rowspan",n.header.columns.length+1),e.append("i")["class"]("fa fa-check")),t.node()},f=function(e,i,r){var o,s,a,h,u,d;return h=n.header.columns.map(function(t){return t.value}),u=r,n.startRowIndex=(t.paginator.page()-1)*t.options.rowsPerPage,a=(null!=e?e.columns:void 0)?e.columns:e,this.classed("hx-table-no-data",void 0===a),void 0===a?this.view(".hx-table-responsive-row").enter(function(t,e){return l.call(this,t,e,u)}).update(function(t,e,n){return p.call(this,t,e,n,u)}).apply(h):this.view(".hx-table-responsive-row").enter(function(t,e){return l.call(this,t,e,u)}).update(function(t,e,n){return c.call(this,t,e,n,u)}).apply(hx.zip([h,a])),_&&this.select(".hx-table-selection").on("click",function(t){return function(e){return void 0!==a?(e.stopPropagation(),C(t,n.startRowIndex+r,u,e.shiftKey)):void 0}}(this)),S&&this.on("click",function(t){return function(e){return void 0!==a?(e.stopPropagation(),C(t,n.startRowIndex+r,u,e.shiftKey)):void 0}}(this)),b?(o=function(n){var i,r,o;return r=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row",!0),o=hx.select(document.createElement("tr")).classed("hx-table-collapsible-content-row-hidden",!0),r.append("th"),_&&r.append("th"),i=r.append("td").attr("colspan","99").style("padding","10px").append("div").classed("hx-table-collapsible-content",!0),r.classed("hx-lastrow",!0),n.appendChild(o.node()),n.appendChild(r.node()),t.options.collapsibleRow(i.node(),e),{contentRow:r,hiddenRow:o,visible:!1}},d=function(t){return function(){var e,n;return e=s,n=t.selectAll(".hx-table-responsive-row"),hx.select(n.node(n.size()-1)).classed("hx-lastrow",e.visible),e.visible?(e.visible=!1,e.contentRow.style("display","none"),e.hiddenRow.style("display","none")):(e.visible=!0,e.contentRow.style("display",""),e.hiddenRow.style("display",""))}}(this),s=void 0,this.on("click",function(n){return function(i){var r;return null!=s&&(r=s.contentRow.node().contains(i.target)),!r&&(null==s&&(s=o(n.node())),d(),t.has("rowcollapsible"))?t.emit("rowcollapsible",{rowData:e,isOpen:s.visible}):void 0}}(this))):void 0},n.tableWrapper.select(".hx-table-non-sticky").classed("hx-table-mobile",!0),x=n.rows.length>0?n.rows:[void 0],n.tableWrapper.on("scroll",function(t){return null!=n.filterDropdown?(n.filterDropdown.hide(),n.filterDropdown=void 0):void 0}),n.tableWrapper.select(".hx-table-non-sticky").select("tbody").remove(),n.tableWrapper.select(".hx-table-non-sticky").view("tbody").enter(d).update(f).apply(x),u(t),e()},y=function(t){return n.useMobileView?v(t):x(t)},o=function(t){var e,i;return i=n.tableWrapper.select(".hx-table-non-sticky").style("width"),n.tableWrapper.select(".hx-table-header-sticky").style("width",i),e=n.tableWrapper.select(".hx-table-non-sticky").select("thead").select(".hx-table-header-row").selectAll("th").style("width"),n.tableWrapper.select(".hx-table-header-sticky").select("thead").select(".hx-table-header-row").selectAll("th").each(function(t,n){return hx.select(t).style("width",e[n])}),t()},T=function(t){return n.newSource=!1,n.container.classed("hx-table-loading",!1),n.rendered=!0,t()},i(function(){return c(function(){return p(function(){return l(function(){return P(function(){return f(function(){return y(function(){return m(function(){return o(function(){return T(function(){return t.emit("render"),"function"==typeof e?e():void 0})})})})})})})})})}),t},o}(hx.EventEmitter),hx.Table=t}(),function(){var t;hx.supports("touch")&&(t=function(t,e){var n,i,r,o,s,a,l;return l=n=r=null,o=10,i=function(t){var e,n;return e=t.originalEvent||t,n=e.touches||e.targetTouches,n?[n[0].pageX,n[0].pageY]:void 0},s=void 0,a=void 0,t.addEventListener("touchstart",function(t){var e;return t.touches&&t.touches.length>1||t.targetTouches&&t.targetTouches.length>1?!1:(e=i(t),s=e[0],a=e[1],e)}),t.addEventListener("touchmove",function(t){var e;return!n&&(e=i(t),e&&(Math.abs(a-e[1])>o||Math.abs(s-e[0])>o))?n=!0:void 0}),t.addEventListener("touchend",function(t){return clearTimeout(r),r=setTimeout(function(){return l=!1,n=!1},1e3),t.which&&t.which>1||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey?void 0:(t.preventDefault(),n||l&&l!==t.type?void(n=!1):(l=t.type,e.emit("click",t)))})},hx.select.addEventAugmenter({name:"click",setup:t}))}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function i(t){this.selector=t,i.__super__.constructor.apply(this,arguments),this.formId="form-"+hx.randomId()+"-",this.properties=new hx.Map,hx.select(this.selector).classed("hx-form",!0).on("keypress",function(t){var e;return e=hx.select(t.target||t.srcElement),13===t.keyCode&&"submit"!==e.attr("type")?t.preventDefault():void 0})}return e(i,t),i.prototype.add=function(t,e,n,i){var r,o,s,a,l;return s=this.formId+t.split(" ").join("-"),r=hx.select(this.selector).append("div"),r.append("label").attr("for",s).text(t),l=r.append(n).attr("id",s),o=i.call(l)||{},null!=o.key?(a=o.key,delete o.key,this.properties.set(a,{type:e,node:l.node(),extras:o})):this.properties.set(t,{type:e,node:l.node(),extras:o}),this},i.prototype.addText=function(t,e){return null==e&&(e={}),null==e.type&&(e.type="text"),null==e.attrs&&(e.attrs=[]),this.add(t,"text","input",function(){var t,n,i,r,o;for(o=this.attr("type",e.type),null!=e.autoCompleteData&&"password"!==e.type&&"number"!==e.type&&new hx.AutoComplete(o.node(),e.autoCompleteData,null!=e.autoCompleteOptions?e.autoCompleteOptions:e.autoCompleteOptions=void 0),null!=e.placeholder&&o.attr("placeholder",e.placeholder),e.required&&o.attr("required",e.required),r=e.attrs,n=0,i=r.length;i>n;n++)t=r[n],o.attr(t.type,t.value);return null!=e.validator&&(o.node().oninput=function(t){return function(t){return t.target.setCustomValidity(e.validator(t)||"")}}(this)),{required:e.required,key:e.key}})},i.prototype.addEmail=function(t,e){return null==e&&(e={}),e.type="email",this.addText(t,e)},i.prototype.addUrl=function(t,e){return null==e&&(e={}),e.type="url",this.addText(t,e)},i.prototype.addNumber=function(t,e){return null==e&&(e={}),e.type="number",e.attrs=[{type:"step",value:e.step}],null!=e.min&&e.attrs.push({type:"min",value:e.min}),null!=e.max&&e.attrs.push({type:"max",value:e.max}),this.addText(t,e)},i.prototype.addPassword=function(t,e){return null==e&&(e={}),e.type="password",this.addText(t,e)},i.prototype.addSelect=function(t,e,n){return null==n&&(n={}),this.add(t,"select","div",function(){var t,i,r,o;return t="hx-btn",null!=n.buttonClass&&(t+=" "+n.buttonClass),i=this.append("div")["class"](t),o=new hx.Select(i.node()),hx.isObject(e[0])&&o.renderer(function(t,e){return hx.select(t).text(e.text)}),e.length>0&&o.items(e),"boolean"!=typeof n.required&&o.value(e[0]),n.required&&(r=this.append("input").style("margin","0.25em 0 0 0").style("padding",0).style("width","1.5em").style("height","1.5em").style("position","absolute").style("left","0.5em").style("top","13px").style("z-index",-1).attr("size",0),r.node().setCustomValidity("Please select a value from the list"),this.style("position","relative"),o.on("change",function(){return r.node().setCustomValidity("")})),{required:n.required,select:o,key:n.key}})},i.prototype.addCheckbox=function(t,e){return null==e&&(e={}),this.add(t,"checkbox","input",function(){return this.attr("type","checkbox"),null!=e.required&&this.attr("required",e.required),{required:e.required,key:e.key}})},i.prototype.addRadio=function(t,e,n){var i;return null==n&&(n={}),i=this,this.add(t,"radio","div",function(){var r,o,s,a,l,h,u;for(s=i.formId+t.split(" ").join("-"),r=0,o=0,l=e.length;l>o;o++)u=e[o],h=this.append("div")["class"]("hx-radio-container"),a=h.append("input").attr("type","radio").attr("name",s).attr("id",s+"-"+r).value(u),null!=n.required&&a.attr("required",n.required),h.append("label").attr("for",s+"-"+r).text(u),r+=1;return{required:n.required,key:n.key}})},i.prototype.addDatePicker=function(t,e){return null==e&&(e={}),this.add(t,"datepicker","div",function(){var t,n,i;return t=new hx.DatePicker(this.append("div").node(),e.type,e.closeOnSelect,e.selectRange),null!=e.selectRange?(n=function(){return datePicker.range()},i=function(e){return t.range(e.startDate,e.endDate,!1,!0)},null!=e.startDate&&null!=e.endDate&&t.range(e.startDate,e.endDate,!1,!0)):(n=function(){return t.date()},i=function(e){return t.date(e)}),{key:e.key,datepicker:t,getValue:n,setValue:i}}),this},i.prototype.addTimePicker=function(t,e){return null==e&&(e={}),this.add(t,"timepicker","div",function(){var t,n,i;return i=new hx.TimePicker(this.append("div").node(),e.showSeconds,e.buttonClass),t=function(){return i.date()},n=function(t){return i.date(t)},{key:e.key,timepicker:i,getValue:t,setValue:n}}),this},i.prototype.addDateTimePicker=function(t,e){return null==e&&(e={}),this.add(t,"datetimepicker","div",function(){var t,n,i;return t=new hx.DateTimePicker(this.append("div").node(),e.type,e.showSeconds),n=function(){return t.date()},i=function(e){return t.date(e)},{key:e.key,datetimepicker:t,getValue:n,setValue:i}}),this},i.prototype.addSubmit=function(t,e){return hx.select(this.selector).append("button").attr("type","submit")["class"]("hx-btn hx-positive hx-form-submit").html('<i class="'+e+'"></i> '+t).on("click",function(t){return function(e){return hx.select(t.selector).node().checkValidity()||13===e.keyCode?(e.preventDefault(),t.submit()):void 0}}(this)),this},i.prototype.addTagInput=function(t,e){var n;return null==e&&(e={}),n=this,this.add(t,"tagInput","div",function(){var t,n;return t=e.classifier,n=e.validator,{tagInput:new hx.TagInput(this.node(),t,n),key:e.key}}),this},i.prototype.submit=function(){return this.emit("submit",this.data())},i.prototype.data=function(t){var e,i,r,o,s;if(arguments.length>0){for(i in t)if(n.call(t,i)&&(s=t[i],this.properties.has(i)))switch(e=this.properties.get(i),r=e.node,e.type){case"checkbox":hx.select(r).prop("checked",s);break;case"radio":hx.select(r).selectAll("input").filter(function(t){return hx.select(t).value()===s}).prop("checked",!0);break;case"tagInput":s.forEach(function(t){return e.extras.tagInput.add(t)});break;case"select":e.extras.select.value(s);break;case"datepicker":case"timepicker":case"datetimepicker":e.extras.setValue(s);break;default:hx.select(r).value(s)}return this}return o={},this.properties.forEach(function(t,e){return s=function(){switch(e.type){case"checkbox":return hx.select(e.node).prop("checked");case"radio":return hx.select(e.node).select("input:checked").value();case"tagInput":return e.extras.tagInput.tags();case"select":return e.extras.select.value();case"datepicker":case"timepicker":case"datetimepicker":return e.extras.getValue();default:return hx.select(e.node).value()}}(),o[t]=s}),o},i.prototype.fill=function(t){return hx.deprecatedWarning(this.selector+": Form.fill(data)","Use Form.data(data) instead."),this.data.apply(this,arguments)},i.prototype.getData=function(){return hx.deprecatedWarning(this.selector+": Form.getData()","Use Form.data() instead."),this.data.apply(this,arguments)},i.prototype.render=function(t){},i}(hx.EventEmitter),hx.Form=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t){var e,r;this.selector=t,e=hx.select(this.selector),r=e.text(),e.text(""),this.textSelection=e.append("a")["class"]("hx-morph-toggle").text(r),e.append("div")["class"]("hx-morph-content hx-input-group").add(hx.detached("input")["class"]("hx-name")).add(hx.detached("button")["class"]("hx-btn hx-positive hx-confirm").add(hx.detached("i")["class"]("fa fa-check"))),n.__super__.constructor.call(this,this.selector,i,function(){})}var i;return e(n,t),i=function(t,e){return hx.select(e).select(".hx-name").value(hx.select(t).text()),hx.select(e).select(".hx-confirm").on("click",function(t){return function(){var n;return n=hx.select(e).select(".hx-name").value(),t.textSelection.text(n),t.emit("change",{api:!1,value:n}),t.hide()}}(this))},n.prototype.value=function(t){return void 0!==t?(this.textSelection.text(t),this.emit("change",{api:!1,value:t})):this.textSelection.text()},n}(hx.InlineMorphSection),hx.InlineEditable=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t,e){var o,s;this.selector=t,null==e&&(e="hx-compliment"),this.current=void 0,s=hx.select(this.selector),o=hx.detached("button")["class"]("hx-btn hx-inline-select "+e).node(),this.textSelection=s.append("a")["class"]("hx-morph-toggle"),s.append("div")["class"]("hx-morph-content hx-input-group").add(o).add(hx.detached("button")["class"]("hx-btn hx-positive hx-confirm").add(hx.detached("i")["class"]("fa fa-check"))),this.select=new hx.Select(o),this.select.menu.dropdown.on("show",function(t){return function(){return t.detector.addException(t.select.menu.dropdown.dropdown.node())}}(this)),n.__super__.constructor.call(this,this.selector,i,r)}var i,r;return e(n,t),i=function(t,e){var n;return this.select.value((null!=(n=this.current)?n.value:void 0)||this.current),hx.select(e).select(".hx-confirm").on("click",function(t){return function(){return t.current=t.select.value(),t.textSelection.text(t.current.name||t.current),t.emit("change",{api:!1,value:t.current}),t.hide()}}(this))},r=function(t,e){},n.prototype.renderer=function(t){return this.select.renderer(t),this},n.prototype.items=function(t){return this.select.items(t),this},n.prototype.value=function(t){return arguments.length>0?(this.select.value(t),this.current=this.select.value(),this.textSelection.text(this.current.name||this.current),this.emit("change",{api:!0,value:this.current}),this):this.current},n}(hx.InlineMorphSection),hx.InlineSelect=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t){var e,i;n.__super__.constructor.apply(this,arguments),this.container=hx.select(t).classed("hx-paginator",!0),this._={selector:t},i=this,this.container.append("button").attr("type","button")["class"]("hx-btn "+hx.theme.paginator.arrowButton).html('<i class="fa fa-step-backward"></i>').on("click",function(){return void 0===i.pageCount?o(i,i.selected-1,"user"):o(i,0,"user")}),e=this.container.append("span")["class"]("hx-input-group"),this.view=e.view(".hx-btn","button").update(function(t,e,n){return this.text(t.value).attr("type","button").classed("hx-paginator-three-digits",3===t.dataLength).classed("hx-paginator-more-digits",t.dataLength>3).classed(hx.theme.paginator.defaultButton,!t.selected).classed(hx.theme.paginator.selectedButton,t.selected).classed("hx-no-border",!0).on("click",function(){return o(i,t.value,"user")})}),this.container.append("button").attr("type","button")["class"]("hx-btn "+hx.theme.paginator.arrowButton).html('<i class="fa fa-step-forward"></i>').on("click",function(){return void 0===i.pageCount?o(i,i.selected+1,"user"):o(i,i.pageCount,"user")}),this.container.on("resize",function(){return r(i)}),this.visibleCount=10,this.pageCount=10,this.selected=1,r(this)}var i,r,o;return e(n,t),i=function(t,e,n){var i,r;return r=Math.max(1,t-Math.floor(e/2)),i=Math.min(r+e,n+1),r=Math.max(1,i-e),{start:r,end:i}},r=function(t){var e,n,r,o,s,a,l,h,u,c;return void 0===t.pageCount?r=[{value:t.selected,selected:!0,dataLength:t.selected.toString().length}]:(l=i(t.selected,t.visibleCount,t.pageCount),u=l.start,o=l.end,a=Math.max(u.toString().length,(o-1).toString().length),e=30+5*Math.max(0,a-2),n=t.container.width()-81,s=Math.floor(n/e),c=Math.min(s,t.visibleCount),c=Math.max(c,1),h=i(t.selected,c,t.pageCount),u=h.start,o=h.end,r=hx.range(o-u).map(function(e){return{value:u+e,selected:t.selected===u+e,dataLength:a}})),t.view.apply(r)},o=function(t,e,n){var i;return i=void 0===t.pageCount?Math.max(e,1):hx.clamp(1,t.pageCount,e),i!==t.selected?(t.selected=i,r(t),t.emit("change",{cause:n,selected:t.selected})):void 0},n.prototype.setPage=function(t){return hx.deprecatedWarning(this._.selector+": Paginator.setPage(i)","Use Paginator.page(i) instead"),this.page.apply(this,arguments);
},n.prototype.getPage=function(){return hx.deprecatedWarning(this._.selector+": Paginator.getPage()","Use Paginator.page() instead"),this.page.apply(this,arguments)},n.prototype.page=function(t){return arguments.length>0?(o(this,t,"api"),this):this.selected},n.prototype.setPageCount=function(t){return this.pageCount=t,r(this),this},n.prototype.setVisibleCount=function(t){return this.visibleCount=t,r(this),this},n}(hx.EventEmitter),hx.Paginator=t}(),function(){var t,e,n,i,r,o;t=hx.flatten(["Visible","Formatter","TickRotation","Min","Max","DiscretePadding","DiscreteLabels","TickSpacing","Title","ScalePaddingMin","ScalePaddingMax","TicksAll","GridLines","NthTickVisible"].map(function(t){return["x"+t,"y"+t]})),o=["class","stroke","color","fill","fillColor","feather","markers","markerRadius","markerColor","group","size"],e=function(n,i){var r,s,a,l,h,u,c,p,d,f,x,g,v,y,m;for(e=new hx.Graph(n),g=i.axes,a=0,c=g.length;c>a;a++){for(s=g[a],r=e.addAxis(s.xType||"linear",s.yType||"linear"),l=0,p=t.length;p>l;l++)x=t[l],hx.defined(s[x])&&(r[x]=s[x]);for(v=s.series,h=0,d=v.length;d>h;h++)for(m=v[h],y=r.addSeries(m.type||"line",m.name),y.setData(m.data),y.label.interpolate=m.label.interpolate,u=0,f=o.length;f>u;u++)x=o[u],hx.defined(m[x])&&(y[x]=m[x])}return e.render(),e},i=["segmentPadding","innerPadding","ringPadding","totalAngle","startAngle","color","label","formatter"],n=function(t,n){var r,o,s;for(e=new hx.PieChart(t),r=0,o=i.length;o>r;r++)s=i[r],hx.defined(n[s])&&(e[s]=n[s]);return console.log(n),e.setData(n.series),e.render(),e},r=function(t,i){switch(i.type){case"pie":return n(t,i);default:return e(t,i)}},hx.plot=r;var s,a,l,h,u,c,p,d,f,x,g,v;v=function(t,e){var n,i,r,o,s;if(t.length>1){for(s=new Array(t.length),s[0]="M"+t[0].x+","+t[0].y,r=t.length-1,n=i=1,o=r;o>=1?o>=i:i>=o;n=o>=1?++i:--i)s[n]="L"+t[n].x+","+t[n].y;return e?s.join("")+"z":s.join("")}return""},s=function(t,e,n,i,r,o,s,a){var l,h,u,c,p,d;return l=function(t,e){return t/e},c=function(n,i,a){var u,c,p,f,x,g,v,y,m;for(x=l(s,a),p=Math.abs(i-n),y=[],u=c=g=n,v=i;v>=g?v>=c:c>=v;u=v>=g?++c:--c)f=d-x,m=f>0?r+x/2+u/p*f:o-x/2-u/p*f,m=hx.clamp(r,o,m),y.push(h.push({x:t+a*Math.cos(m),y:e+a*Math.sin(m)}));return y},d=o-r,u=Math.min(100,Math.max(3,Math.floor(d*Math.sqrt(i))-1)),h=[],s>=n?(p=Math.max(s,n)/(2*Math.sin(2*Math.PI/a)),h.push({x:t+p*Math.cos((r+o)/2),y:e+p*Math.sin((r+o)/2)})):c(0,u,n),c(u,0,i),v(h,!0)},h=function(t,e){var n,i,r,o,s;if(t.length>0){for(s=e(t[0]),o=e(t[0]),i=0,r=t.length;r>i;i++)n=t[i],s=hx.min([s,e(n)]),o=hx.max([o,e(n)]);return[s,o]}return void 0},u=function(t,e,n){var i,r,o,s,a;if(t.length>0){for(a=e(t[0]),s=e(t[0]),r=0,o=t.length;o>r;r++)i=t[r],a=hx.min([a,e(i),n(i)]),s=hx.max([s,e(i),n(i)]);return[a,s]}return void 0},c=function(t,e){var n,i,r,o,s;if(null==e&&(e=200),e>1){if(o=t.length,o>e){for(r=new Array(e),n=i=0,s=e;s>i;n=i+=1)r[n]=t[Math.floor(n*(o-1)/(e-1))];return r}return t.slice(0)}return 1===e&&t.length>0?[t[Math.floor(t.length/2)]]:[]},x=function(t,e){var n,i,r,o,s,a,l;for(null==e&&(e=function(){}),a=t.length,o=[],i=void 0,n=!0,s=0,l=t.length;l>s;s++)r=t[s],e(r)?(n&&(i=[],o.push(i),n=!1),i.push(r)):n=!0;return o.filter(function(t){return t.length>0})},f=function(t,e,n){var i,r,o,s,a,l;if(null==n&&(n=function(){}),e){for(r=e/t.length,a=x(t,n),l=[],o=0,s=a.length;s>o;o++)i=a[o],l.push(c(i,Math.floor(i.length*r)));return l}return x(t,n)},g=function(t,e,n){var i,r,o,s,a,l;for(s=[],a=0,i=r=0,o=t.length;o>r;i=++r)l=t[i],s.push({y0:a,y1:a+l.value,yname:e[i],y:l.value,data:l,x:n}),a+=l.value;return s},p=function(t,e,n,i){var r,o,s;for(r=o=0,s=t.length-1;s>o;r=o+=1)if(i(t[r])<=e&&e<=i(t[r+1]))return n?Math.abs(i(t[r])-e)<Math.abs(i(t[r+1])-e)?r:r+1:r;return-1},a=function(t,e){return t.bounding=e.plotArea,t},l=function(t,e,n){var i,r;return i=hx.randomId(),hx.select(t).select(".hx-linear-gradient").remove(),r=hx.select(t).append("linearGradient").attr("class","hx-linear-gradient").attr("id",i).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",n.axis.yScale.rangeMin).attr("y2",n.axis.yScale.rangeMax),e.forEach(function(t){return r.append("stop").attr("offset",(t.yValue-n.axis.yScale.domainMin)/(n.axis.yScale.domainMax-n.axis.yScale.domainMin)*100+"%").attr("stop-color",hx.color(t.color).alpha(1).toString()).attr("stop-opacity",hx.color(t.color).a)}),i},d=function(t,e){var n,i;return n=t.select(".hx-legend-box"),0===n.size()&&(n=t.append("rect")["class"]("hx-legend-box")),t.view(".hx-legend-entry","g").enter(function(){var t;return t=this.append("g")["class"]("hx-legend-entry"),t.append("text"),t.append("rect"),t.node()}).update(function(t,e,n){return this.select("text").text(t.name).attr("y",20*n+10).attr("x",15),this.select("rect").text(t.name).attr("y",20*n).attr("x",0).attr("width",10).attr("height",10).attr("fill",t.color)}).apply(e),i=hx.max(t.selectAll("text").map(function(t){return t.getComputedTextLength()})),n.attr("width",i+6+20),n.attr("x",-5),n.attr("height",20*e.length),n.attr("y",-5),t};var y,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;y=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.data=[],this.featheredData=[],this.axis=null,this.label={enabled:!0,type:hx.plot.label.standard,formatters:{}},this.name=null}return m(e,t),e.prototype.setData=function(t){return this.data=t},e.prototype.getX=function(t){var e,n;return hx.isString(t)?(e=hx.find(this.data,function(e){return e.y===t}),hx.defined(e)?e.x:void 0):(n=p(this.data,t,!0,function(t){return t.y}),this.data[n].x)},e.prototype.getY=function(t){var e,n,i,r,o,s;return hx.isString(t)?(e=hx.find(this.data,function(e){return e.x===t}),hx.defined(e)?e.y:void 0):(n=p(this.data,t,!1,function(t){return t.x}),n>=0&&n<this.data.length-1?(i=this.data[n].x,r=this.data[n+1].x,o=this.data[n].y,s=this.data[n+1].y,o+(s-o)*(t-i)/(r-i)):t>this.data[this.data.length-1].x?this.data[this.data.length-1].y:this.data[0].y)},e.prototype.setLabel=function(t){return this.label=t},e.prototype.createLabelValues=function(t){return[{name:this.axis.xTitle,value:t.xLabel||t.x,formatter:this.label.formatters[this.axis.xTitle]||this.axis.xFormatter},{name:this.axis.yTitle,value:t.yLabel||t.y,formatter:this.label.formatters[this.axis.yTitle]||this.axis.yFormatter}]},e.prototype.getLabelDetails=function(t,e){},e.prototype.updateSvg=function(t){},e}(hx.EventEmitter);var b;b=function(){function t(t,e){this.xScaleType=null!=t?t:"linear",this.yScaleType=null!=e?e:"linear",this.xVisible=!0,this.xFormatter=hx.format.si(2),this.xTickRotation=0,this.xMin="auto",this.xMax="auto",this.xDiscretePadding=.1,this.xDiscreteLabels=void 0,this.xTickSpacing=50,this.xTitle=null,this.xScalePaddingMin=0,this.xScalePaddingMax=0,this.xTicksAll=!1,this.xGridLines=!0,this.xNthTickVisible=1,this.yVisible=!0,this.yFormatter=hx.format.si(2),this.yMin="auto",this.yMax="auto",this.yDiscretePadding=.1,this.yDiscreteLabels=void 0,this.yTickSpacing=50,this.yTitle=null,this.yScalePaddingMin=0,this.yScalePaddingMax=0,this.yTicksAll=!1,this.yGridLines=!0,this.yNthTickVisible=1,this.series=new hx.List,this.xScale=new C(0,1,0,1),this.yScale=new C(0,1,0,1),this.graph=null,this.xAxisSize=50,this.yAxisSize=50,this.xTitleHeight=0,this.yTitleHeight=0}var e,n;return n=function(t){return t instanceof A||t instanceof L},t.prototype.addSeries=function(t,e){return null==t&&(t="line"),null==e&&(e=""),hx.isString(t)&&(t=function(){switch(t){case"line":return new L;case"band":return new P;case"bar":return new A;case"scatter":return new E;case"straight-line":return new z;default:return void console.error(t+" is not a valid series type")}}(),void 0!==t&&(t.name=e)),void 0!==t?(this.series.add(t),t.axis=this,t):void 0},t.prototype.removeSeries=function(t){return this.series.remove(t),t.axis=null},t.prototype.setupAxisSvg=function(t){var e,n,i;return e=hx.select(t).append("g")["class"]("hx-axis-grid"),n=hx.select(t).append("g")["class"]("hx-x-axis"),n.append("g")["class"]("hx-axis-scale"),i=hx.select(t).append("g")["class"]("hx-y-axis"),i.append("g")["class"]("hx-axis-scale")},e=function(t,e,n){return t+(e||1)*n},t.prototype.tagSeries=function(){var t,e,n,i,r,o,s,a,l,h,u;for(t=function(t){var e,n,i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y;for(i=new hx.Map,s=0,l=t.length;l>s;s++)v=t[s],i.has(v.group)||i.set(v.group,new hx.List),i.get(v.group).add(v);for(o=0,y=i.size,y+=i.has(void 0)?i.get(void 0).size-1:0,f=i.entries(),a=0,h=f.length;h>a;a++)if(e=f[a],n=e[0],"undefined"===n)for(x=e[1].entries(),r=p=0,u=x.length;u>p;r=++p)v=x[r],v.groupId=o,o++,v.seriesId=0,v.groupSize=1,v.typeSize=y;else{for(g=e[1].entries(),r=d=0,c=g.length;c>d;r=++d)v=g[r],v.groupId=o,v.seriesId=r,v.groupSize=e[1].size,v.typeSize=y;o++}return o},u=new hx.Map,o=this.series.entries(),e=0,i=o.length;i>e;e++)l=o[e],u.has(l.type)||u.set(l.type,new hx.List),u.get(l.type).add(l);for(s=u.entries(),a=[],n=0,r=s.length;r>n;n++)h=s[n],a.push(t(h[1].entries()));return a},t.prototype.preupdateXAxisSvg=function(t){var n,i,r,o,s,a,l,u,c,p,d,f,x,g,v,y;switch(c=this,this.xScaleType){case"linear":this.xScale=(new C).range(0,this.graph.width);break;case"discrete":this.xScale=new D(this.xDiscretePadding).range(0,this.graph.width);break;case"log":this.xScale=(new LogScale).range(0,this.graph.width);break;case"date":this.xScale=(new T).range(0,this.graph.width)}return"discrete"===this.xScaleType?(s=function(){var t,e,n,i,r,s;if(this.xDiscreteLabels)return this.xDiscreteLabels;for(d=new hx.Set,r=this.series.entries(),t=0,n=r.length;n>t;t++)for(p=r[t],s=p.data,e=0,i=s.length;i>e;e++)o=s[e],d.add(o.x);return d.values()}.call(this),this.xScale.domain(s)):(y=function(){var t,e,n,i;for(n=this.series.entries(),i=[],t=0,e=n.length;e>t;t++)u=n[t],u instanceof z?u.data.dx||u.data.dy||!u.data.x?i.push(void 0):i.push([u.data.x,u.data.x]):i.push(h(u.data,function(t){return t.x}));return i}.call(this),y=y.filter(hx.identity),v=hx.min(y.map(function(t){return t[0]})),g=hx.max(y.map(function(t){return t[1]})),v="auto"===this.xMin?v:this.xMin,g="auto"===this.xMax?g:this.xMax,"auto"===this.xMin&&(v=e(v,g-v,-this.xScalePaddingMin)),"auto"===this.xMax&&(g=e(g,g-v,this.xScalePaddingMax)),f=v+(g-v)*this.graph.zoomStart,a=v+(g-v)*this.graph.zoomEnd,this.xScale.domain(f,a)),x=0,this.xVisible?(r=hx.select(t).select(".hx-x-axis"),i=this.xTickRotation,n=i/180*Math.PI,l=function(t){return function(e){var n,i,r,s,a,l;if(c.xTicksAll){for(d=new hx.Set,a=t.series.entries(),n=0,r=a.length;r>n;n++)for(p=a[n],l=p.data,i=0,s=l.length;s>i;i++)o=l[i],d.add(o.x);return d.values().map(function(t){return[t,e.apply(t)]})}return e.ticks(c.xTickSpacing)}}(this),r.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-tick","g").update(function(t){return this.view(".hx-tick-text-x","text").update(function(t){var e,r;return this.text(c.xFormatter(t)),e=this.node().getBBox(),r=e.height*Math.cos(n)+e.width*Math.sin(n),x=Math.max(x,r),0===n?this.attr("transform","translate("+-e.width/2+","+_+")").style("dominant-baseline","hanging"):this.attr("transform","translate(0,"+_+") rotate("+i+")")}).apply(t[0])}).apply(l(t))}).apply(this.xScale),this.xTitle&&(r.view(".hx-axis-title","text").update(function(t){return t.xTitleHeight=this.text(t.xTitle).height()}).apply(this),x+=this.xTitleHeight),x+=_+S):hx.select(t).select(".hx-x-axis").remove(),this.xAxisSize=x},t.prototype.preupdateYAxisSvg=function(t,i){var r,o,s,a,l,c,p,d,f,x,g,v,y,m,w,b,k,M,A,L,N,E,V,I,O,B,R,W;switch(w=this,y=this.graph.height-i,this.yScaleType){case"linear":this.yScale=(new C).range(y,0);break;case"discrete":this.yScale=new D(this.yDiscretePadding).range(y,0);break;case"log":this.yScale=(new LogScale).range(y,0);break;case"date":this.yScale=(new T).range(y,0)}if("discrete"===this.yScaleType)s=function(){var t,e,n,i,r,s;if(this.yDiscreteLabels)return this.yDiscreteLabels;for(k=new hx.Set,r=this.series.entries(),t=0,n=r.length;n>t;t++)for(b=r[t],s=b.data,e=0,i=s.length;i>e;e++)o=s[e],k.add(o.y);return k.values()}.call(this),this.yScale.domain(s);else{for(O=void 0,I=void 0,E=hx.groupBy(this.series.entries(),function(t){return t.type}),M=E.map(function(t){return{type:t[0],group:hx.groupBy(t[1],function(t){return n(t)?t.group:void 0})}}),l=0,p=M.length;p>l;l++)for(N=M[l],g=N.group,c=0,d=g.length;d>c;c++)if(a=g[c],b=a[1],"undefined"===a[0])B=function(){var t,e,n,i;for(n=this.series.entries(),i=[],e=0,t=n.length;t>e;e++)m=n[e],m instanceof z?m.data.dx||m.data.dy||!m.data.y?i.push(void 0):i.push([m.data.y,m.data.y]):m instanceof P?i.push(u(m.data,function(t){return t.y1},function(t){return t.y2})):i.push(h(m.data,function(t){return t.y}));return i}.call(this),B=B.filter(function(t){return null!=t}),W=hx.min(B.map(function(t){return t[0]})),R=hx.max(B.map(function(t){return t[1]})),(void 0===O||O>W)&&(O=W),(void 0===I||R>I)&&(I=R);else for(L=b[b.length-1],O=void 0===O?0:Math.min(O,0),I=void 0===I?0:Math.max(I,0),v=L.data,x=0,f=v.length;f>x;x++)o=v[x],A=this.getYStack(L.type,L.group,o.x,L.seriesId+1,this.yScale.domainMin),(void 0===O||O>A)&&(O=A),(void 0===I||A>I)&&(I=A);O="auto"===this.yMin?O:this.yMin,I="auto"===this.yMax?I:this.yMax,"auto"===this.yMin&&(O=e(O,I-O,-this.yScalePaddingMin)),"auto"===this.yMax&&(I=e(I,I-O,this.yScalePaddingMax)),this.yScale.domain(O,I)}return V=0,this.yVisible?(r=hx.select(t).select(".hx-y-axis"),r.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-tick","g").update(function(t){return this.view(".hx-tick-text-y","text").update(function(t){var e;return e=this.text(w.yFormatter(t)).attr("x",-_).width(),e>V?V=e:void 0}).apply(t[0])}).apply(t.ticks(w.yTickSpacing))}).apply(this.yScale),this.yTitle&&(r.view(".hx-axis-title","text").update(function(t){return t.yTitleHeight=this.text(t.yTitle).attr("transform","rotate(90)").width()}).apply(this),V+=this.yTitleHeight),V+=_+S):hx.select(t).select(".hx-y-axis").remove(),this.yAxisSize=V},t.prototype.updateAxisSvg=function(t,e,n,i,r){var o,s,a,l,h;switch(l=this,h=this.graph.width,a=this.graph.height,this.xScaleType){case"linear":case"date":this.xScale.range(i,h);break;case"discrete":this.xScale.range(i,h);break;case"log":this.xScale.range(i,h)}switch(this.yScaleType){case"linear":case"date":this.yScale.range(a-r,0);break;case"discrete":this.yScale.range(a-r,0);break;case"log":this.yScale.range(a-r,0)}return s=hx.select(t).select(".hx-axis-grid"),this.xVisible?(this.xGridLines&&s.view(".hx-vertical-grid-line","line").update(function(t){return this.attr("x1",t[1]).attr("x2",t[1]).attr("y1",l.yScale.rangeMax).attr("y2",l.yScale.rangeMin)}).apply(this.xScale.ticks(l.xTickSpacing)),o=hx.select(t).select(".hx-x-axis").attr("transform","translate(0,"+(a-n-this.xAxisSize)+")"),o.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-axis-line","line").update(function(t){return this.attr("x1",t.rangeMin).attr("x2",t.rangeMax)}).apply(t),this.view(".hx-tick","g").update(function(t,e,n){return this.attr("transform","translate("+t[1]+",0)"),this.view(".hx-tick-line","line").update(function(t){return this.attr("y1",0).attr("y2",M)}).apply(this),this.view(".hx-tick-text-x","text").update(function(t){return this.text(n%l.xNthTickVisible===0?l.xFormatter(t):"")}).apply(t[0])}).apply(t.ticks(l.xTickSpacing))}).apply(this.xScale),this.xTitle&&o.view(".hx-axis-title","text").update(function(t){return this.attr("transform","translate("+(h+i)/2+", "+(t.xAxisSize-t.xTitleHeight/2-S/2)+")").text(l.xTitle)}).apply(this)):hx.select(t).select(".hx-x-axis").remove(),this.yVisible?(this.yGridLines&&s.view(".hx-horizontal-grid-line","line").update(function(t){return this.attr("y1",t[1]).attr("y2",t[1]).attr("x1",l.xScale.rangeMax).attr("x2",l.xScale.rangeMin)}).apply(this.yScale.ticks(l.yTickSpacing)),o=hx.select(t).select(".hx-y-axis").attr("transform","translate("+(e+this.yAxisSize)+",0)"),o.select(".hx-axis-scale").view(".hx-axis-view","g").update(function(t){return this.view(".hx-axis-line","line").update(function(t){return this.attr("y1",t.rangeMin).attr("y2",t.rangeMax)}).apply(t),this.view(".hx-tick","g").update(function(t,e,n){return this.attr("transform","translate(0,"+t[1]+")"),this.view(".hx-tick-line","line").update(function(t){return this.attr("x1",-M).attr("x2",0)}).apply(this),this.view(".hx-tick-text-y","text").update(function(t){return this.attr("x",-_).text(n%l.yNthTickVisible===0?l.yFormatter(t):"")}).apply(t[0])}).apply(t.ticks(l.yTickSpacing))}).apply(this.yScale),this.yTitle?o.view(".hx-axis-title","text").update(function(t){return this.attr("transform","translate("+(-t.yAxisSize+t.yTitleHeight/2+S/2)+", "+(a-r)/2+") rotate(-90)").text(l.yTitle)}).apply(this):void 0):hx.select(t).select(".hx-y-axis").remove()},t.prototype.updateDataSvg=function(t,e){var n,i,r,o,s,a,l,h;for(n=[],h=[],hx.select(t).view(".hx-series","g").update(function(t,e){return n.push(e)}).apply(this.series.entries()),hx.select(e).view(".hx-series","g").update(function(t,e){return h.push(e)}).apply(this.series.entries()),s=this.series.entries(),a=[],i=r=0,o=s.length;o>r;i=++r)l=s[i],a.push(l.updateSvg(n[i],h[i]));return a},t.prototype.getLabelDetails=function(t,e){var n,i;return n=hx.flatten(function(){var n,r,o,s;for(o=this.series.entries(),s=[],n=0,r=o.length;r>n;n++)i=o[n],s.push(i.getLabelDetails(t,e));return s}.call(this)),n.filter(function(t){return t})},t.prototype.getXStack=function(t,e,n,i,r){var o,s,a,l,h,u,c;if(null==r&&(r=0),e){for(u=Math.max(this.xScale.domainMin,0),l=this.series.entries(),o=s=0,a=l.length;a>s;o=++s)h=l[o],h.seriesId<i&&h.group===e&&h.type===t&&(c=h.getX(n),hx.defined(ys)&&(u+=c));return u}return Math.max(r,0)},t.prototype.getYStack=function(t,e,n,i,r){var o,s,a,l,h,u,c;if(null==r&&(r=0),e){for(u=Math.max(this.yScale.domainMin,0),l=this.series.entries(),o=s=0,a=l.length;a>s;o=++s)h=l[o],h.seriesId<i&&h.group===e&&h.type===t&&(c=h.getY(n),hx.defined(c)&&(u+=c));return u}return Math.max(r,0)},t}(),hx.Axis=b;var k,S,_,M,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;M=6,_=M+4,S=4,k=function(t){function e(t){var r,o,s,a,l,h,u,c,p;this.selector=t,e.__super__.constructor.apply(this,arguments),this.axes=new hx.List,this.zoomStart=0,this.zoomEnd=1,this.useZoom=!1,this.useLabels=!0,this.useLegend=!1,this.legendPosition="auto",s=hx.randomId(),h=hx.select(this.selector).on("resize",function(t){return function(){return t.render()}}(this)),this.svgTarget=h.append("svg").attr("class","hx-graph"),o=this.svgTarget.append("defs"),this.axesTarget=this.svgTarget.append("g").attr("class","hx-axes"),this.plotTarget=this.svgTarget.append("g").attr("class","hx-plot"),this.labelTarget=this.svgTarget.append("g").attr("class","hx-label"),r=o.append("clipPath").attr("id","clip-series-"+s),this.clipRect=r.append("rect"),this.plotTarget.attr("clip-path","url(#clip-series-"+s+")"),this.labelsView=this.labelTarget.view(".hx-plot-label","g").update(function(t,e){return t.series.label.type(e,t)}),c=0,p=0,l=0,a=1,this.svgTarget.on("pointerdown",function(t){return function(e){var n,r;return n=Math.round(e.x-t.svgTarget.box().left),r=Math.round(e.y-t.svgTarget.box().top),i.call(t,n,r),e.event.targetTouches&&e.event.targetTouches.length>1?(e.event.preventDefault(),e.event.stopPropagation(),c=e.event.targetTouches[0].clientX-t.svgTarget.box().left-t.plotArea.x1,p=e.event.targetTouches[1].clientX-t.svgTarget.box().left-t.plotArea.x1,l=t.zoomStart,a=t.zoomEnd):void 0}}(this)),u=.01,this.svgTarget.on("touchmove",function(t){return function(e){var n,i,r,o,s,h,d,f;return e.targetTouches.length>1&&t.useZoom?(e.preventDefault(),e.stopPropagation(),r=t.plotArea.x2-t.plotArea.x1,o=e.targetTouches[0].clientX-t.svgTarget.box().left-t.plotArea.x1,s=e.targetTouches[1].clientX-t.svgTarget.box().left-t.plotArea.x1,d=(c+p)/(2*r),h=l+(a-l)*d,f=Math.abs(c-p)/Math.abs(o-s),i=l-h,n=a-h,1===t.zoomEnd&&i>-u&&(i=-u),0===t.zoomStart&&u>n&&(n=u),t.zoomStart=hx.clampUnit(h+f*i),t.zoomEnd=hx.clampUnit(h+f*n),t.render()):void 0}}(this)),this.svgTarget.on("mousemove",function(t){return function(e){var n,r,o;return r=Math.round(e.clientX-t.svgTarget.box().left),o=Math.round(e.clientY-t.svgTarget.box().top),t.useLabels&&i.call(t,r,o),t.useLegend&&(n=t.svgTarget.select(".hx-legend-container"),"hover"===t.legendPosition&&n.style("display",""),"auto"===t.legendPosition||"hover"===t.legendPosition)?r-t.plotArea.x1<(t.plotArea.x1+t.plotArea.x2)/2?n.attr("transform","translate("+(t.plotArea.x2-10-n.width())+","+(t.plotArea.y1+10)+")"):n.attr("transform","translate("+(t.plotArea.x1+10)+","+(t.plotArea.y1+10)+")"):void 0}}(this)),this.svgTarget.on("mouseleave","hx-graph-legend-leave",function(t){return function(){return t.useLegend&&"hover"===t.legendPosition?t.svgTarget.select(".hx-legend-container").style("display","none"):void 0}}(this)),this.svgTarget.on("pointerleave",function(t){return function(e){return t.labelsView.apply([])}}(this)),this.svgTarget.on("click",function(t){return function(e){var i,r,o,s;return o=Math.round(e.x-t.svgTarget.box().left),s=Math.round(e.y-t.svgTarget.box().top),r=n.call(t,o,s),r?(i={event:e,data:r.values,series:r.series},t.emit("click",i),r.series.emit("click",i)):void 0}}(this)),this.svgTarget.on("wheel",function(t){return function(e){var n,i,r,o,s,a,l,h;return t.useZoom?(e.preventDefault(),e.stopPropagation(),u=.01,n=-e.deltaY,1===e.deltaMode&&(n*=20),s=e.clientX-t.svgTarget.box().left-t.plotArea.x1,o=t.plotArea.x2-t.plotArea.x1,l=hx.clampUnit(s/o),a=t.zoomStart+(t.zoomEnd-t.zoomStart)*l,h=1-n/600,r=t.zoomStart-a,i=t.zoomEnd-a,1===t.zoomEnd&&r>-u&&(r=-u),0===t.zoomStart&&u>i&&(i=u),t.zoomStart=hx.clampUnit(a+h*r),t.zoomEnd=hx.clampUnit(a+h*i),t.render()):void 0}}(this))}var n,i;return m(e,t),e.prototype.addAxis=function(){var t;return t=arguments.length>=2?new b(arguments[0],arguments[1]):1===arguments.length?hx.isString(arguments[0])?new b(arguments[0],arguments[0]):arguments[0]:new b("linear","linear"),t.graph=this,this.axes.add(t),t},e.prototype.removeAxis=function(t){return this.axes.remove(t),t.graph=null},e.prototype.render=function(){var t,e,n,i,r,o,s,a,l,h,u,c;if(h=hx.select(this.selector).style("width"),n=hx.select(this.selector).style("height"),this.width=Number(h.slice(0,-2)),this.height=Number(n.slice(0,-2)),s=Number(this.svgTarget.style("width").slice(0,-2)),o=Number(this.svgTarget.style("height").slice(0,-2)),this.svgTarget.attr("viewBox","0 0 "+s+" "+o),e=this.axes.list.some(function(t){return t.series.list.some(function(t){return hx.isObject(t.data)||t.data.length>0})}),r=this,this.svgTarget.view(".hx-plot-no-data","text").update(function(){return this.text("No Data").attr("x",r.width/2).attr("y",r.height/2)}).apply(e?[]:[!0]),this.axes.forEach(function(t){return t.tagSeries()}),t=function(t){var e;return e=this.append("g")["class"]("hx-axis").node(),t.setupAxisSvg(e),e},a=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.preupdateXAxisSvg(e),a+=t.xAxisSize}).apply(this.axes.entries()),l=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.preupdateYAxisSvg(e,a),l+=t.yAxisSize}).apply(this.axes.entries()),u=0,c=0,this.axesTarget.view(".hx-axis","g").enter(t).update(function(t,e){return t.updateAxisSvg(e,c,u,l,a),u+=t.xAxisSize,c+=t.yAxisSize}).apply(this.axes.entries()),this.plotArea={x1:c,y1:0,x2:this.width,y2:this.height-u},this.plotTarget.view(".hx-axis-data","g").enter(function(){var t;return t=this.append("g")["class"]("hx-axis-data"),t.append("g")["class"]("hx-graph-fill-layer"),t.append("g")["class"]("hx-graph-sparse-layer"),t.node()}).update(function(t,e){return t.updateDataSvg(this.select(".hx-graph-fill-layer").node(),this.select(".hx-graph-sparse-layer").node())}).apply(this.axes.entries()),this.useLegend)switch(i=this.svgTarget.select(".hx-legend-container"),0===i.size()&&(i=this.svgTarget.append("g")["class"]("hx-legend-container")),d(i,hx.flatten(this.axes.list.map(function(t){return t.series.list}))),this.legendPosition){case"top-left":i.attr("transform","translate("+(this.plotArea.x1+10)+","+(this.plotArea.y1+10)+")");break;case"bottom-right":i.attr("transform","translate("+(this.plotArea.x2-10-i.width())+","+(this.plotArea.y2-5-i.height())+")");break;case"bottom-left":i.attr("transform","translate("+(this.plotArea.x1+10)+","+(this.plotArea.y2-5-i.height())+")");break;case"hover":i.style("display","none");break;default:i.attr("transform","translate("+(this.plotArea.x2-10-i.width())+","+(this.plotArea.y1+10)+")")}else this.svgTarget.select(".hx-legend-container").remove();return this.clipRect.attr("x",this.plotArea.x1).attr("y",this.plotArea.y1).attr("width",this.plotArea.x2-this.plotArea.x1).attr("height",this.plotArea.y2-this.plotArea.y1)},n=function(t,e){var n,i,r,o,s,a,l,h,u,c;for(t=hx.clamp(this.plotArea.x1,this.plotArea.x2,t),e=hx.clamp(this.plotArea.y1,this.plotArea.y2,e),l=hx.flatten(function(){var i,r,o,s;for(o=this.axes.entries(),s=[],i=0,r=o.length;r>i;i++)n=o[i],s.push(n.getLabelDetails(t,e));return s}.call(this)),l=l.filter(function(t){return function(e){var n,i;return t.plotArea.x1<=(n=e.x)&&n<=t.plotArea.x2&&t.plotArea.y1<=(i=e.y)&&i<=t.plotArea.y2}}(this)),r=void 0,i=void 0,s=0,h=l.length;h>s;s++)a=l[s],u=a.x-t,c=a.y-e,o=u*u+c*c,(void 0===i||i>o)&&(r=a,i=o);return r},i=function(t,e){var i;return i=n.call(this,t,e),this.labelsView.apply(i?a(i,this):[])},e}(hx.EventEmitter),hx.Graph=k;var C;C=function(){function t(t,e,n,i){var r;this.domainMin=null!=t?t:0,this.domainMax=null!=e?e:10,this.rangeMin=null!=n?n:0,this.rangeMax=null!=i?i:10,r=this.domainMax-this.domainMin,this.factor=0!==r?(this.rangeMax-this.rangeMin)/r:1}return t.prototype.apply=function(t){return this.rangeMin+(t-this.domainMin)*this.factor},t.prototype.inverse=function(t){return this.domainMin+(t-this.rangeMin)/this.factor},t.prototype.domain=function(t,e){var n;return this.domainMin=t,this.domainMax=e,n=this.domainMax-this.domainMin,this.factor=0!==n?(this.rangeMax-this.rangeMin)/n:1,this},t.prototype.range=function(t,e){var n;return this.rangeMin=t,this.rangeMax=e,n=this.domainMax-this.domainMin,this.factor=0!==n?(this.rangeMax-this.rangeMin)/n:1,this},t.prototype.ticks=function(t){var e,n,i,r,o,s,a,l,h,u,c,p;switch(i=this.domainMax-this.domainMin,p=Math.abs(this.rangeMax-this.rangeMin)/t,h=Math.pow(10,Math.floor(Math.log(i/p)/Math.LN10)),o=i/(p*h),!1){case!(o>=7.5):h*=10;break;case!(o>=3):h*=5;break;case!(o>=1.25):h*=2}for(r=Math.ceil(this.domainMin/h)*h,n=(Math.floor(this.domainMax/h)+.5)*h,l=(n-r)/h,c=[],s=a=0,u=l;u>=0?u>a:a>u;s=u>=0?++a:--a)e=r+s*h,c.push([e,this.apply(e)]);return c},t}();var D;D=function(){function t(t){this.bandPadding=null!=t?t:.1,this.domainCategories=[],this.rangeMin=0,this.rangeMax=10}return t.prototype.apply=function(t){var e;return e=this.domainCategories.indexOf(t),-1!==e?this.rangeMin+e/this.domainCategories.length*(this.rangeMax-this.rangeMin)+this.tickOffset()+this.tickWidth()/2:void 0},t.prototype.inverse=function(t){var e;return e=Math.floor((t-this.tickOffset()-this.rangeMin)/(this.rangeMax-this.rangeMin)*this.domainCategories.length),e>=0&&e<this.domainCategories.length?this.domainCategories[e]:void 0},t.prototype.domain=function(t){return this.domainCategories=t,this},t.prototype.range=function(t,e){return this.rangeMin=t,this.rangeMax=e,this},t.prototype.ticks=function(t){var e,n,i,r,o;for(null==t&&(t=50),r=this.domainCategories,o=[],n=0,i=r.length;i>n;n++)e=r[n],o.push([e,this.apply(e)]);return o},t.prototype.tickWidth=function(){return(this.rangeMax-this.rangeMin)/this.domainCategories.length*(1-this.bandPadding)},t.prototype.tickOffset=function(){return(this.rangeMax-this.rangeMin)/this.domainCategories.length*this.bandPadding/2},t}();var T,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;T=function(t){function e(t,n,i,r){this.domainMin=t,this.domainMax=n,this.rangeMin=i,this.rangeMax=r,e.__super__.constructor.apply(this,arguments)}return m(e,t),e.prototype.ticks=function(t){var e,n,i,r,o,s,a,l,h,u,c,p,d,f,x,g;for(g=[1,2,5,10,25,50,100,250,500,1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],r=this.domainMax-this.domainMin,e=function(t){var e,n,i;for(e=0,n=g.length;n>e;e++)if(i=g[e],i>=t)return i;return 1},f=Math.abs(this.rangeMax-this.rangeMin)/t,u=Math.pow(10,Math.floor(Math.log(r/f)/Math.LN10)),s=r/(f*u),u*=s>=7.5?10:s>=3?5:s>=2?3:s>=1.25?2:s>=1.025?1.5:1,o=Math.ceil(this.domainMin/u)*u,i=Math.floor(this.domainMax/u)*u,d=function(t,e){return e?Math.ceil(t/x)*x:Math.floor(t/x)*x},x=e(u),u=d(u,!0),o=d(o),o<this.domainMin&&(o+=u),h=(i-o)/u,p=[],a=l=0,c=h;c>=0?c>=l:l>=c;a=c>=0?++l:--l)n=o+a*u,p.push([n,this.apply(n)]);return p},e}(C);var P,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;P=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.color(hx.theme.plot.colors[2]).alpha(.2).toString(),this.feather=200,this["class"]=""}var n,i;return m(e,t),i=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y)});return o},e.prototype.updateSvg=function(t){var e,n,r,o,s,a,h;return h=this,this.featheredData=f(this.data,this.feather,function(t){return void 0!==t.y1&&void 0!==t.y2}),e=function(){var t,e,r,o;for(r=this.featheredData,o=[],t=0,e=r.length;e>t;t++)n=r[t],a=n.map(function(t){return{x:t.x,y:t.y1}}).concat(n.slice(0).reverse().map(function(t){return{x:t.x,y:t.y2}})),o.push(v(i(a,this.axis),!0));return o}.call(this),Array.isArray(h.fillColor||h.color)?(o=h.fillColor||h.color.map(function(t){return{value:t.value,color:hx.color(t.color).alpha(.2).toString("rgba")}}),s=l(t,o,this),r="url(#"+s+")"):r=h.fillColor||hx.color(h.color).alpha(.2).toString(),hx.select(t).view(".hx-series-data","path","hx-series-area").update(function(t){return this.attr("d",t)["class"]("hx-series-data "+h["class"]).attr("fill",r)}).apply(e)},e.prototype.getLabelDetails=function(t,e){var i,r,o;return this.label.enabled?(i=!1,o=n(this.label,this.featheredData,this.axis,t,this.color,this,i,function(t){return t.yLabel1||t.y1}),r=n(this.label,this.featheredData,this.axis,t,this.color,this,i,function(t){return t.yLabel2||t.y2}),o.concat(r)):[void 0]},e.prototype.createLabelValues=function(t,e){return[{name:this.axis.xTitle,value:t.xLabel||t.x,formatter:this.label.formatters[this.axis.xTitle]||this.axis.xFormatter},{name:this.axis.yTitle,value:e(t),formatter:this.label.formatters[this.axis.yTitle]||this.axis.yFormatter}]},n=function(t,e,n,i,r,o,s,a){var l,h,u,c,d,f,x,g,v,y,m,w;for(c=[],u=0,d=e.length;d>u;u++)l=e[u],h=p(l,i,!s,function(t){return n.xScale.apply(t.x)}),-1!==h&&(s?h>=0&&h<l.length&&(x=n.xScale.apply(l[h].x),g=n.xScale.apply(l[h+1].x),y=n.yScale.apply(a(l[h])),m=n.yScale.apply(a(l[h+1])),v=i,w=y+(m-y)*(i-x)/(g-x)):(v=n.xScale.apply(l[h].x),w=n.yScale.apply(a(l[h]))),f={series:o,name:o.name,x:v,y:w,color:o.color,values:o.createLabelValues(l[h],a)},c.push(f));return c},e}(y);var A,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;A=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[1],this.type="bar",this.group=void 0,this["class"]=""}return m(e,t),e.prototype.updateSvg=function(t){var e,n;return n=this,e=this.axis,hx.select(t).view(".hx-series-data","rect").update(function(t){var i,r,o,s;return"discrete"===e.xScaleType?(r=e.xScale.tickWidth()/n.typeSize,o=e.xScale.apply(t.x)-r*n.typeSize/2+n.groupId*r,i=Math.abs(e.yScale.apply(t.y)-e.yScale.apply(0)),s=e.yScale.apply(e.getYStack(n.type,n.group,t.x,n.seriesId)),
t.y>0&&(s-=i)):(r=Math.abs(e.xScale.apply(t.x)-e.xScale.apply(0)),o=e.xScale.apply(e.getXStack(n.type,n.group,t.y,n.seriesId)),i=Math.abs(e.yScale.tickWidth()/n.typeSize),s=e.yScale.apply(t.y)-i*n.typeSize/2+n.groupId*i,t.y>0&&(s-=i)),this["class"]("hx-series-data hx-series-bar "+n["class"]).attr("y",s).attr("x",o).attr("height",i).attr("width",r).style("fill",t.color||n.color)}).apply(this.data)},e.prototype.getLabelDetails=function(t,e){var n,i,r,o,s,a,l,h,u,c;return this.label.enabled?(u=this.axis.xScale.inverse(t),c=this.axis.yScale.inverse(e),n=hx.find(this.data,function(t){return t.x===u}),n?(h=this.axis.xScale.tickWidth()/this.typeSize,i=this.axis.xScale.apply(n.x)-h*this.typeSize/2+this.groupId*h,o=Math.abs(this.axis.yScale.apply(n.y)-this.axis.yScale.apply(0)),r=this.axis.yScale.apply(this.axis.getYStack(this.type,this.group,n.x,this.seriesId)),n.y>0&&(r-=o),null!=u&&null!=c&&null!=n?(l=Math.min(r,this.axis.yScale.apply(0)),s=Math.max(r,r+o),c=hx.clamp(l,s,this.axis.yScale.apply(c)),a={series:this,name:this.name,x:i+h/2,y:c,color:n.color||this.color,values:this.createLabelValues(n)},[a]):[]):[]):[]},e}(y);var L,N,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;N=function(t,e,n,i,r,o){return hx.select(e).view(".hx-series-data","g").update(function(e){return this["class"]("hx-series-data hx-series-line "+t["class"]).view(n,r).update(o).apply(e)}).apply(i)},L=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.type="line",this.stroke=!0,this.color=hx.theme.plot.colors[0],this.fill=!1,this.fillColor=void 0,this.feather=200,this.markers=!1,this.markerRadius=2,this.markerColor=void 0,this["class"]=""}var n;return m(e,t),n=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y)});return o},e.prototype.updateSvg=function(t,e){var i,r,o,s,a,h,u,c,p,d,x,g,y,m;return y=this,o=this.axis,h=f(this.data,this.feather,function(t){return void 0!==t.y}),this.featheredData=h,i=function(t,e){var n,i,r,s;for(s=[],i=0,r=t.length;r>i;i++)n=t[i],s.push({x:n.x,y:o.getYStack(y.type,y.group,n.x,y.seriesId)+(e?0:n.y)});return s},this.fill&&(Array.isArray(y.fillColor||y.color)?(d=y.fillColor||y.color.map(function(t){return{value:t.value,color:hx.color(t.color).alpha(.2).toString("rgba")}}),x=l(t,d,y),u="url(#"+x+")"):u=y.fillColor||hx.color(y.color).alpha(.2).toString(),p=Math.max(Math.min(this.axis.yScale.domainMax,0),this.axis.yScale.domainMin),c=function(){var t,e,n;for(n=[],t=0,e=h.length;e>t;t++)a=h[t],n.push(i(a).concat(i(a.slice(0).reverse(),!0)));return n}(),r=function(){var t,e,i;for(i=[],t=0,e=c.length;e>t;t++)a=c[t],i.push(v(n(a,this.axis),!0));return i}.call(this),N(this,t,".hx-series-line-fill",r,"path",function(t){return this.attr("d",t).attr("fill",u)})),this.stroke&&(s="discrete"!==this.axis.yScaleType?function(){var t,e,r;for(r=[],t=0,e=h.length;e>t;t++)a=h[t],r.push(v(n(i(a),this.axis)));return r}.call(this):function(){var t,e,i;for(i=[],t=0,e=h.length;e>t;t++)a=h[t],i.push(v(n(a,this.axis)));return i}.call(this),Array.isArray(this.color)?(x=l(e,this.color,y),m="url(#"+x+")"):m=y.color,N(this,e,".hx-series-line-stroke",s,"path",function(t){return this.attr("d",t).attr("stroke",m)})),this.markers?(g="discrete"!==this.axis.yScaleType?i(hx.flatten(h)):hx.flatten(h),N(this,e,".hx-series-line-markers",n(g,this.axis),"circle",function(t){return this.attr("cx",t.x).attr("cy",t.y).attr("r",y.markerRadius).attr("fill",y.markerColor||y.color)})):void 0},e.prototype.getLabelDetails=function(t,e){var n,i,r,o,s,a,l,h,u,c,d,f,x,g,v;if(this.label.enabled)for(u=this.featheredData,a=0,l=u.length;l>a;a++)if(o=u[a],s=p(o,t,!this.label.interpolate,function(t){return function(e){return t.axis.xScale.apply(e.x)}}(this)),-1!==s)return this.label.interpolate?s>=0&&s<o.length&&(c=this.axis.xScale.apply(o[s].x),d=this.axis.xScale.apply(o[s+1].x),i=this.axis.getYStack(this.type,this.group,o[s].x,this.seriesId),r=this.axis.getYStack(this.type,this.group,o[s+1].x,this.seriesId),x=this.axis.yScale.apply(i+o[s].y),g=this.axis.yScale.apply(r+o[s+1].y),f=t,v=x+(g-x)*(t-c)/(d-c)):(f=this.axis.xScale.apply(o[s].x),"discrete"!==this.axis.yScaleType?(n=this.axis.getYStack(this.type,this.group,o[s].x,this.seriesId),v=this.axis.yScale.apply(n+o[s].y)):v=this.axis.yScale.apply(o[s].y)),h={series:this,name:this.name,x:f,y:v,color:this.color,values:this.createLabelValues(o[s])},[h];return[]},e}(y);var E,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;E=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[3],this.size=2,this["class"]=""}var n,i;return m(e,t),n=function(t){return t.filter(function(t){return void 0!==t.x&&void 0!==t.y})},i=function(t,e){var n,i,r,o;for(o=[],i=0,r=t.length;r>i;i++)n=t[i],o.push({x:e.xScale.apply(n.x),y:e.yScale.apply(n.y),color:n.color,size:n.size});return o},e.prototype.updateSvg=function(t,e){var r;return r=this,hx.select(e).view(".hx-series-data","circle").update(function(t){return this["class"]("hx-series-data hx-series-scatter "+r["class"]).attr("cx",t.x).attr("cy",t.y).attr("r",t.size||r.size).style("fill",t.color||r.color)}).apply(i(n(this.data),this.axis))},e.prototype.getLabelDetails=function(t,e){var i,r,o,s,a,l,h,u;if(!this.label.enabled)return[];for(i=void 0,r=0,h=n(this.data),s=0,a=h.length;a>s;s++)o=h[s],u=(this.axis.xScale.apply(o.x)-t)*(this.axis.xScale.apply(o.x)-t)+(this.axis.yScale.apply(o.y)-e)*(this.axis.yScale.apply(o.y)-e),(void 0===i||r>u)&&(i=o,r=u);return i?(l={series:this,name:this.name,x:this.axis.xScale.apply(i.x),y:this.axis.yScale.apply(i.y),color:i.color||this.color,values:this.createLabelValues(i)},[l]):void 0},e}(y);var z,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;z=function(t){function e(){e.__super__.constructor.apply(this,arguments),this.color=hx.theme.plot.colors[4],this["class"]=""}var n;return m(e,t),e.prototype.updateSvg=function(t,e){var i,r;return i=n.call(this),i?(r=this,hx.select(e).view(".hx-series-data","line").update(function(t){return this["class"]("hx-series-data hx-series-constant "+r["class"]).attr("x1",r.axis.xScale.apply(t[0].x)).attr("y1",r.axis.yScale.apply(t[0].y)).attr("x2",r.axis.xScale.apply(t[1].x)).attr("y2",r.axis.yScale.apply(t[1].y)).attr("d",t).attr("stroke",r.color)}).apply([i])):void 0},e.prototype.getLabelDetails=function(t,e){var n,i,r,o,s;return this.label.enabled?(n=this.data.dx||0,i=this.data.dy||0,o=this.axis.xScale.inverse(t),s=this.axis.yScale.inverse(e),0!==n&&0!==i&&null!=this.data.x&&null!=this.data.y?s=this.data.y+(o-this.data.x)*i/n:null!=this.data.x?o=this.data.x:null!=this.data.y&&(s=this.data.y),this.axis.xScale.domainMin<o&&o<this.axis.xScale.domainMax&&this.axis.yScale.domainMin<s&&s<this.axis.yScale.domainMax?(r={series:this,name:this.name,x:this.axis.xScale.apply(o),y:this.axis.yScale.apply(s),color:this.color,values:this.createLabelValues({x:o,y:s})},[r]):[]):[]},n=function(){var t,e,n,i,r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M;if(s=this.data.dx||0,a=this.data.dy||0,0!==s&&0!==a&&null!=this.data.x&&null!=this.data.y)return w=this.data.x||0,S=this.data.y||0,t=this.axis.xScale.domainMin,e=this.axis.xScale.domainMax,n=this.axis.yScale.domainMin,i=this.axis.yScale.domainMax,r=w-t,o=S-n,f=o*s-a*r,p=function(){switch(!1){case!(f>0):return b=t,m=(t-w)/s,_=S+m*a,{x:b,y:_};case 0!==f:return b=t,_=n,{x:b,y:_};case!(0>f):return _=n,m=(n-S)/a,b=w+m*s,{x:b,y:_}}}(),r=w-e,o=S-i,f=o*s-a*r,d=function(){switch(!1){case!(0>f):return k=e,m=(e-w)/s,M=S+m*a,{x:k,y:M};case 0!==f:return k=e,M=i,{x:k,y:M};case!(f>0):return M=i,m=(i-S)/a,k=w+m*s,{x:k,y:M}}}(),[p,d];if(null!=this.data.x){for(x=[this.axis.yScale.domainMin,this.axis.yScale.domainMax],v=[],l=0,u=x.length;u>l;l++)S=x[l],v.push({x:this.data.x,y:S});return v}if(null!=this.data.y){for(g=[this.axis.xScale.domainMin,this.axis.xScale.domainMax],y=[],h=0,c=g.length;c>h;h++)w=g[h],y.push({x:w,y:this.data.y});return y}},e}(y);var V,m=function(t,e){function n(){this.constructor=t}for(var i in e)w.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},w={}.hasOwnProperty;V=function(t){function e(t){var n;this.selector=t,e.__super__.constructor.apply(this,arguments),n=hx.select(this.selector).on("resize",function(t){return function(){return t.render()}}(this)),this.segmentPadding=0,this.innerPadding=0,this.ringPadding=.1,this.totalAngle=2*Math.PI,this.startAngle=0,this.color=hx.theme.plot.colors[1],this.label={type:hx.plot.label.standard,formatters:{}},this.useLabels=!0,this.formatter=hx.format.si(2),this.segmentTextFormatter=function(t,e){return t.size/hx.sum(e.map(function(t){return t.size}))>.05?t.size:""},this.useSegmentText=!1,this.useLegend=!1,this.legendPosition="auto"}var n,i;return m(e,t),e.prototype.setData=function(t){return t instanceof Array?this.data=t:this.data=[t]},n=function(t){var e,n,r;return e=!1,n=hx.sum(t.map(function(t){return t.size})),r=0===n?(e=!0,t.length):hx.sum(t.map(function(t){return i(t,n)})),{total:r,allZero:e}},i=function(t,e,n){return n?1:t.size>0?t.size:e/100},e.prototype.render=function(){var t,e,r,o,a,l,h,u,c,p,f,x,g,v,y,m,w,b,k,S,_,M,C;for(m=this,y=hx.select(this.selector),C=y.width(),l=y.height(),f=Math.min(C,l)/2,this.circle={x:C/2,y:l/2,r:f},t=Math.PI;this.startAngle<0;)this.startAngle+=2*t;switch(!1){case!(this.totalAngle===t&&this.startAngle%(t/2)===0):switch(!1){case!(0===this.startAngle||this.startAngle%(2*t)===0||this.startAngle%t===0):f=hx.clamp(0,l/2,2*f);break;case!(this.startAngle%(1.5*t)===0||this.startAngle%(t/2)===0):f=hx.clamp(0,C/2,2*f)}switch(!1){case!(0===this.startAngle||this.startAngle%(2*t)===0):r=-f/2,o=0;break;case this.startAngle%(1.5*t)!==0:r=0,o=f/2;break;case this.startAngle%t!==0:r=f/2,o=0;break;case this.startAngle%(t/2)!==0:r=0,o=-f/2;break;default:r=0,o=0}this.circle.x+=r,this.circle.y+=o,this.circle.r=f}if(e=f*(1-this.innerPadding)/this.data.length+f*(1-this.innerPadding)/this.data.length*this.ringPadding/this.data.length,v=e*this.segmentPadding,h=f*this.innerPadding,x=f-h,p=f,g=x/this.data.length+x/this.data.length*this.ringPadding/this.data.length,_=function(t,e,n,i,r,o,a){var l,u,c;return c=m.startAngle+1.5*Math.PI,u=c+i/r*m.totalAngle,l=c+(i+e)/r*m.totalAngle,t.attr("d",s(m.circle.x,m.circle.y,h+g*o,h+g*(o+1-m.ringPadding),u,l,v,a)).attr("fill",n)},S=function(t,e,r){var o,s,a,l,h;return l=t.segments,a=0,s=n(l),h=s.total,o=s.allZero,this.view(".hx-pie-segment","path").update(function(t){var e;return e=i(t,h,o),_(this,e,t.color,a,h,r,l.length),a+=e}).apply(l)},c=function(t,e,n,i,r){var o,s,a;return a=m.startAngle+1.5*Math.PI,s=a+e/n*m.totalAngle,o=a+(e+t)/n*m.totalAngle,{x:m.circle.x+Math.cos((s+o)/2)*(h+(i+.5)*g),y:m.circle.y+Math.sin((s+o)/2)*(h+(i+.5)*g)}},M=function(t,e,r){var o,s,a,l,h;return l=t.segments,a=0,s=n(l),h=s.total,o=s.allZero,this.view(".hx-pie-segment-text","text").update(function(t){var e,n,s,u;return n=i(t,h,o),e=c(n,a,h,r,l.length),s=e.x,u=e.y,this.text(m.segmentTextFormatter(t,l)).attr("x",s).attr("y",u),a+=n}).apply(l)},a=function(t){var e;return m.svgTarget=this.append("svg")["class"]("hx-graph"),m.plotTarget=m.svgTarget.append("g")["class"]("hx-plot"),e=m.svgTarget.append("g")["class"]("hx-label"),m.svgTarget.on("mousemove","hx-graph-legend-leave",function(t){return function(t){var e,n,i;return n=Math.round(t.clientX-m.svgTarget.box().left),i=Math.round(t.clientY-m.svgTarget.box().top),m.useLegend&&(e=m.svgTarget.select(".hx-legend-container"),"hover"===m.legendPosition&&e.style("display",""),"auto"===m.legendPosition||"hover"===m.legendPosition)?(C=m.svgTarget.width(),l=m.svgTarget.height(),C/2>n?e.attr("transform","translate("+(C-10-e.width())+", 10)"):e.attr("transform","translate(10, 10)")):void 0}}(this)),m.svgTarget.on("pointermove",function(t){var e,n;return e=Math.round(t.x-y.box().left),n=Math.round(t.y-y.box().top),m.updateLabels(e,n)}),m.svgTarget.on("mouseleave","hx-graph-legend-leave",function(t){return function(){}}(this)),this.useLegend&&"hover"===this.legendPosition&&this.svgTarget.select(".hx-legend-container").style("display","none"),m.svgTarget.on("pointerleave",function(t){return m.labelsView.apply([])}),m.labelsView=e.view(".hx-plot-label","g").update(function(t,e){return m.label.type(e,t)}),m.svgTarget.on("click",function(t){return null!=m.closestMeta?m.emit("click",{event:t,data:m.closestMeta.values,series:m.closestMeta.series}):void 0}),m.svgTarget.node()},k=function(t){return this.select(".hx-plot").view(".hx-pie-ring","g").update(S).apply(t.data),this.select(".hx-plot").view(".hx-pie-text","g").update(M).apply(m.useSegmentText?t.data:[])},y.view(".hx-graph","svg").enter(a).update(k).apply(this),b=Number(this.svgTarget.style("width").slice(0,-2)),w=Number(this.svgTarget.style("height").slice(0,-2)),this.useLegend)switch(u=this.svgTarget.select(".hx-legend-container"),0===u.size()&&(u=this.svgTarget.append("g")["class"]("hx-legend-container")),d(u,this.data.segments||hx.flatten(this.data.map(function(t){return t.segments}))),this.legendPosition){case"top-left":u.attr("transform","translate(10, 10)");break;case"bottom-right":u.attr("transform","translate("+(C-10-u.width())+","+(l-5-u.height())+")");break;case"bottom-left":u.attr("transform","translate(10, "+(l-5-u.height())+")");break;case"hover":u.style("display","none");break;default:u.attr("transform","translate("+(C-10-u.width())+", 10)")}else this.svgTarget.select(".hx-legend-container").remove();return this.svgTarget.attr("viewBox","0 0 "+b+" "+w)},e.prototype.createLabelValues=function(t,e){return[{name:t.name,value:t.size,formatter:this.label.formatters[e.name]||this.formatter}]},e.prototype.updateLabels=function(t,e){var r,o,s,a,l,h,u,c,p,d,f,x,g,v,y,m,w,b,k,S,_,M,C,D,T,P,A,L,N,E,z,V,I,O,B,R;if(this.useLabels&&this.label){if(z=hx.select(this.selector),R=z.width(),g=z.height(),M=this.circle.r,l=M*(1-this.innerPadding)/this.data.length+M*(1-this.innerPadding)/this.data.length*this.ringPadding/this.data.length,E=l*this.segmentPadding,v=M*this.innerPadding,C=M-v,_=M,A=C/this.data.length+C/this.data.length*this.ringPadding/this.data.length,d=this.circle.x,f=this.circle.y,M=Math.sqrt((t-d)*(t-d)+(e-f)*(e-f)),v>M||M>_)return void this.labelsView.apply([]);for(B=hx.clamp(0,this.data.length-1,Math.floor((M+this.ringPadding*A/2-v)/A)),P=this.data[B],a=Math.atan2(e-f,t-d)+.5*Math.PI-this.startAngle,0>a&&(a+=2*Math.PI),h=void 0,L=0,D=n(P.segments),O=D.total,s=D.allZero,T=P.segments,y=0,k=T.length;k>y;y++){if(N=T[y],V=i(N,O,s),r=L/O*this.totalAngle,o=(L+V)/O*this.totalAngle,I=Math.min(r,o),x=Math.max(r,o),a>I&&x>a){h=N,p=I,u=x,c=(x-I)/2+I-Math.PI/2+this.startAngle;break}L+=V}return h?(m=A*B+C/this.data.length/2+v,w=d+m*Math.cos(c),b=f+m*Math.sin(c),S={series:P,name:P.name,color:h.color||this.color,x:w,y:b,bounding:{x1:0,x2:z.width(),y1:0,y2:z.height()},values:this.createLabelValues(h,P)},this.closestMeta=S,this.labelsView.apply(S)):(this.closestMeta=void 0,this.labelsView.apply([]))}},e}(hx.EventEmitter),hx.PieChart=V,hx.plot.label={},hx.plot.label.standard=function(t,e){var n,i,r,o,s,a,l,h;return n=5,hx.select(t).view(".hx-plot-label-marker","circle").update(function(t){return this.attr("cx",t.x).attr("cy",t.y).attr("r",4).attr("fill",t.color).attr("stroke","white").attr("stroke-width",3)}).apply(e),i=function(){return this.view(".hx-plot-label-box","rect").apply(1)},r=function(t,e,n){return this.view(".hx-plot-label-box","rect").update(function(t){return this.attr("width",e).attr("height",n).attr("rx",1).attr("ry",1)}).apply(t)},s=function(t,e,n){return this.view(".hx-plot-label-divider","line").update(function(t){return this.attr("x1",e).attr("y1",t).attr("x2",n).attr("y2",t)}).apply(t)},l=function(t,e,n,i){return this.view(t,"text").update(function(t){return this.text(t).attr("x",n).attr("y",i)}).apply(e),this.select(t).map(function(t){return t.getComputedTextLength()})},a=function(t,e,i){var r;return this.view(".hx-plot-label-header","text").update(function(t){return this.text(t).attr("x",e+n).attr("y",i+n)}).apply(t.name),r=this.select("text").map(function(t){return t.getComputedTextLength()}),{width:r+2*n,height:12+2*n}},h=function(t,e,i){var r,o,s,a,h,u;return h=e+n,u=i,s=0,o=0,this.view(".hx-plot-label-keys","g").update(function(t){var e;return e=l.call(this,".hx-plot-label-key",t.name,h,u+n),u+=12+2*n,o+=12+2*n,s=Math.max(e,s)}).apply(t.values),h=e+3*n+s,u=i,a=0,r=0,this.view(".hx-plot-label-values","g").update(function(t){var e;return e=l.call(this,".hx-plot-label-value",t.formatter(t.value),h,u+n),u+=12+2*n,r+=12+2*n,a=Math.max(e,a)}).apply(t.values),{width:s+a+4*n,height:Math.max(o,r)}},o=function(t){var e,o,l,u,c,p,d,f,x,g,v,y;return i.call(this),c=a.call(this,t,0,0),x=c.width,u=c.height,l=x,o=u,p=h.call(this,t,0,0+o),x=p.width,u=p.height,f=x,d=u,x=Math.max(l,f),u=o+d,r.call(this,t,x,u),e=function(){var e,i,r;for(r=[],g=e=0,i=t.values.length;i>=0?i>e:e>i;g=i>=0?++e:--e)r.push(o+g*(12+2*n));return r}(),s.call(this,e,0,x),t.bounding?(v=t.x+10+x>t.bounding.x2?t.x-x-10:Math.max(t.x+10,t.bounding.x1),y=Math.max(Math.min(t.bounding.y2-u/2,t.y),t.bounding.y1+u/2)-u/2):(v=t.x+10,y=t.y-u/2),this.attr("transform","translate("+v+", "+y+")")},hx.select(t).view(".hx-plot-label-container","g").update(o).apply(e)}}(),function(){var t,e,n,i,r=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=[{code:"af",full:"Afrikaans"},{code:"sq",full:"Albanian"},{code:"ar",full:"Arabic"},{code:"ar-ma",full:"Arabic (Morocco)"},{code:"ar-sa",full:"Arabic (Saudi Arabia)"},{code:"ar-tn",full:"Arabic (Tunisia)"},{code:"hy-am",full:"Armenian"},{code:"az",full:"Azerbaijani"},{code:"id",full:"Bahasa Indonesia"},{code:"ms-my",full:"Bahasa Malayu"},{code:"eu",full:"Basque"},{code:"be",full:"Belarusian"},{code:"bn",full:"Bengali"},{code:"bs",full:"Bosnian"},{code:"br",full:"Breton"},{code:"bg",full:"Bulgarian"},{code:"my",full:"Burmese"},{code:"ca",full:"Catalan"},{code:"zh-cn",full:"Chinese"},{code:"zh-tw",full:"Chinese (Traditional)"},{code:"cv",full:"Chuvash"},{code:"hr",full:"Croatian"},{code:"cs",full:"Czech"},{code:"da",full:"Danish"},{code:"nl",full:"Dutch"},{code:"en",full:"English (US)"},{code:"en-au",full:"English (Australia)"},{code:"en-ca",full:"English (Canada)"},{code:"en-gb",full:"English"},{code:"eo",full:"Esperanto"},{code:"et",full:"Estonian"},{code:"fo",full:"Farose"},{code:"fi",full:"Finnish"},{code:"fr",full:"French"},{code:"fr-ca",full:"French (Canada)"},{code:"fy",full:"Frisian"},{code:"gl",full:"Galician"},{code:"ka",full:"Georgian"},{code:"de",full:"German"},{code:"de-at",full:"German (Austria)"},{code:"el",full:"Greek"},{code:"he",full:"Hebrew"},{code:"hi",full:"Hindi"},{code:"hu",full:"Hungarian"},{code:"is",full:"Icelandic"},{code:"it",full:"Italian"},{code:"ja",full:"Japanese"},{code:"km",full:"Khmer (Cambodia)"},{code:"ko",full:"Korean"},{code:"lv",full:"Latvian"},{code:"lt",full:"Lithuanian"},{code:"lb",full:"Luxembourgish"},{code:"mk",full:"Macedonian"},{code:"ml",full:"Malayalam"},{code:"mr",full:"Marathi"},{code:"ne",full:"Nepalese"},{code:"nb",full:"Norwegian"},{code:"nn",full:"Norwegian Nynorsk"},{code:"fa",full:"Persian"},{code:"pl",full:"Polish"},{code:"pt",full:"Portuguese"},{code:"pt-br",full:"Portuguese (Brazil)"},{code:"ro",full:"Romanian"},{code:"ru",full:"Russian"},{code:"sr",full:"Serbian"},{code:"sr-cyrl",full:"Serbian Cyrillic"},{code:"sk",full:"Slovak"},{code:"sl",full:"Slovenian"},{code:"es",full:"Spanish"},{code:"sv",full:"Swedish"},{code:"tl-ph",full:"Tagalog (Filipino)"},{code:"tzm",full:"Tamaziɣt"},{code:"tzm-latn",full:"Tamaziɣt Latin"},{code:"ta",full:"Tamil"},{code:"th",full:"Thai"},{code:"bo",full:"Tibetan"},{code:"tr",full:"Turkish"},{code:"uk",full:"Ukrainian"},{code:"uz",full:"Uzbek"},{code:"vi",full:"Vietnamese"},{code:"cy",full:"Welsh"}],i=void 0,e=function(){return null!=i?i:i=[{name:"Time Zone",type:"Text",options:{key:"timeZone",required:!0,autoCompleteData:"undefined"!=typeof moment&&null!==moment?moment.tz.names():void 0,autoCompleteOptions:{mustMatch:!0,showOtherResults:!0}}},{name:"Locale",type:"Text",options:{key:"locale",required:!0,autoCompleteData:[],autoCompleteOptions:{mustMatch:!0,showOtherResults:!0,renderer:function(t,e){return t=hx.select(t).text(e.full+" - ("+e.code+")")},inputMap:function(t){return t.code},filter:function(t,e){var n;return n={searchValues:function(t){return[t.full,t.code]}},t=hx.filter.contains(t,e,n),t=t.sort(function(t,e){return!t.disabled&&e.disabled?-1:t.disabled&&!e.disabled?1:hx.sort.compare(t.full,e.full)})}}}}]},t=function(t){function i(){i.__super__.constructor.apply(this,arguments),this._={},this.supportedLocales=n.slice()}var o,s;return r(i,t),s=function(t,i,r){var o,s;return s=document.createElement("form"),hx.select(s).style("display","block"),o=new hx.Form(s).on("submit",function(t){var e;return e=hx.notify().loading("Saving preferences..."),r.value(t,function(t,n){return e.close(),null!=t?hx.notify().error("Preferences were not saved successfully"):(hx.notify().info("Preferences were saved successfully","fa fa-check"),r._.modal.close())})}),e().forEach(function(t){var e;return"Locale"===t.name&&(null!=(e=r.supportedLocales)?e.length:void 0)>0?(t.options.autoCompleteData=n.map(function(t){return t.disabled=r.supportedLocales.some(function(e){return e===t.code})?!1:!0,t}),o["add"+t.type](t.name,t.options)):"Locale"!==t.name?"Radio"===t.type||"Select"===t.type?o["add"+t.type](t.name,t.values,t.options):o["add"+t.type](t.name,t.options):void 0}),o.addSubmit("Submit","fa fa-check"),o.data(i),t.appendChild(s)},i.prototype.show=function(){var t,e,n;t=this._,t.modal||(n=this,e=hx.notify().loading("Getting preferences..."),this.value(function(i,r){return e.close(),i?hx.notify().error(""):(t.modal=new hx.Modal("Settings",function(t){return s(t,r,n)}),t.modal.show(),t.modal.on("close",function(){return t.modal=void 0}))}))},i.prototype.hide=function(){this._.modal&&this._.modal.close()},o=function(t,e,n){var i,r;r=JSON.stringify(this._.preferences),i=JSON.stringify(e),r!==i&&(this._.preferences=e,this.emit("change",this._.preferences)),"function"==typeof n&&n(t,hx.merge(!0,this._.preferences))},i.prototype.clearPreferences=function(){localStorage.removeItem("preferences"),this._.preferences=void 0},i.prototype.value=function(t,e){var n;return arguments.length>0&&!hx.isFunction(t)?localStorage.setItem("preferences",JSON.stringify(t)):(e=t,t=(n=localStorage.getItem("preferences"))?JSON.parse(n):void 0),o.call(this,void 0,t,e)},i.prototype.getPreferences=function(t){return hx.deprecatedWarning("Preferences.getPreferences(cb)","Use Preferences.value(cb)."),this.value.apply(this,arguments)},i.prototype.setPreferences=function(t,e){return hx.deprecatedWarning("Preferences.getPreferences(cb)","Use Preferences.value(cb)."),this.value.apply(this,arguments)},i.prototype.getLocaleList=function(){return n.slice()},i}(hx.EventEmitter),hx.preferences=new t}(),function(){var t;t=function(){function t(t){this.selector=t,this.selection=hx.select(this.selector).classed("hx-progress-bar",!0),this.innerBar=this.selection.append("div").attr("class","hx-progress-bar-inner"),this.value(0)}return t.prototype.setProgress=function(t){return hx.deprecatedWarning(this.selector+": ProgressBar.setProgress(value)","Use ProgressBar.value(value) instead."),this.value.apply(this,arguments)},t.prototype.getProgress=function(){return hx.deprecatedWarning(this.selector+": ProgressBar.getProgress()","Use ProgressBar.value() instead."),this.value.apply(this,arguments)},t.prototype.value=function(t){return arguments.length>0?(isNaN(t)||(this.progress=Math.max(0,Math.min(1,t)),this.innerBar.style("width",100*this.progress+"%")),this):this.progress},t}(),hx.ProgressBar=t}(),function(){var t,e;e=function(t,e,n,i){var r,o,s,a,l,h,u,c,p,d;return null==t&&(t="body"),null==i&&(i={}),a=function(t){return d.selectAll(".hx-opened").each(function(t){var e,n;return e=hx.select.getHexagonElementDataObject(t,!1),null!=e&&null!=(n=e.widget)?n.hide(!1):void 0}),"function"==typeof t?t():void 0},l=function(t){return o+=1,'<span class="hx-highlight-selected">'+t+"</span>"},p=function(t,e){return t.selectAll(".hx-highlighted-content").each(function(t){var e,n;return e=t.childNodes,n=document.createTextNode(t.textContent),t.parentNode.replaceChild(n,t)}),"function"==typeof e?e():void 0},h=function(t,e){var n,i;return null==e&&(e=t),null===t.offsetParent&&null!=(null!=e?e.parentNode:void 0)?(n=hx.select.getHexagonElementDataObject(e,!1),null!=n&&null!=(i=n.widget)&&"function"==typeof i.show&&i.show(!1,t),h(t,e.parentNode)):void 0},u=function(t,e){var n;for(n=t,t=s.length<50?s.length:1*t+10;t>n&&n<s.length;)h(s[n]),n+=1;return void(n<s.length&&setTimeout(function(){return u(n)},150))},r=function(t){var e,n,o,a,h,u,p;if(p=(null!=(u=t.textContent)?u.search(c):void 0)>-1){if("#text"===t.nodeName)h=hx.detached("span")["class"]("hx-highlighted-content").node(),h.innerHTML=t.data.replace(c,l),t.parentNode.replaceChild(h,t),null===h.offsetParent&&null!=(null!=h?h.parentNode:void 0)&&s.push(h);else if("function"==typeof i.elemMatch&&i.elemMatch(t,!0),n=t.childNodes,n.length>0)for(o=0,a=n.length;a>o;o++)e=n[o],r(e)}else"#text"!==t.nodeName&&"function"==typeof i.elemMatch&&i.elemMatch(t,!1);return void 0},d=hx.select(t),d.style("min-height",d.style("height")),s=[],o=0,null!=e&&e.length>0?(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),c=new RegExp(e,"ig"),a(function(){return p(d,function(){return e.length>=(i.minLength||2)?(r(d.node()),"function"==typeof n&&n(o)):"function"==typeof n&&n(),s.length>0?setTimeout(function(){return u(0)},0):void 0})})):a(function(){return p(d,function(){return"function"==typeof n?n():void 0})}),void setTimeout(function(){return d.style("min-height","")},10)},t=function(t){return null==t&&(t="body"),e(t)},hx.searchDOM=e,hx.clearSearch=t}(),function(){var t;t=function(){function t(t,e,n,i){var r,o;null==e&&(e=".hx-titlebar-header"),null==n&&(n=".hx-content"),null==i&&(i=!0),this.selection=hx.select(t),o=hx.select("body").width()>560,this.selection.classed("hx-sidebar",!0).classed("hx-openable",!0).classed("hx-opened",o),hx.select("body").classed("hx-sidebar-opened",o).node().offsetHeight,i&&hx.select("body").classed("hx-sidebar-page",!0),this.selection.classed("hx-animate",!0),hx.select(n).classed("hx-animate",!0),r=hx.select(e).prepend("button").attr("type","button")["class"]("hx-titlebar-sidebar-button").html('<i class="fa fa-bars"></i>'),r.on("click",function(t){return function(){return t.toggle()}}(this))}return t.prototype.toggle=function(){return this.selection.classed("hx-opened")?this.hide():this.show()},t.prototype.hide=function(){return this.selection.classed("hx-opened",!1),hx.select("body").classed("hx-sidebar-opened",!1),this},t.prototype.show=function(){return this.selection.classed("hx-opened",!0),hx.select("body").classed("hx-sidebar-opened",!0),this},t}(),hx.Sidebar=t}(),function(){var t,e=function(t,e){function i(){this.constructor=t}for(var r in e)n.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},n={}.hasOwnProperty;t=function(t){function n(t){var e;this.selector=t,n.__super__.constructor.apply(this,arguments),this.selected=-1,e=this,hx.select(this.selector).selectAll(".hx-tab").each(function(t,n){return hx.select(t).on("click",function(){return i(e,t,n)})}),this.select(0)}var i;return e(n,t),i=function(t,e,n){return t.selected=n,hx.select(t.selector).selectAll(".hx-tab").classed("hx-tab-active",!1),hx.select(e).classed("hx-tab-active",!0),hx.select(t.selector).selectAll(".hx-tab-content").classed("hx-tab-content-hidden",!0),hx.select("#"+hx.select(e).attr("data-content")).classed("hx-tab-content-hidden",!1),t.emit("change",{id:n})},n.prototype.select=function(t,e){var n;return this.selected!==t||e?(n=hx.select(this.selector).selectAll(".hx-tab").nodes[t],i(this,n,t)):void 0},n}(hx.EventEmitter),hx.Tabs=t}(),function(){var t,e,n=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},i={}.hasOwnProperty;e=hx.format.zeroPad(2),t=function(t){function i(t,e){var n,r,o;null==e&&(e={}),hx.isString(e)&&hx.consoleWarning(t+": hx.TimeSlider incorrect value passed into constructor",'The time slider constructor expects an options object as the second parameter but was passed "'+e+'"'),(null!=(r=e.discreteValues)?r.length:void 0)>0&&(hx.consoleWarning(t+": hx.TimeSlider does not support the discreteValues option","Discrete values override the functionality of the time slider. hx.Slider should be used for discrete values."),delete e.discreteValues),null==e.render&&(e.render=function(t,e,n){return hx.select(e).text(t.formatter(t.valueToDate(n)))}),null!=e.min&&(o=e.min,delete e.min),null!=e.max&&(n=e.max,delete e.max),null==o&&(o=new Date,o.setMilliseconds(0),o.setMinutes(0),o.setHours(0),n=new Date(o.getTime()+864e5-1)),this.start=o.getTime(),this.end=n.getTime(),null!=e.step&&(e.step=e.step/(this.end-this.start)),i.__super__.constructor.call(this,t,e)}var r;return n(i,t),i.prototype.formatter="undefined"!=typeof moment&&null!==moment?function(t){return moment(t).format("HH:mm")}:function(t){return e(t.getHours())+":"+e(t.getMinutes())},r=function(t,e){return e instanceof Date?(e.getTime()-t.start)/(t.end-t.start):e},i.prototype.valueToDate=function(t){return new Date(this.start+(this.end-this.start)*t)},i.prototype.getValue=function(){return hx.deprecatedWarning(this.selector+": TimeSlider.getValue()","Use TimeSlider.value() instead."),this.value.apply(this,arguments)},i.prototype.setValue=function(t){return hx.deprecatedWarning(this.selector+": TimeSlider.setValue(value)","Use TimeSlider.value(value) instead."),this.value.apply(this,arguments)},i.prototype.value=function(t){var e,n;return arguments.length>0?("range"===this.options.type?(n=null!=t.startValue?r(this,t.startValue):void 0,e=null!=t.endValue?r(this,t.endValue):void 0,i.__super__.value.call(this,{startValue:n,endValue:e})):i.__super__.value.call(this,r(this,t)),this):"range"===this.options.type?{startValue:this.valueToDate(this.values.startValue),endValue:this.valueToDate(this.values.endValue)}:this.valueToDate(this.values.value)},i.prototype.setRange=function(t,e){return this.start=t.getTime(),this.end=e.getTime(),this},i}(hx.Slider),hx.TimeSlider=t}(),function(){var t;t=function(){function t(t,e){this.selector=t,this.hideDisabledButtons=null!=e?e:!1,this.selection=hx.select(this.selector).classed("hx-openable",!0),hx.select.getHexagonElementDataObject(this.selection.node()).widget=this,this.refresh()}var e,n,i;return n=function(t,e,n){var i,r;return i=hx.select(t).select(".hx-tree-node-children"),!i.selectAll(".hx-tree-node").empty()&&(r="block"===i.style("display"),hx.select(t).classed("hx-tree-node-open",r),n)?hx.select(e).select("i").morph().then(r?"rotate-90":"rotate-0").go(!0):void 0},e=function(t,e,i){var r,o,s,a,l,h,u,c;return c=function(e){return function(e){var i,r;return r=hx.select(t).select(".hx-tree-node-children"),i="none"===r.style("display")?"block":"none",r.style("display",i),n(t,e,!0)}}(this),a=function(e){return function(e){var i,r,o;return o=hx.select(t).selectAll(".hx-tree-node-children"),i=hx.select(t).select(".hx-tree-node-children"),r=i.node(),"block"===i.style("display")?o.each(function(t){var i;return t!==r&&(i=hx.select(t),"block"!==i.style("display"))?(e=hx.select(t.parentNode).select(".hx-tree-node-parent-icon").node(),i.style("display","block"),n(t.parentNode,e,!0)):void 0}):c(e)}}(this),u=hx.select(t.parentNode).selectAll(".hx-tree-node").select(".hx-tree-node-children").selectAll(".hx-tree-node").size()>0,
u=e?!1:u,hx.select(t).select(".hx-tree-node-children").selectAll(".hx-tree-node").size()>0||u?(o=hx.select(t).select(".hx-tree-node-parent"),o.size()>0?o.view(".hx-tree-node-parent-icon").enter(function(){var t;return t=this.append("div"),t.attr("class","hx-tree-node-parent-icon").append("i").attr("class","fa fa-chevron-right hx-tree-node-state-icon"),t.node()}).update(function(t,e){var r,o;return o=!1,r=function(){return o=!1},this.on("click",function(){return o?a(e):c(e),setTimeout(r,250),o=!0}),n(e.parentNode.parentNode,e,i)}).apply(this):(l=hx.select(t),r=l.select(".hx-tree-node-content").node(),s=l.append("div").attr("class","hx-tree-node-parent").node(),s.appendChild(r),h=hx.select(s).append("div"),h.attr("class","hx-tree-node-parent-icon hx-tree-node-parent-icon-disabled").append("i").attr("class","fa fa-chevron-right"))):void 0},t.prototype.refresh=function(t){return null==t&&(t=!1),this.selection.selectAll(".hx-tree-node").each(function(n){return function(i){return e(i,n.hideDisabledButtons,t)}}(this))},t.prototype.render=function(t,e){var n,i;return n=function(t,n){var r,o,s;return null!=n.children&&n.children.length>0?(o=hx.select(t).append("div").attr("class","hx-tree-node-parent"),s=o.append("div").attr("class","hx-tree-node-content"),e(s.node(),n),r=hx.select(t).append("div").attr("class","hx-tree-node-children"),i(r,n.children)):(r=hx.select(t).append("div").attr("class","hx-tree-node-content"),e(r.node(),n))},i=function(t,e){var i;return i=t.view(".hx-tree-node").enter(function(t){var e;return e=this.append("div").attr("class","hx-tree-node").node(),n(e,t),e}).apply(e)},this.selection.selectAll(".hx-tree-node").remove(),i(this.selection,t),this.refresh()},i=function(t){var e,n;return n=hx.select(t),n.classed("hx-tree-node")&&(t=t.parentNode,n.select(":scope > .hx-tree-node-children").style("display","block")),e=t.parentNode,null!=e&&this.selection.node().contains(t)?i.call(this,e):void 0},t.prototype.show=function(t,e){return null==t&&(t=!0),null!=e?i.call(this,e):this.selection.selectAll(".hx-tree-node-children").style("display","block"),this.selection.classed("hx-opened",!0),this.refresh(t)},t.prototype.hide=function(t,e){var n,i;return null==t&&(t=!0),null!=e?(i=hx.select(e),i.select(":scope > .hx-tree-node-children").style("display","none"),n=this.selection.selectAll(".hx-tree-node-children").style("display"),n.some(function(t){return"block"===t})||this.selection.classed("hx-opened",!1)):(this.selection.classed("hx-opened",!1),this.selection.selectAll(".hx-tree-node-children").style("display","none")),this.refresh(t)},t}(),hx.Tree=t,hx.initialiseTrees=function(e){return hx.selectAll(e).map(function(e){return new t(e)})}}()}();